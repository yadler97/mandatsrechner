import{s as Lt,b as kt,r as Ht,g as st,n as Pt,d as it}from"../chunks/eX-Ury47.js";import{S as It,i as jt,e as f,s as y,t as N,o as xe,c,l as x,f as C,a as g,d as p,b as O,p as Oe,m as _,q as Q,g as W,h as n,r as yt,u as Ve,v as ze,B as he,j as pe,w as Be,x as We,y as Re,n as At,z as Nt,k as xt}from"../chunks/CvUCCQBL.js";import{data as Ot,mandateData as Vt,majorityData as zt}from"../chunks/DWf01OZ1.js";import{e as Ct}from"../chunks/D6YF6ztN.js";import{B as Mt,D as Bt,C as Wt,p as Rt,a as Ft,b as qt,c as Ut,d as Zt,L as Gt,e as Qt,f as Jt}from"../chunks/B78RUGKS.js";function Et(e,s,r){const l=e.slice();return l[17]=s[r],l[18]=s,l[19]=r,l}function Tt(e){let s,r,l=e[0].labels[e[19]]+"",i,d,a,o,v;function b(){e[15].call(a,e[19])}return{c(){s=f("div"),r=f("label"),i=N(l),d=y(),a=f("input"),this.h()},l(u){s=c(u,"DIV",{class:!0});var h=g(s);r=c(h,"LABEL",{for:!0});var S=g(r);i=O(S,l),S.forEach(p),d=C(h),a=c(h,"INPUT",{id:!0,type:!0,min:!0,max:!0}),h.forEach(p),this.h()},h(){_(r,"for","input_party_"+e[19]),_(a,"id","input_party_"+e[19]),_(a,"type","number"),_(a,"min","0"),_(a,"max","100"),_(s,"class","input_field_vote_party")},m(u,h){W(u,s,h),n(s,r),n(r,i),n(s,d),n(s,a),Q(a,e[0].datasets[0].data[e[19]]),o||(v=ze(a,"input",b),o=!0)},p(u,h){e=u,h&1&&l!==(l=e[0].labels[e[19]]+"")&&pe(i,l),h&1&&he(a.value)!==e[0].datasets[0].data[e[19]]&&Q(a,e[0].datasets[0].data[e[19]])},d(u){u&&p(s),o=!1,v()}}}function Dt(e){let s,r="Achtung: Gesamtstimmen dürfen 100% nicht überschreiten!";return{c(){s=f("p"),s.textContent=r},l(l){s=c(l,"P",{"data-svelte-h":!0}),x(s)!=="svelte-154vc08"&&(s.textContent=r)},m(l,i){W(l,s,i)},d(l){l&&p(s)}}}function Kt(e){let s,r="Stimmenanteile",l,i,d,a,o="Allgemeine Informationen",v,b,u,h,S='<label for="input_mandate_count">Abgeordnete</label>',te,ae,L,me,R,J,Ce='<label for="input_threshold">Sperrklausel</label>',E,I,k,T,Fe,qe,ne,se,ot='<label for="input_apportionment_method">Sitzzuteilungsverfahren</label>',Ue,_e,H,F,dt="D'Hondt",q,ut="Sainte-Laguë",U,ft="Hare-Niemeyer",Ze,ie,K,Ge,P,Me,X,oe,ct="Sonstige:",Qe,ge,ve=(e[5]>=0?e[5].toFixed(2):0)+"",Ee,Je,Te,re,pt="Mandatsverteilung",De,Z,de,Y,Ke,V,$,Xe,z,Ye,we,$e,Se,Le,et,B,tt,Ie,at,je,ke,A,nt,ht;K=new Mt({props:{data:e[0],options:{responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:wt},annotation:{annotations:e[3]>0?{majorityLine:{type:"line",yMin:e[3],yMax:e[3],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{y:{suggestedMax:Math.max(...e[0].labels.map(e[14]))+5}}}}});let ue=Ct(e[0].datasets[0].data),M=[];for(let t=0;t<ue.length;t+=1)M[t]=Tt(Et(e,ue,t));let D=e[5]<0&&Dt();return Y=new Bt({props:{id:"mandatesChart",data:e[6],options:{responsive:!0,circumference:180,rotation:-90,plugins:{datalabels:{anchor:"end",align:"start",color:"white",formatter:ea,font:{weight:"bold",size:20}}}}}}),$=new Mt({props:{data:e[1],options:{responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:e[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:e[7],xMax:e[7],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:e[8],xMax:e[8],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:St,font:{weight:"bold",size:20}},legend:{onClick:e[16]}}}}}),{c(){s=f("h1"),s.textContent=r,l=y(),i=f("section"),d=f("div"),a=f("p"),a.textContent=o,v=y(),b=f("table"),u=f("tr"),h=f("th"),h.innerHTML=S,te=y(),ae=f("td"),L=f("input"),me=y(),R=f("tr"),J=f("th"),J.innerHTML=Ce,E=y(),I=f("td"),k=f("span"),T=f("input"),Fe=N(" %"),qe=y(),ne=f("tr"),se=f("th"),se.innerHTML=ot,Ue=y(),_e=f("td"),H=f("select"),F=f("option"),F.textContent=dt,q=f("option"),q.textContent=ut,U=f("option"),U.textContent=ft,Ze=y(),ie=f("div"),xe(K.$$.fragment),Ge=y(),P=f("div");for(let t=0;t<M.length;t+=1)M[t].c();Me=y(),X=f("div"),oe=f("p"),oe.textContent=ct,Qe=y(),ge=f("p"),Ee=N(ve),Je=y(),D&&D.c(),Te=y(),re=f("h1"),re.textContent=pt,De=y(),Z=f("section"),de=f("div"),xe(Y.$$.fragment),Ke=y(),V=f("div"),xe($.$$.fragment),Xe=y(),z=f("p"),Ye=N("Mehrheit: "),we=N(e[9]),$e=N("/"),Se=N(e[7]),et=y(),B=f("p"),tt=N("Zweidrittelmehrheit: "),Ie=N(e[9]),at=N("/"),je=N(e[8]),this.h()},l(t){s=c(t,"H1",{"data-svelte-h":!0}),x(s)!=="svelte-too001"&&(s.textContent=r),l=C(t),i=c(t,"SECTION",{class:!0});var m=g(i);d=c(m,"DIV",{class:!0});var j=g(d);a=c(j,"P",{"data-svelte-h":!0}),x(a)!=="svelte-7wsg44"&&(a.textContent=o),v=C(j),b=c(j,"TABLE",{});var G=g(b);u=c(G,"TR",{});var ee=g(u);h=c(ee,"TH",{"data-svelte-h":!0}),x(h)!=="svelte-1wy1b54"&&(h.innerHTML=S),te=C(ee),ae=c(ee,"TD",{});var w=g(ae);L=c(w,"INPUT",{id:!0,type:!0,min:!0,max:!0}),w.forEach(p),ee.forEach(p),me=C(G),R=c(G,"TR",{});var le=g(R);J=c(le,"TH",{"data-svelte-h":!0}),x(J)!=="svelte-e3yl1g"&&(J.innerHTML=Ce),E=C(le),I=c(le,"TD",{});var mt=g(I);k=c(mt,"SPAN",{class:!0});var rt=g(k);T=c(rt,"INPUT",{id:!0,type:!0,min:!0,max:!0}),Fe=O(rt," %"),rt.forEach(p),mt.forEach(p),le.forEach(p),qe=C(G),ne=c(G,"TR",{});var He=g(ne);se=c(He,"TH",{"data-svelte-h":!0}),x(se)!=="svelte-r745e5"&&(se.innerHTML=ot),Ue=C(He),_e=c(He,"TD",{});var _t=g(_e);H=c(_t,"SELECT",{class:!0});var Pe=g(H);F=c(Pe,"OPTION",{"data-svelte-h":!0}),x(F)!=="svelte-wlpdpc"&&(F.textContent=dt),q=c(Pe,"OPTION",{"data-svelte-h":!0}),x(q)!=="svelte-j8z6l1"&&(q.textContent=ut),U=c(Pe,"OPTION",{"data-svelte-h":!0}),x(U)!=="svelte-8h9q9v"&&(U.textContent=ft),Pe.forEach(p),_t.forEach(p),He.forEach(p),G.forEach(p),j.forEach(p),Ze=C(m),ie=c(m,"DIV",{class:!0});var gt=g(ie);Oe(K.$$.fragment,gt),gt.forEach(p),Ge=C(m),P=c(m,"DIV",{class:!0});var fe=g(P);for(let lt=0;lt<M.length;lt+=1)M[lt].l(fe);Me=C(fe),X=c(fe,"DIV",{class:!0});var Ae=g(X);oe=c(Ae,"P",{"data-svelte-h":!0}),x(oe)!=="svelte-1p0cp1c"&&(oe.textContent=ct),Qe=C(Ae),ge=c(Ae,"P",{});var vt=g(ge);Ee=O(vt,ve),vt.forEach(p),Ae.forEach(p),Je=C(fe),D&&D.l(fe),fe.forEach(p),m.forEach(p),Te=C(t),re=c(t,"H1",{"data-svelte-h":!0}),x(re)!=="svelte-jg7skr"&&(re.textContent=pt),De=C(t),Z=c(t,"SECTION",{class:!0});var Ne=g(Z);de=c(Ne,"DIV",{class:!0});var bt=g(de);Oe(Y.$$.fragment,bt),bt.forEach(p),Ke=C(Ne),V=c(Ne,"DIV",{class:!0});var ce=g(V);Oe($.$$.fragment,ce),Xe=C(ce),z=c(ce,"P",{class:!0});var be=g(z);Ye=O(be,"Mehrheit: "),we=O(be,e[9]),$e=O(be,"/"),Se=O(be,e[7]),be.forEach(p),et=C(ce),B=c(ce,"P",{class:!0});var ye=g(B);tt=O(ye,"Zweidrittelmehrheit: "),Ie=O(ye,e[9]),at=O(ye,"/"),je=O(ye,e[8]),ye.forEach(p),ce.forEach(p),Ne.forEach(p),this.h()},h(){_(L,"id","input_mandate_count"),_(L,"type","number"),_(L,"min","0"),_(L,"max","1000"),_(T,"id","input_threshold"),_(T,"type","number"),_(T,"min","0"),_(T,"max","100"),_(k,"class","valuePadding"),F.__value="D'Hondt",Q(F,F.__value),q.__value="Sainte-Laguë",Q(q,q.__value),U.__value="Hare-Niemeyer",Q(U,U.__value),_(H,"class","selectApportionmentMethod"),e[4]===void 0&&kt(()=>e[13].call(H)),_(d,"class","info_container"),_(ie,"class","bar_container"),_(X,"class","input_field_vote_party"),_(P,"class","input_fields_vote"),_(i,"class","vote_share_section"),_(de,"class","pie_container"),_(z,"class",Le="majorityText "+(e[9]<e[7]?"red":"green")),_(B,"class",ke="majorityText "+(e[9]<e[8]?"red":"green")),_(V,"class","stack_container"),_(Z,"class","mandate_section")},m(t,m){W(t,s,m),W(t,l,m),W(t,i,m),n(i,d),n(d,a),n(d,v),n(d,b),n(b,u),n(u,h),n(u,te),n(u,ae),n(ae,L),Q(L,e[2]),n(b,me),n(b,R),n(R,J),n(R,E),n(R,I),n(I,k),n(k,T),Q(T,e[3]),n(k,Fe),n(b,qe),n(b,ne),n(ne,se),n(ne,Ue),n(ne,_e),n(_e,H),n(H,F),n(H,q),n(H,U),yt(H,e[4],!0),n(i,Ze),n(i,ie),Ve(K,ie,null),n(i,Ge),n(i,P);for(let j=0;j<M.length;j+=1)M[j]&&M[j].m(P,null);n(P,Me),n(P,X),n(X,oe),n(X,Qe),n(X,ge),n(ge,Ee),n(P,Je),D&&D.m(P,null),W(t,Te,m),W(t,re,m),W(t,De,m),W(t,Z,m),n(Z,de),Ve(Y,de,null),n(Z,Ke),n(Z,V),Ve($,V,null),n(V,Xe),n(V,z),n(z,Ye),n(z,we),n(z,$e),n(z,Se),n(V,et),n(V,B),n(B,tt),n(B,Ie),n(B,at),n(B,je),A=!0,nt||(ht=[ze(L,"input",e[11]),ze(T,"input",e[12]),ze(H,"change",e[13])],nt=!0)},p(t,[m]){m&4&&he(L.value)!==t[2]&&Q(L,t[2]),m&8&&he(T.value)!==t[3]&&Q(T,t[3]),m&16&&yt(H,t[4]);const j={};if(m&1&&(j.data=t[0]),m&9&&(j.options={responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:wt},annotation:{annotations:t[3]>0?{majorityLine:{type:"line",yMin:t[3],yMax:t[3],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{y:{suggestedMax:Math.max(...t[0].labels.map(t[14]))+5}}}),K.$set(j),m&1){ue=Ct(t[0].datasets[0].data);let w;for(w=0;w<ue.length;w+=1){const le=Et(t,ue,w);M[w]?M[w].p(le,m):(M[w]=Tt(le),M[w].c(),M[w].m(P,Me))}for(;w<M.length;w+=1)M[w].d(1);M.length=ue.length}(!A||m&32)&&ve!==(ve=(t[5]>=0?t[5].toFixed(2):0)+"")&&pe(Ee,ve),t[5]<0?D||(D=Dt(),D.c(),D.m(P,null)):D&&(D.d(1),D=null);const G={};m&64&&(G.data=t[6]),Y.$set(G);const ee={};m&2&&(ee.data=t[1]),m&390&&(ee.options={responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:t[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:t[7],xMax:t[7],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:t[8],xMax:t[8],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:St,font:{weight:"bold",size:20}},legend:{onClick:t[16]}}}),$.$set(ee),(!A||m&512)&&pe(we,t[9]),(!A||m&128)&&pe(Se,t[7]),(!A||m&640&&Le!==(Le="majorityText "+(t[9]<t[7]?"red":"green")))&&_(z,"class",Le),(!A||m&512)&&pe(Ie,t[9]),(!A||m&256)&&pe(je,t[8]),(!A||m&768&&ke!==(ke="majorityText "+(t[9]<t[8]?"red":"green")))&&_(B,"class",ke)},i(t){A||(Be(K.$$.fragment,t),Be(Y.$$.fragment,t),Be($.$$.fragment,t),A=!0)},o(t){We(K.$$.fragment,t),We(Y.$$.fragment,t),We($.$$.fragment,t),A=!1},d(t){t&&(p(s),p(l),p(i),p(Te),p(re),p(De),p(Z)),Re(K),At(M,t),D&&D.d(),Re(Y),Re($),nt=!1,Ht(ht)}}}function Xt(e,s,r){let l=[],i=[],d=[...e];for(let a in e)i.push(1),l.push(0),e[a]<r&&(e[a]=0,d[a]=0);for(let a=0;a<s;a++){let o=d.indexOf(Math.max(...d));i[o]=i[o]+1,l[o]=l[o]+1,d[o]=e[o]/i[o]}return l}function Yt(e,s,r){let l=[],i=new Array(e.length).fill(.5),d=[...e];for(let a in e)i.push(1),l.push(0),e[a]<r&&(e[a]=0,d[a]=0);for(let a=0;a<s;a++){let o=d.indexOf(Math.max(...d));i[o]=i[o]+1,l[o]=l[o]+1,d[o]=e[o]/i[o]}return l}function $t(e,s,r){let l=[];const a=e.filter(u=>u>=r).reduce((u,h)=>u+h,0)/s;l=e.map(u=>{if(u<r)return 0;const h=Math.floor(u/a),S=u%a;return{initialMandates:h,remainder:S}});let o=l.reduce((u,h)=>u+(h.initialMandates||0),0);const v=s-o,b=l.map((u,h)=>({index:h,remainder:u.remainder||0})).sort((u,h)=>h.remainder-u.remainder);for(let u=0;u<v;u++)l[b[u].index].initialMandates+=1;return l.map(u=>u.initialMandates||0)}const wt=(e,s)=>{const{chart:r,dataIndex:l,datasetIndex:i}=s,d=r.data.datasets.length-1;return i!==d?"":r.data.datasets.reduce((o,v)=>{const b=v.data[l];return typeof b=="number"?o+b:o},0).toLocaleString("de-AT",{minimumFractionDigits:2,maximumFractionDigits:2})},ea=function(e){return e>0?e:""},St=function(e){return e>0?e:""};function ta(e,s,r){Wt.register(Rt,Ft,qt,Ut,Zt,Gt,Qt,Jt);let l=st("data"),i=st("mandateData"),d=st("majorityData"),a=10,o=4,v="D'Hondt",b=0,u=0,h=[],S,te=0;function ae(){a=he(this.value),r(2,a)}function L(){o=he(this.value),r(3,o)}function me(){v=Nt(this),r(4,v)}const R=(E,I)=>l.datasets.reduce((k,T)=>k+(T.data[I]||0),0);function J(E){l.datasets[0].data[E]=he(this.value),r(0,l),r(5,S),r(4,v),r(2,a),r(3,o)}const Ce=function(E,I){if(I.datasetIndex!==void 0){const k=I.datasetIndex,T=d.datasets[k].hidden;r(1,d.datasets[k].hidden=!T,d)}};return e.$$.update=()=>{if(e.$$.dirty&4&&r(7,b=Math.floor(a/2+1)),e.$$.dirty&4&&r(8,u=Math.ceil(a/3*2)),e.$$.dirty&61&&(r(5,S=100-l.datasets[0].data.reduce((E,I)=>E+I,0)),S>=0&&(r(0,l),r(5,S),r(4,v),r(2,a),r(3,o),v=="D'Hondt"?r(10,h=Xt([...l.datasets[0].data],a,o)):v=="Sainte-Laguë"?r(10,h=Yt([...l.datasets[0].data],a,o)):v=="Hare-Niemeyer"&&r(10,h=$t([...l.datasets[0].data],a,o)))),e.$$.dirty&1024){r(6,i.datasets[0].data=h,i);for(let E in h)r(1,d.datasets[E].data=[h[E]],d)}e.$$.dirty&514&&(r(9,te=0),d.datasets.forEach((E,I)=>{E.hidden||r(9,te+=E.data[0])}))},[l,d,a,o,v,S,i,b,u,te,h,ae,L,me,R,J,Ce]}class aa extends It{constructor(s){super(),jt(this,s,ta,Kt,Lt,{})}}function na(e){let s,r,l,i,d;return i=new aa({}),{c(){s=f("meta"),r=f("meta"),l=y(),xe(i.$$.fragment),this.h()},l(a){const o=xt("svelte-lfh6c0",document.head);s=c(o,"META",{property:!0,content:!0}),r=c(o,"META",{name:!0,content:!0}),o.forEach(p),l=C(a),Oe(i.$$.fragment,a),this.h()},h(){document.title="Mandatsrechner - Spielwiese",_(s,"property","og:title"),_(s,"content","Mandatsrechner - Spielwiese"),_(r,"name","twitter:title"),_(r,"content","Mandatsrechner - Spielwiese")},m(a,o){n(document.head,s),n(document.head,r),W(a,l,o),Ve(i,a,o),d=!0},p:Pt,i(a){d||(Be(i.$$.fragment,a),d=!0)},o(a){We(i.$$.fragment,a),d=!1},d(a){a&&p(l),p(s),p(r),Re(i,a)}}}function ra(e){return it("data",Ot),it("mandateData",Vt),it("majorityData",zt),[]}class ua extends It{constructor(s){super(),jt(this,s,ra,na,Lt,{})}}export{ua as component};
