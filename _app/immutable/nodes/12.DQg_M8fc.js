import{s as St,b as Pt,r as kt,g as st,n as Ht,d as it}from"../chunks/eX-Ury47.js";import{S as It,i as jt,e as f,s as y,t as N,o as xe,c as p,l as x,f as C,a as g,d as h,b as O,p as Oe,m as _,q as Q,g as B,h as n,r as yt,u as Ve,v as ze,A as he,j as ce,w as We,x as Be,y as Re,n as At,z as Nt,k as xt}from"../chunks/BHiyQTVU.js";import{data as Ot,mandateData as Vt,majorityData as zt}from"../chunks/DWf01OZ1.js";import{e as Ct}from"../chunks/D6YF6ztN.js";import{B as Mt,P as Wt,C as Bt,p as Rt,a as Ft,b as qt,c as Ut,d as Zt,L as Gt,e as Qt,f as Jt}from"../chunks/DnBxf5iF.js";function Et(e,i,a){const r=e.slice();return r[17]=i[a],r[18]=i,r[19]=a,r}function Tt(e){let i,a,r=e[0].labels[e[19]]+"",l,d,s,u,v;function b(){e[15].call(s,e[19])}return{c(){i=f("div"),a=f("label"),l=N(r),d=y(),s=f("input"),this.h()},l(o){i=p(o,"DIV",{class:!0});var c=g(i);a=p(c,"LABEL",{for:!0});var L=g(a);l=O(L,r),L.forEach(h),d=C(c),s=p(c,"INPUT",{id:!0,type:!0,min:!0,max:!0}),c.forEach(h),this.h()},h(){_(a,"for","input_party_"+e[19]),_(s,"id","input_party_"+e[19]),_(s,"type","number"),_(s,"min","0"),_(s,"max","100"),_(i,"class","input_field_vote_party")},m(o,c){B(o,i,c),n(i,a),n(a,l),n(i,d),n(i,s),Q(s,e[0].datasets[0].data[e[19]]),u||(v=ze(s,"input",b),u=!0)},p(o,c){e=o,c&1&&r!==(r=e[0].labels[e[19]]+"")&&ce(l,r),c&1&&he(s.value)!==e[0].datasets[0].data[e[19]]&&Q(s,e[0].datasets[0].data[e[19]])},d(o){o&&h(i),u=!1,v()}}}function Dt(e){let i,a="Achtung: Gesamtstimmen dürfen 100% nicht überschreiten!";return{c(){i=f("p"),i.textContent=a},l(r){i=p(r,"P",{"data-svelte-h":!0}),x(i)!=="svelte-154vc08"&&(i.textContent=a)},m(r,l){B(r,i,l)},d(r){r&&h(i)}}}function Kt(e){let i,a="Stimmenanteile",r,l,d,s,u="Allgemeine Informationen",v,b,o,c,L='<label for="input_mandate_count">Abgeordnete</label>',te,ae,S,me,R,J,Ce='<label for="input_threshold">Sperrklausel</label>',E,I,P,T,Fe,qe,ne,se,ot='<label for="input_apportionment_method">Sitzzuteilungsverfahren</label>',Ue,_e,k,F,dt="D'Hondt",q,ut="Sainte-Laguë",U,ft="Hare-Niemeyer",Ze,ie,K,Ge,H,Me,X,oe,pt="Sonstige:",Qe,ge,ve=(e[5]>=0?e[5].toFixed(2):0)+"",Ee,Je,Te,re,ct="Mandatsverteilung",De,Z,de,Y,Ke,V,$,Xe,z,Ye,we,$e,Le,Se,et,W,tt,Ie,at,je,Pe,A,nt,ht;K=new Mt({props:{data:e[0],options:{responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:wt},annotation:{annotations:e[3]>0?{majorityLine:{type:"line",yMin:e[3],yMax:e[3],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{y:{suggestedMax:Math.max(...e[0].labels.map(e[14]))+5}}}}});let ue=Ct(e[0].datasets[0].data),M=[];for(let t=0;t<ue.length;t+=1)M[t]=Tt(Et(e,ue,t));let D=e[5]<0&&Dt();return Y=new Wt({props:{id:"mandatesChart",data:e[6],options:{responsive:!0,circumference:180,rotation:-90,plugins:{datalabels:{anchor:"end",align:"start",color:"white",formatter:ea,font:{weight:"bold",size:20}}}}}}),$=new Mt({props:{data:e[1],options:{responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:e[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:e[7],xMax:e[7],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:e[8],xMax:e[8],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:Lt,font:{weight:"bold",size:20}},legend:{onClick:e[16]}}}}}),{c(){i=f("h1"),i.textContent=a,r=y(),l=f("section"),d=f("div"),s=f("p"),s.textContent=u,v=y(),b=f("table"),o=f("tr"),c=f("th"),c.innerHTML=L,te=y(),ae=f("td"),S=f("input"),me=y(),R=f("tr"),J=f("th"),J.innerHTML=Ce,E=y(),I=f("td"),P=f("span"),T=f("input"),Fe=N(" %"),qe=y(),ne=f("tr"),se=f("th"),se.innerHTML=ot,Ue=y(),_e=f("td"),k=f("select"),F=f("option"),F.textContent=dt,q=f("option"),q.textContent=ut,U=f("option"),U.textContent=ft,Ze=y(),ie=f("div"),xe(K.$$.fragment),Ge=y(),H=f("div");for(let t=0;t<M.length;t+=1)M[t].c();Me=y(),X=f("div"),oe=f("p"),oe.textContent=pt,Qe=y(),ge=f("p"),Ee=N(ve),Je=y(),D&&D.c(),Te=y(),re=f("h1"),re.textContent=ct,De=y(),Z=f("section"),de=f("div"),xe(Y.$$.fragment),Ke=y(),V=f("div"),xe($.$$.fragment),Xe=y(),z=f("p"),Ye=N("Mehrheit: "),we=N(e[9]),$e=N("/"),Le=N(e[7]),et=y(),W=f("p"),tt=N("Zweidrittelmehrheit: "),Ie=N(e[9]),at=N("/"),je=N(e[8]),this.h()},l(t){i=p(t,"H1",{"data-svelte-h":!0}),x(i)!=="svelte-too001"&&(i.textContent=a),r=C(t),l=p(t,"SECTION",{class:!0});var m=g(l);d=p(m,"DIV",{class:!0});var j=g(d);s=p(j,"P",{"data-svelte-h":!0}),x(s)!=="svelte-7wsg44"&&(s.textContent=u),v=C(j),b=p(j,"TABLE",{});var G=g(b);o=p(G,"TR",{});var ee=g(o);c=p(ee,"TH",{"data-svelte-h":!0}),x(c)!=="svelte-1wy1b54"&&(c.innerHTML=L),te=C(ee),ae=p(ee,"TD",{});var w=g(ae);S=p(w,"INPUT",{id:!0,type:!0,min:!0,max:!0}),w.forEach(h),ee.forEach(h),me=C(G),R=p(G,"TR",{});var le=g(R);J=p(le,"TH",{"data-svelte-h":!0}),x(J)!=="svelte-e3yl1g"&&(J.innerHTML=Ce),E=C(le),I=p(le,"TD",{});var mt=g(I);P=p(mt,"SPAN",{class:!0});var rt=g(P);T=p(rt,"INPUT",{id:!0,type:!0,min:!0,max:!0}),Fe=O(rt," %"),rt.forEach(h),mt.forEach(h),le.forEach(h),qe=C(G),ne=p(G,"TR",{});var ke=g(ne);se=p(ke,"TH",{"data-svelte-h":!0}),x(se)!=="svelte-r745e5"&&(se.innerHTML=ot),Ue=C(ke),_e=p(ke,"TD",{});var _t=g(_e);k=p(_t,"SELECT",{class:!0});var He=g(k);F=p(He,"OPTION",{"data-svelte-h":!0}),x(F)!=="svelte-wlpdpc"&&(F.textContent=dt),q=p(He,"OPTION",{"data-svelte-h":!0}),x(q)!=="svelte-j8z6l1"&&(q.textContent=ut),U=p(He,"OPTION",{"data-svelte-h":!0}),x(U)!=="svelte-8h9q9v"&&(U.textContent=ft),He.forEach(h),_t.forEach(h),ke.forEach(h),G.forEach(h),j.forEach(h),Ze=C(m),ie=p(m,"DIV",{class:!0});var gt=g(ie);Oe(K.$$.fragment,gt),gt.forEach(h),Ge=C(m),H=p(m,"DIV",{class:!0});var fe=g(H);for(let lt=0;lt<M.length;lt+=1)M[lt].l(fe);Me=C(fe),X=p(fe,"DIV",{class:!0});var Ae=g(X);oe=p(Ae,"P",{"data-svelte-h":!0}),x(oe)!=="svelte-1p0cp1c"&&(oe.textContent=pt),Qe=C(Ae),ge=p(Ae,"P",{});var vt=g(ge);Ee=O(vt,ve),vt.forEach(h),Ae.forEach(h),Je=C(fe),D&&D.l(fe),fe.forEach(h),m.forEach(h),Te=C(t),re=p(t,"H1",{"data-svelte-h":!0}),x(re)!=="svelte-jg7skr"&&(re.textContent=ct),De=C(t),Z=p(t,"SECTION",{class:!0});var Ne=g(Z);de=p(Ne,"DIV",{class:!0});var bt=g(de);Oe(Y.$$.fragment,bt),bt.forEach(h),Ke=C(Ne),V=p(Ne,"DIV",{class:!0});var pe=g(V);Oe($.$$.fragment,pe),Xe=C(pe),z=p(pe,"P",{class:!0});var be=g(z);Ye=O(be,"Mehrheit: "),we=O(be,e[9]),$e=O(be,"/"),Le=O(be,e[7]),be.forEach(h),et=C(pe),W=p(pe,"P",{class:!0});var ye=g(W);tt=O(ye,"Zweidrittelmehrheit: "),Ie=O(ye,e[9]),at=O(ye,"/"),je=O(ye,e[8]),ye.forEach(h),pe.forEach(h),Ne.forEach(h),this.h()},h(){_(S,"id","input_mandate_count"),_(S,"type","number"),_(S,"min","0"),_(S,"max","1000"),_(T,"id","input_threshold"),_(T,"type","number"),_(T,"min","0"),_(T,"max","100"),_(P,"class","valuePadding"),F.__value="D'Hondt",Q(F,F.__value),q.__value="Sainte-Laguë",Q(q,q.__value),U.__value="Hare-Niemeyer",Q(U,U.__value),_(k,"class","selectApportionmentMethod"),e[4]===void 0&&Pt(()=>e[13].call(k)),_(d,"class","info_container"),_(ie,"class","bar_container"),_(X,"class","input_field_vote_party"),_(H,"class","input_fields_vote"),_(l,"class","vote_share_section"),_(de,"class","pie_container"),_(z,"class",Se="majorityText "+(e[9]<e[7]?"red":"green")),_(W,"class",Pe="majorityText "+(e[9]<e[8]?"red":"green")),_(V,"class","stack_container"),_(Z,"class","mandate_section")},m(t,m){B(t,i,m),B(t,r,m),B(t,l,m),n(l,d),n(d,s),n(d,v),n(d,b),n(b,o),n(o,c),n(o,te),n(o,ae),n(ae,S),Q(S,e[2]),n(b,me),n(b,R),n(R,J),n(R,E),n(R,I),n(I,P),n(P,T),Q(T,e[3]),n(P,Fe),n(b,qe),n(b,ne),n(ne,se),n(ne,Ue),n(ne,_e),n(_e,k),n(k,F),n(k,q),n(k,U),yt(k,e[4],!0),n(l,Ze),n(l,ie),Ve(K,ie,null),n(l,Ge),n(l,H);for(let j=0;j<M.length;j+=1)M[j]&&M[j].m(H,null);n(H,Me),n(H,X),n(X,oe),n(X,Qe),n(X,ge),n(ge,Ee),n(H,Je),D&&D.m(H,null),B(t,Te,m),B(t,re,m),B(t,De,m),B(t,Z,m),n(Z,de),Ve(Y,de,null),n(Z,Ke),n(Z,V),Ve($,V,null),n(V,Xe),n(V,z),n(z,Ye),n(z,we),n(z,$e),n(z,Le),n(V,et),n(V,W),n(W,tt),n(W,Ie),n(W,at),n(W,je),A=!0,nt||(ht=[ze(S,"input",e[11]),ze(T,"input",e[12]),ze(k,"change",e[13])],nt=!0)},p(t,[m]){m&4&&he(S.value)!==t[2]&&Q(S,t[2]),m&8&&he(T.value)!==t[3]&&Q(T,t[3]),m&16&&yt(k,t[4]);const j={};if(m&1&&(j.data=t[0]),m&9&&(j.options={responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:wt},annotation:{annotations:t[3]>0?{majorityLine:{type:"line",yMin:t[3],yMax:t[3],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{y:{suggestedMax:Math.max(...t[0].labels.map(t[14]))+5}}}),K.$set(j),m&1){ue=Ct(t[0].datasets[0].data);let w;for(w=0;w<ue.length;w+=1){const le=Et(t,ue,w);M[w]?M[w].p(le,m):(M[w]=Tt(le),M[w].c(),M[w].m(H,Me))}for(;w<M.length;w+=1)M[w].d(1);M.length=ue.length}(!A||m&32)&&ve!==(ve=(t[5]>=0?t[5].toFixed(2):0)+"")&&ce(Ee,ve),t[5]<0?D||(D=Dt(),D.c(),D.m(H,null)):D&&(D.d(1),D=null);const G={};m&64&&(G.data=t[6]),Y.$set(G);const ee={};m&2&&(ee.data=t[1]),m&390&&(ee.options={responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:t[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:t[7],xMax:t[7],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:t[8],xMax:t[8],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:Lt,font:{weight:"bold",size:20}},legend:{onClick:t[16]}}}),$.$set(ee),(!A||m&512)&&ce(we,t[9]),(!A||m&128)&&ce(Le,t[7]),(!A||m&640&&Se!==(Se="majorityText "+(t[9]<t[7]?"red":"green")))&&_(z,"class",Se),(!A||m&512)&&ce(Ie,t[9]),(!A||m&256)&&ce(je,t[8]),(!A||m&768&&Pe!==(Pe="majorityText "+(t[9]<t[8]?"red":"green")))&&_(W,"class",Pe)},i(t){A||(We(K.$$.fragment,t),We(Y.$$.fragment,t),We($.$$.fragment,t),A=!0)},o(t){Be(K.$$.fragment,t),Be(Y.$$.fragment,t),Be($.$$.fragment,t),A=!1},d(t){t&&(h(i),h(r),h(l),h(Te),h(re),h(De),h(Z)),Re(K),At(M,t),D&&D.d(),Re(Y),Re($),nt=!1,kt(ht)}}}function Xt(e,i,a){let r=[],l=[],d=[...e];for(let s in e)l.push(1),r.push(0),e[s]<a&&(e[s]=0,d[s]=0);for(let s=0;s<i;s++){let u=d.indexOf(Math.max(...d));l[u]=l[u]+1,r[u]=r[u]+1,d[u]=e[u]/l[u]}return r}function Yt(e,i,a){let r=[],l=new Array(e.length).fill(.5),d=[...e];for(let s in e)l.push(1),r.push(0),e[s]<a&&(e[s]=0,d[s]=0);for(let s=0;s<i;s++){let u=d.indexOf(Math.max(...d));l[u]=l[u]+1,r[u]=r[u]+1,d[u]=e[u]/l[u]}return r}function $t(e,i,a){let r=[];const s=e.filter(o=>o>=a).reduce((o,c)=>o+c,0)/i;r=e.map(o=>{if(o<a)return 0;const c=Math.floor(o/s),L=o%s;return{initialMandates:c,remainder:L}});let u=r.reduce((o,c)=>o+(c.initialMandates||0),0);const v=i-u,b=r.map((o,c)=>({index:c,remainder:o.remainder||0})).sort((o,c)=>c.remainder-o.remainder);for(let o=0;o<v;o++)r[b[o].index].initialMandates+=1;return r.map(o=>o.initialMandates||0)}const wt=(e,i)=>{const{chart:a,dataIndex:r,datasetIndex:l}=i,d=a.data.datasets.length-1;return l!==d?"":a.data.datasets.reduce((u,v)=>{const b=v.data[r];return typeof b=="number"?u+b:u},0).toLocaleString("de-AT",{minimumFractionDigits:2,maximumFractionDigits:2})},ea=function(e){return e>0?e:""},Lt=function(e){return e>0?e:""};function ta(e,i,a){Bt.register(Rt,Ft,qt,Ut,Zt,Gt,Qt,Jt);let r=st("data"),l=st("mandateData"),d=st("majorityData"),s=10,u=4,v="D'Hondt",b=0,o=0,c=[],L,te=0;function ae(){s=he(this.value),a(2,s)}function S(){u=he(this.value),a(3,u)}function me(){v=Nt(this),a(4,v)}const R=(E,I)=>r.datasets.reduce((P,T)=>P+(T.data[I]||0),0);function J(E){r.datasets[0].data[E]=he(this.value),a(0,r),a(5,L),a(4,v),a(2,s),a(3,u)}const Ce=function(E,I){if(I.datasetIndex!==void 0){const P=I.datasetIndex,T=d.datasets[P].hidden;a(1,d.datasets[P].hidden=!T,d)}};return e.$$.update=()=>{if(e.$$.dirty&4&&a(7,b=Math.floor(s/2+1)),e.$$.dirty&4&&a(8,o=Math.ceil(s/3*2)),e.$$.dirty&61&&(a(5,L=100-r.datasets[0].data.reduce((E,I)=>E+I,0)),L>=0&&(a(0,r),a(5,L),a(4,v),a(2,s),a(3,u),v=="D'Hondt"?a(10,c=Xt([...r.datasets[0].data],s,u)):v=="Sainte-Laguë"?a(10,c=Yt([...r.datasets[0].data],s,u)):v=="Hare-Niemeyer"&&a(10,c=$t([...r.datasets[0].data],s,u)))),e.$$.dirty&1024){a(6,l.datasets[0].data=c,l);for(let E in c)a(1,d.datasets[E].data=[c[E]],d)}e.$$.dirty&514&&(a(9,te=0),d.datasets.forEach((E,I)=>{E.hidden||a(9,te+=E.data[0])}))},[r,d,s,u,v,L,l,b,o,te,c,ae,S,me,R,J,Ce]}class aa extends It{constructor(i){super(),jt(this,i,ta,Kt,St,{})}}function na(e){let i,a,r;return a=new aa({}),{c(){i=y(),xe(a.$$.fragment),this.h()},l(l){xt("svelte-5at16t",document.head).forEach(h),i=C(l),Oe(a.$$.fragment,l),this.h()},h(){document.title="Mandatsrechner - Spielwiese"},m(l,d){B(l,i,d),Ve(a,l,d),r=!0},p:Ht,i(l){r||(We(a.$$.fragment,l),r=!0)},o(l){Be(a.$$.fragment,l),r=!1},d(l){l&&h(i),Re(a,l)}}}function ra(e){return it("data",Ot),it("mandateData",Vt),it("majorityData",zt),[]}class ua extends It{constructor(i){super(),jt(this,i,ra,na,St,{})}}export{ua as component};
