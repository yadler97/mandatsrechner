import{s as Lt,b as kt,r as Ht,g as it,n as Pt,d as ot}from"../chunks/eX-Ury47.js";import{S as It,i as jt,e as f,s as M,t as P,o as ze,c as p,l as A,f as E,a as b,d as c,b as N,p as Be,m,q as Z,g as z,h as r,r as yt,u as We,v as he,B as _e,j as me,w as Re,x as Fe,y as qe,n as At,z as Nt,k as Ot}from"../chunks/CvUCCQBL.js";import{data as xt,mandateData as Vt,majorityData as zt}from"../chunks/DWf01OZ1.js";import{e as Ct}from"../chunks/D6YF6ztN.js";import{B as Mt,D as Bt,C as Wt,p as Rt,a as Ft,b as qt,c as Ut,d as Zt,L as Gt,e as Qt,f as Jt}from"../chunks/B78RUGKS.js";function Et(e,i,n){const l=e.slice();return l[19]=i[n],l[20]=i,l[21]=n,l}function Tt(e){let i,n,l=e[0].labels[e[21]]+"",s,d,a,o,y;function C(){e[17].call(a,e[21])}return{c(){i=f("div"),n=f("label"),s=P(l),d=M(),a=f("input"),this.h()},l(u){i=p(u,"DIV",{class:!0});var h=b(i);n=p(h,"LABEL",{for:!0});var L=b(n);s=N(L,l),L.forEach(c),d=E(h),a=p(h,"INPUT",{id:!0,type:!0,min:!0,max:!0}),h.forEach(c),this.h()},h(){m(n,"for","input_party_"+e[21]),m(a,"id","input_party_"+e[21]),m(a,"type","number"),m(a,"min","0"),m(a,"max","100"),m(i,"class","input_field_vote_party")},m(u,h){z(u,i,h),r(i,n),r(n,s),r(i,d),r(i,a),Z(a,e[0].datasets[0].data[e[21]]),o||(y=he(a,"input",C),o=!0)},p(u,h){e=u,h&1&&l!==(l=e[0].labels[e[21]]+"")&&me(s,l),h&1&&_e(a.value)!==e[0].datasets[0].data[e[21]]&&Z(a,e[0].datasets[0].data[e[21]])},d(u){u&&c(i),o=!1,y()}}}function Dt(e){let i,n="Achtung: Gesamtstimmen dürfen 100% nicht überschreiten!";return{c(){i=f("p"),i.textContent=n},l(l){i=p(l,"P",{"data-svelte-h":!0}),A(i)!=="svelte-154vc08"&&(i.textContent=n)},m(l,s){z(l,i,s)},d(l){l&&c(i)}}}function Kt(e){let i,n="Stimmenanteile",l,s,d,a,o="Allgemeine Informationen",y,C,u,h,L='<label for="input_mandate_count">Abgeordnete</label>',ee,te,S,ge,B,G,Te='<label for="input_threshold">Sperrklausel</label>',ve,ae,v,g,Q,ne,re,oe,st='<label for="input_apportionment_method">Sitzzuteilungsverfahren</label>',Ue,be,I,W,dt="D'Hondt",R,ut="Sainte-Laguë",F,ft="Hare-Niemeyer",Ze,se,J,Ge,k,De,K,de,pt="Sonstige:",Qe,ye,Ce=(e[5]>=0?e[5].toFixed(2):0)+"",we,Je,Se,le,ct="Mandatsverteilung",Le,q,ue,X,Ke,O,Y,Xe,x,Ye,Ie,$e,je,ke,et,V,tt,He,at,Pe,Ae,H,nt,ht;J=new Mt({props:{data:e[0],options:{responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:wt},annotation:{annotations:e[3]>0?{majorityLine:{type:"line",yMin:e[3],yMax:e[3],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{y:{suggestedMax:Math.max(...e[0].labels.map(e[16]))+5}}}}});let fe=Ct(e[0].datasets[0].data),T=[];for(let t=0;t<fe.length;t+=1)T[t]=Tt(Et(e,fe,t));let D=e[5]<0&&Dt();return X=new Bt({props:{id:"mandatesChart",data:e[6],options:{responsive:!0,circumference:180,rotation:-90,plugins:{datalabels:{anchor:"end",align:"start",color:"white",formatter:ea,font:{weight:"bold",size:20}}}}}}),Y=new Mt({props:{data:e[1],options:{responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:e[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:e[7],xMax:e[7],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:e[8],xMax:e[8],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:St,font:{weight:"bold",size:20}},legend:{onClick:e[18]}}}}}),{c(){i=f("h1"),i.textContent=n,l=M(),s=f("section"),d=f("div"),a=f("p"),a.textContent=o,y=M(),C=f("table"),u=f("tr"),h=f("th"),h.innerHTML=L,ee=M(),te=f("td"),S=f("input"),ge=M(),B=f("tr"),G=f("th"),G.innerHTML=Te,ve=M(),ae=f("td"),v=f("span"),g=f("input"),Q=P(" %"),ne=M(),re=f("tr"),oe=f("th"),oe.innerHTML=st,Ue=M(),be=f("td"),I=f("select"),W=f("option"),W.textContent=dt,R=f("option"),R.textContent=ut,F=f("option"),F.textContent=ft,Ze=M(),se=f("div"),ze(J.$$.fragment),Ge=M(),k=f("div");for(let t=0;t<T.length;t+=1)T[t].c();De=M(),K=f("div"),de=f("p"),de.textContent=pt,Qe=M(),ye=f("p"),we=P(Ce),Je=M(),D&&D.c(),Se=M(),le=f("h1"),le.textContent=ct,Le=M(),q=f("section"),ue=f("div"),ze(X.$$.fragment),Ke=M(),O=f("div"),ze(Y.$$.fragment),Xe=M(),x=f("p"),Ye=P("Mehrheit: "),Ie=P(e[9]),$e=P("/"),je=P(e[7]),et=M(),V=f("p"),tt=P("Zweidrittelmehrheit: "),He=P(e[9]),at=P("/"),Pe=P(e[8]),this.h()},l(t){i=p(t,"H1",{"data-svelte-h":!0}),A(i)!=="svelte-too001"&&(i.textContent=n),l=E(t),s=p(t,"SECTION",{class:!0});var _=b(s);d=p(_,"DIV",{class:!0});var j=b(d);a=p(j,"P",{"data-svelte-h":!0}),A(a)!=="svelte-7wsg44"&&(a.textContent=o),y=E(j),C=p(j,"TABLE",{});var U=b(C);u=p(U,"TR",{});var $=b(u);h=p($,"TH",{"data-svelte-h":!0}),A(h)!=="svelte-1wy1b54"&&(h.innerHTML=L),ee=E($),te=p($,"TD",{});var w=b(te);S=p(w,"INPUT",{id:!0,type:!0,min:!0,max:!0}),w.forEach(c),$.forEach(c),ge=E(U),B=p(U,"TR",{});var ie=b(B);G=p(ie,"TH",{"data-svelte-h":!0}),A(G)!=="svelte-e3yl1g"&&(G.innerHTML=Te),ve=E(ie),ae=p(ie,"TD",{});var mt=b(ae);v=p(mt,"SPAN",{class:!0});var rt=b(v);g=p(rt,"INPUT",{id:!0,type:!0,min:!0,max:!0}),Q=N(rt," %"),rt.forEach(c),mt.forEach(c),ie.forEach(c),ne=E(U),re=p(U,"TR",{});var Ne=b(re);oe=p(Ne,"TH",{"data-svelte-h":!0}),A(oe)!=="svelte-r745e5"&&(oe.innerHTML=st),Ue=E(Ne),be=p(Ne,"TD",{});var _t=b(be);I=p(_t,"SELECT",{class:!0,id:!0});var Oe=b(I);W=p(Oe,"OPTION",{"data-svelte-h":!0}),A(W)!=="svelte-wlpdpc"&&(W.textContent=dt),R=p(Oe,"OPTION",{"data-svelte-h":!0}),A(R)!=="svelte-j8z6l1"&&(R.textContent=ut),F=p(Oe,"OPTION",{"data-svelte-h":!0}),A(F)!=="svelte-8h9q9v"&&(F.textContent=ft),Oe.forEach(c),_t.forEach(c),Ne.forEach(c),U.forEach(c),j.forEach(c),Ze=E(_),se=p(_,"DIV",{class:!0});var gt=b(se);Be(J.$$.fragment,gt),gt.forEach(c),Ge=E(_),k=p(_,"DIV",{class:!0});var pe=b(k);for(let lt=0;lt<T.length;lt+=1)T[lt].l(pe);De=E(pe),K=p(pe,"DIV",{class:!0});var xe=b(K);de=p(xe,"P",{"data-svelte-h":!0}),A(de)!=="svelte-1p0cp1c"&&(de.textContent=pt),Qe=E(xe),ye=p(xe,"P",{});var vt=b(ye);we=N(vt,Ce),vt.forEach(c),xe.forEach(c),Je=E(pe),D&&D.l(pe),pe.forEach(c),_.forEach(c),Se=E(t),le=p(t,"H1",{"data-svelte-h":!0}),A(le)!=="svelte-jg7skr"&&(le.textContent=ct),Le=E(t),q=p(t,"SECTION",{class:!0});var Ve=b(q);ue=p(Ve,"DIV",{class:!0});var bt=b(ue);Be(X.$$.fragment,bt),bt.forEach(c),Ke=E(Ve),O=p(Ve,"DIV",{class:!0});var ce=b(O);Be(Y.$$.fragment,ce),Xe=E(ce),x=p(ce,"P",{class:!0});var Me=b(x);Ye=N(Me,"Mehrheit: "),Ie=N(Me,e[9]),$e=N(Me,"/"),je=N(Me,e[7]),Me.forEach(c),et=E(ce),V=p(ce,"P",{class:!0});var Ee=b(V);tt=N(Ee,"Zweidrittelmehrheit: "),He=N(Ee,e[9]),at=N(Ee,"/"),Pe=N(Ee,e[8]),Ee.forEach(c),ce.forEach(c),Ve.forEach(c),this.h()},h(){m(S,"id","input_mandate_count"),m(S,"type","number"),m(S,"min","0"),m(S,"max","1000"),m(g,"id","input_threshold"),m(g,"type","number"),m(g,"min","0"),m(g,"max","100"),m(v,"class","valuePadding"),W.__value="D'Hondt",Z(W,W.__value),R.__value="Sainte-Laguë",Z(R,R.__value),F.__value="Hare-Niemeyer",Z(F,F.__value),m(I,"class","selectApportionmentMethod"),m(I,"id","input_apportionment_method"),e[4]===void 0&&kt(()=>e[15].call(I)),m(d,"class","info_container"),m(se,"class","bar_container"),m(K,"class","input_field_vote_party"),m(k,"class","input_fields_vote"),m(s,"class","vote_share_section"),m(ue,"class","pie_container"),m(x,"class",ke="majorityText "+(e[9]<e[7]?"red":"green")),m(V,"class",Ae="majorityText "+(e[9]<e[8]?"red":"green")),m(O,"class","stack_container"),m(q,"class","mandate_section")},m(t,_){z(t,i,_),z(t,l,_),z(t,s,_),r(s,d),r(d,a),r(d,y),r(d,C),r(C,u),r(u,h),r(u,ee),r(u,te),r(te,S),Z(S,e[2]),r(C,ge),r(C,B),r(B,G),r(B,ve),r(B,ae),r(ae,v),r(v,g),Z(g,e[3]),r(v,Q),r(C,ne),r(C,re),r(re,oe),r(re,Ue),r(re,be),r(be,I),r(I,W),r(I,R),r(I,F),yt(I,e[4],!0),r(s,Ze),r(s,se),We(J,se,null),r(s,Ge),r(s,k);for(let j=0;j<T.length;j+=1)T[j]&&T[j].m(k,null);r(k,De),r(k,K),r(K,de),r(K,Qe),r(K,ye),r(ye,we),r(k,Je),D&&D.m(k,null),z(t,Se,_),z(t,le,_),z(t,Le,_),z(t,q,_),r(q,ue),We(X,ue,null),r(q,Ke),r(q,O),We(Y,O,null),r(O,Xe),r(O,x),r(x,Ye),r(x,Ie),r(x,$e),r(x,je),r(O,et),r(O,V),r(V,tt),r(V,He),r(V,at),r(V,Pe),H=!0,nt||(ht=[he(S,"input",e[13]),he(S,"input",e[10]),he(g,"input",e[14]),he(g,"input",e[11]),he(I,"change",e[15])],nt=!0)},p(t,[_]){_&4&&_e(S.value)!==t[2]&&Z(S,t[2]),_&8&&_e(g.value)!==t[3]&&Z(g,t[3]),_&16&&yt(I,t[4]);const j={};if(_&1&&(j.data=t[0]),_&9&&(j.options={responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:wt},annotation:{annotations:t[3]>0?{majorityLine:{type:"line",yMin:t[3],yMax:t[3],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{y:{suggestedMax:Math.max(...t[0].labels.map(t[16]))+5}}}),J.$set(j),_&1){fe=Ct(t[0].datasets[0].data);let w;for(w=0;w<fe.length;w+=1){const ie=Et(t,fe,w);T[w]?T[w].p(ie,_):(T[w]=Tt(ie),T[w].c(),T[w].m(k,De))}for(;w<T.length;w+=1)T[w].d(1);T.length=fe.length}(!H||_&32)&&Ce!==(Ce=(t[5]>=0?t[5].toFixed(2):0)+"")&&me(we,Ce),t[5]<0?D||(D=Dt(),D.c(),D.m(k,null)):D&&(D.d(1),D=null);const U={};_&64&&(U.data=t[6]),X.$set(U);const $={};_&2&&($.data=t[1]),_&390&&($.options={responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:t[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:t[7],xMax:t[7],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:t[8],xMax:t[8],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:St,font:{weight:"bold",size:20}},legend:{onClick:t[18]}}}),Y.$set($),(!H||_&512)&&me(Ie,t[9]),(!H||_&128)&&me(je,t[7]),(!H||_&640&&ke!==(ke="majorityText "+(t[9]<t[7]?"red":"green")))&&m(x,"class",ke),(!H||_&512)&&me(He,t[9]),(!H||_&256)&&me(Pe,t[8]),(!H||_&768&&Ae!==(Ae="majorityText "+(t[9]<t[8]?"red":"green")))&&m(V,"class",Ae)},i(t){H||(Re(J.$$.fragment,t),Re(X.$$.fragment,t),Re(Y.$$.fragment,t),H=!0)},o(t){Fe(J.$$.fragment,t),Fe(X.$$.fragment,t),Fe(Y.$$.fragment,t),H=!1},d(t){t&&(c(i),c(l),c(s),c(Se),c(le),c(Le),c(q)),qe(J),At(T,t),D&&D.d(),qe(X),qe(Y),nt=!1,Ht(ht)}}}function Xt(e,i,n){let l=[],s=[],d=[...e];for(let a in e)s.push(1),l.push(0),e[a]<n&&(e[a]=0,d[a]=0);for(let a=0;a<i;a++){let o=d.indexOf(Math.max(...d));s[o]=s[o]+1,l[o]=l[o]+1,d[o]=e[o]/s[o]}return l}function Yt(e,i,n){let l=[],s=new Array(e.length).fill(.5),d=[...e];for(let a in e)s.push(1),l.push(0),e[a]<n&&(e[a]=0,d[a]=0);for(let a=0;a<i;a++){let o=d.indexOf(Math.max(...d));s[o]=s[o]+1,l[o]=l[o]+1,d[o]=e[o]/s[o]}return l}function $t(e,i,n){let l=[];const a=e.filter(u=>u>=n).reduce((u,h)=>u+h,0)/i;l=e.map(u=>{if(u<n)return 0;const h=Math.floor(u/a),L=u%a;return{initialMandates:h,remainder:L}});let o=l.reduce((u,h)=>u+(h.initialMandates||0),0);const y=i-o,C=l.map((u,h)=>({index:h,remainder:u.remainder||0})).sort((u,h)=>h.remainder-u.remainder);for(let u=0;u<y;u++)l[C[u].index].initialMandates+=1;return l.map(u=>u.initialMandates||0)}const wt=(e,i)=>{const{chart:n,dataIndex:l,datasetIndex:s}=i,d=n.data.datasets.length-1;return s!==d?"":n.data.datasets.reduce((o,y)=>{const C=y.data[l];return typeof C=="number"?o+C:o},0).toLocaleString("de-AT",{minimumFractionDigits:2,maximumFractionDigits:2})},ea=function(e){return e>0?e:""},St=function(e){return e>0?e:""};function ta(e,i,n){Wt.register(Rt,Ft,qt,Ut,Zt,Gt,Qt,Jt);let l=it("data"),s=it("mandateData"),d=it("majorityData"),a=10,o=4,y="D'Hondt",C=0,u=0,h=[],L,ee=0;function te(v){let g=v.target.value;Number(g)>1e3&&n(2,a=1e3)}function S(v){let g=v.target.value;Number(g)>100&&n(3,o=100)}function ge(){a=_e(this.value),n(2,a)}function B(){o=_e(this.value),n(3,o)}function G(){y=Nt(this),n(4,y)}const Te=(v,g)=>l.datasets.reduce((Q,ne)=>Q+(ne.data[g]||0),0);function ve(v){l.datasets[0].data[v]=_e(this.value),n(0,l),n(5,L),n(4,y),n(2,a),n(3,o)}const ae=function(v,g){if(g.datasetIndex!==void 0){const Q=g.datasetIndex,ne=d.datasets[Q].hidden;n(1,d.datasets[Q].hidden=!ne,d)}};return e.$$.update=()=>{if(e.$$.dirty&4&&n(7,C=Math.floor(a/2+1)),e.$$.dirty&4&&n(8,u=Math.ceil(a/3*2)),e.$$.dirty&61&&(n(5,L=100-l.datasets[0].data.reduce((v,g)=>v+g,0)),L>=0&&(n(0,l),n(5,L),n(4,y),n(2,a),n(3,o),y=="D'Hondt"?n(12,h=Xt([...l.datasets[0].data],a,o)):y=="Sainte-Laguë"?n(12,h=Yt([...l.datasets[0].data],a,o)):y=="Hare-Niemeyer"&&n(12,h=$t([...l.datasets[0].data],a,o)))),e.$$.dirty&4096){n(6,s.datasets[0].data=h,s);for(let v in h)n(1,d.datasets[v].data=[h[v]],d)}e.$$.dirty&514&&(n(9,ee=0),d.datasets.forEach((v,g)=>{v.hidden||n(9,ee+=v.data[0])}))},[l,d,a,o,y,L,s,C,u,ee,te,S,h,ge,B,G,Te,ve,ae]}class aa extends It{constructor(i){super(),jt(this,i,ta,Kt,Lt,{})}}function na(e){let i,n,l,s,d;return s=new aa({}),{c(){i=f("meta"),n=f("meta"),l=M(),ze(s.$$.fragment),this.h()},l(a){const o=Ot("svelte-lfh6c0",document.head);i=p(o,"META",{property:!0,content:!0}),n=p(o,"META",{name:!0,content:!0}),o.forEach(c),l=E(a),Be(s.$$.fragment,a),this.h()},h(){document.title="Mandatsrechner - Spielwiese",m(i,"property","og:title"),m(i,"content","Mandatsrechner - Spielwiese"),m(n,"name","twitter:title"),m(n,"content","Mandatsrechner - Spielwiese")},m(a,o){r(document.head,i),r(document.head,n),z(a,l,o),We(s,a,o),d=!0},p:Pt,i(a){d||(Re(s.$$.fragment,a),d=!0)},o(a){Fe(s.$$.fragment,a),d=!1},d(a){a&&c(l),c(i),c(n),qe(s,a)}}}function ra(e){return ot("data",xt),ot("mandateData",Vt),ot("majorityData",zt),[]}class ua extends It{constructor(i){super(),jt(this,i,ra,na,Lt,{})}}export{ua as component};
