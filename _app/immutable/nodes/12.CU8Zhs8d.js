import{s as Se,b as ke,r as He,g as se,n as Pe,d as ie}from"../chunks/eX-Ury47.js";import{S as Ie,i as je,e as f,s as y,t as N,o as xt,c,l as x,f as C,a as g,d as p,b as O,p as Ot,m as _,q as Q,g as W,h as n,r as ye,u as Vt,v as zt,B as pt,j as ht,w as Bt,x as Wt,y as Rt,n as Ae,z as Ne,k as xe}from"../chunks/CvUCCQBL.js";import{data as Oe,mandateData as Ve,majorityData as ze}from"../chunks/DWf01OZ1.js";import{e as Ce}from"../chunks/D6YF6ztN.js";import{B as Me,D as Be,C as We,p as Re,a as Fe,b as qe,c as Ue,d as Ze,L as Ge,e as Qe,f as Je}from"../chunks/B78RUGKS.js";function Ee(t,i,a){const r=t.slice();return r[17]=i[a],r[18]=i,r[19]=a,r}function Te(t){let i,a,r=t[0].labels[t[19]]+"",l,d,s,u,v;function b(){t[15].call(s,t[19])}return{c(){i=f("div"),a=f("label"),l=N(r),d=y(),s=f("input"),this.h()},l(o){i=c(o,"DIV",{class:!0});var h=g(i);a=c(h,"LABEL",{for:!0});var L=g(a);l=O(L,r),L.forEach(p),d=C(h),s=c(h,"INPUT",{id:!0,type:!0,min:!0,max:!0}),h.forEach(p),this.h()},h(){_(a,"for","input_party_"+t[19]),_(s,"id","input_party_"+t[19]),_(s,"type","number"),_(s,"min","0"),_(s,"max","100"),_(i,"class","input_field_vote_party")},m(o,h){W(o,i,h),n(i,a),n(a,l),n(i,d),n(i,s),Q(s,t[0].datasets[0].data[t[19]]),u||(v=zt(s,"input",b),u=!0)},p(o,h){t=o,h&1&&r!==(r=t[0].labels[t[19]]+"")&&ht(l,r),h&1&&pt(s.value)!==t[0].datasets[0].data[t[19]]&&Q(s,t[0].datasets[0].data[t[19]])},d(o){o&&p(i),u=!1,v()}}}function De(t){let i,a="Achtung: Gesamtstimmen dürfen 100% nicht überschreiten!";return{c(){i=f("p"),i.textContent=a},l(r){i=c(r,"P",{"data-svelte-h":!0}),x(i)!=="svelte-154vc08"&&(i.textContent=a)},m(r,l){W(r,i,l)},d(r){r&&p(i)}}}function Ke(t){let i,a="Stimmenanteile",r,l,d,s,u="Allgemeine Informationen",v,b,o,h,L='<label for="input_mandate_count">Abgeordnete</label>',et,at,S,mt,R,J,Ct='<label for="input_threshold">Sperrklausel</label>',E,I,k,T,Ft,qt,nt,st,oe='<label for="input_apportionment_method">Sitzzuteilungsverfahren</label>',Ut,_t,H,F,de="D'Hondt",q,ue="Sainte-Laguë",U,fe="Hare-Niemeyer",Zt,it,K,Gt,P,Mt,X,ot,ce="Sonstige:",Qt,gt,vt=(t[5]>=0?t[5].toFixed(2):0)+"",Et,Jt,Tt,rt,he="Mandatsverteilung",Dt,Z,dt,Y,Kt,V,$,Xt,z,Yt,wt,$t,Lt,St,te,B,ee,It,ae,jt,kt,A,ne,pe;K=new Me({props:{data:t[0],options:{responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:we},annotation:{annotations:t[3]>0?{majorityLine:{type:"line",yMin:t[3],yMax:t[3],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{y:{suggestedMax:Math.max(...t[0].labels.map(t[14]))+5}}}}});let ut=Ce(t[0].datasets[0].data),M=[];for(let e=0;e<ut.length;e+=1)M[e]=Te(Ee(t,ut,e));let D=t[5]<0&&De();return Y=new Be({props:{id:"mandatesChart",data:t[6],options:{responsive:!0,circumference:180,rotation:-90,plugins:{datalabels:{anchor:"end",align:"start",color:"white",formatter:ta,font:{weight:"bold",size:20}}}}}}),$=new Me({props:{data:t[1],options:{responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:t[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:t[7],xMax:t[7],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:t[8],xMax:t[8],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:Le,font:{weight:"bold",size:20}},legend:{onClick:t[16]}}}}}),{c(){i=f("h1"),i.textContent=a,r=y(),l=f("section"),d=f("div"),s=f("p"),s.textContent=u,v=y(),b=f("table"),o=f("tr"),h=f("th"),h.innerHTML=L,et=y(),at=f("td"),S=f("input"),mt=y(),R=f("tr"),J=f("th"),J.innerHTML=Ct,E=y(),I=f("td"),k=f("span"),T=f("input"),Ft=N(" %"),qt=y(),nt=f("tr"),st=f("th"),st.innerHTML=oe,Ut=y(),_t=f("td"),H=f("select"),F=f("option"),F.textContent=de,q=f("option"),q.textContent=ue,U=f("option"),U.textContent=fe,Zt=y(),it=f("div"),xt(K.$$.fragment),Gt=y(),P=f("div");for(let e=0;e<M.length;e+=1)M[e].c();Mt=y(),X=f("div"),ot=f("p"),ot.textContent=ce,Qt=y(),gt=f("p"),Et=N(vt),Jt=y(),D&&D.c(),Tt=y(),rt=f("h1"),rt.textContent=he,Dt=y(),Z=f("section"),dt=f("div"),xt(Y.$$.fragment),Kt=y(),V=f("div"),xt($.$$.fragment),Xt=y(),z=f("p"),Yt=N("Mehrheit: "),wt=N(t[9]),$t=N("/"),Lt=N(t[7]),te=y(),B=f("p"),ee=N("Zweidrittelmehrheit: "),It=N(t[9]),ae=N("/"),jt=N(t[8]),this.h()},l(e){i=c(e,"H1",{"data-svelte-h":!0}),x(i)!=="svelte-too001"&&(i.textContent=a),r=C(e),l=c(e,"SECTION",{class:!0});var m=g(l);d=c(m,"DIV",{class:!0});var j=g(d);s=c(j,"P",{"data-svelte-h":!0}),x(s)!=="svelte-7wsg44"&&(s.textContent=u),v=C(j),b=c(j,"TABLE",{});var G=g(b);o=c(G,"TR",{});var tt=g(o);h=c(tt,"TH",{"data-svelte-h":!0}),x(h)!=="svelte-1wy1b54"&&(h.innerHTML=L),et=C(tt),at=c(tt,"TD",{});var w=g(at);S=c(w,"INPUT",{id:!0,type:!0,min:!0,max:!0}),w.forEach(p),tt.forEach(p),mt=C(G),R=c(G,"TR",{});var lt=g(R);J=c(lt,"TH",{"data-svelte-h":!0}),x(J)!=="svelte-e3yl1g"&&(J.innerHTML=Ct),E=C(lt),I=c(lt,"TD",{});var me=g(I);k=c(me,"SPAN",{class:!0});var re=g(k);T=c(re,"INPUT",{id:!0,type:!0,min:!0,max:!0}),Ft=O(re," %"),re.forEach(p),me.forEach(p),lt.forEach(p),qt=C(G),nt=c(G,"TR",{});var Ht=g(nt);st=c(Ht,"TH",{"data-svelte-h":!0}),x(st)!=="svelte-r745e5"&&(st.innerHTML=oe),Ut=C(Ht),_t=c(Ht,"TD",{});var _e=g(_t);H=c(_e,"SELECT",{class:!0});var Pt=g(H);F=c(Pt,"OPTION",{"data-svelte-h":!0}),x(F)!=="svelte-wlpdpc"&&(F.textContent=de),q=c(Pt,"OPTION",{"data-svelte-h":!0}),x(q)!=="svelte-j8z6l1"&&(q.textContent=ue),U=c(Pt,"OPTION",{"data-svelte-h":!0}),x(U)!=="svelte-8h9q9v"&&(U.textContent=fe),Pt.forEach(p),_e.forEach(p),Ht.forEach(p),G.forEach(p),j.forEach(p),Zt=C(m),it=c(m,"DIV",{class:!0});var ge=g(it);Ot(K.$$.fragment,ge),ge.forEach(p),Gt=C(m),P=c(m,"DIV",{class:!0});var ft=g(P);for(let le=0;le<M.length;le+=1)M[le].l(ft);Mt=C(ft),X=c(ft,"DIV",{class:!0});var At=g(X);ot=c(At,"P",{"data-svelte-h":!0}),x(ot)!=="svelte-1p0cp1c"&&(ot.textContent=ce),Qt=C(At),gt=c(At,"P",{});var ve=g(gt);Et=O(ve,vt),ve.forEach(p),At.forEach(p),Jt=C(ft),D&&D.l(ft),ft.forEach(p),m.forEach(p),Tt=C(e),rt=c(e,"H1",{"data-svelte-h":!0}),x(rt)!=="svelte-jg7skr"&&(rt.textContent=he),Dt=C(e),Z=c(e,"SECTION",{class:!0});var Nt=g(Z);dt=c(Nt,"DIV",{class:!0});var be=g(dt);Ot(Y.$$.fragment,be),be.forEach(p),Kt=C(Nt),V=c(Nt,"DIV",{class:!0});var ct=g(V);Ot($.$$.fragment,ct),Xt=C(ct),z=c(ct,"P",{class:!0});var bt=g(z);Yt=O(bt,"Mehrheit: "),wt=O(bt,t[9]),$t=O(bt,"/"),Lt=O(bt,t[7]),bt.forEach(p),te=C(ct),B=c(ct,"P",{class:!0});var yt=g(B);ee=O(yt,"Zweidrittelmehrheit: "),It=O(yt,t[9]),ae=O(yt,"/"),jt=O(yt,t[8]),yt.forEach(p),ct.forEach(p),Nt.forEach(p),this.h()},h(){_(S,"id","input_mandate_count"),_(S,"type","number"),_(S,"min","0"),_(S,"max","1000"),_(T,"id","input_threshold"),_(T,"type","number"),_(T,"min","0"),_(T,"max","100"),_(k,"class","valuePadding"),F.__value="D'Hondt",Q(F,F.__value),q.__value="Sainte-Laguë",Q(q,q.__value),U.__value="Hare-Niemeyer",Q(U,U.__value),_(H,"class","selectApportionmentMethod"),t[4]===void 0&&ke(()=>t[13].call(H)),_(d,"class","info_container"),_(it,"class","bar_container"),_(X,"class","input_field_vote_party"),_(P,"class","input_fields_vote"),_(l,"class","vote_share_section"),_(dt,"class","pie_container"),_(z,"class",St="majorityText "+(t[9]<t[7]?"red":"green")),_(B,"class",kt="majorityText "+(t[9]<t[8]?"red":"green")),_(V,"class","stack_container"),_(Z,"class","mandate_section")},m(e,m){W(e,i,m),W(e,r,m),W(e,l,m),n(l,d),n(d,s),n(d,v),n(d,b),n(b,o),n(o,h),n(o,et),n(o,at),n(at,S),Q(S,t[2]),n(b,mt),n(b,R),n(R,J),n(R,E),n(R,I),n(I,k),n(k,T),Q(T,t[3]),n(k,Ft),n(b,qt),n(b,nt),n(nt,st),n(nt,Ut),n(nt,_t),n(_t,H),n(H,F),n(H,q),n(H,U),ye(H,t[4],!0),n(l,Zt),n(l,it),Vt(K,it,null),n(l,Gt),n(l,P);for(let j=0;j<M.length;j+=1)M[j]&&M[j].m(P,null);n(P,Mt),n(P,X),n(X,ot),n(X,Qt),n(X,gt),n(gt,Et),n(P,Jt),D&&D.m(P,null),W(e,Tt,m),W(e,rt,m),W(e,Dt,m),W(e,Z,m),n(Z,dt),Vt(Y,dt,null),n(Z,Kt),n(Z,V),Vt($,V,null),n(V,Xt),n(V,z),n(z,Yt),n(z,wt),n(z,$t),n(z,Lt),n(V,te),n(V,B),n(B,ee),n(B,It),n(B,ae),n(B,jt),A=!0,ne||(pe=[zt(S,"input",t[11]),zt(T,"input",t[12]),zt(H,"change",t[13])],ne=!0)},p(e,[m]){m&4&&pt(S.value)!==e[2]&&Q(S,e[2]),m&8&&pt(T.value)!==e[3]&&Q(T,e[3]),m&16&&ye(H,e[4]);const j={};if(m&1&&(j.data=e[0]),m&9&&(j.options={responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:we},annotation:{annotations:e[3]>0?{majorityLine:{type:"line",yMin:e[3],yMax:e[3],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{y:{suggestedMax:Math.max(...e[0].labels.map(e[14]))+5}}}),K.$set(j),m&1){ut=Ce(e[0].datasets[0].data);let w;for(w=0;w<ut.length;w+=1){const lt=Ee(e,ut,w);M[w]?M[w].p(lt,m):(M[w]=Te(lt),M[w].c(),M[w].m(P,Mt))}for(;w<M.length;w+=1)M[w].d(1);M.length=ut.length}(!A||m&32)&&vt!==(vt=(e[5]>=0?e[5].toFixed(2):0)+"")&&ht(Et,vt),e[5]<0?D||(D=De(),D.c(),D.m(P,null)):D&&(D.d(1),D=null);const G={};m&64&&(G.data=e[6]),Y.$set(G);const tt={};m&2&&(tt.data=e[1]),m&390&&(tt.options={responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:e[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:e[7],xMax:e[7],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:e[8],xMax:e[8],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:Le,font:{weight:"bold",size:20}},legend:{onClick:e[16]}}}),$.$set(tt),(!A||m&512)&&ht(wt,e[9]),(!A||m&128)&&ht(Lt,e[7]),(!A||m&640&&St!==(St="majorityText "+(e[9]<e[7]?"red":"green")))&&_(z,"class",St),(!A||m&512)&&ht(It,e[9]),(!A||m&256)&&ht(jt,e[8]),(!A||m&768&&kt!==(kt="majorityText "+(e[9]<e[8]?"red":"green")))&&_(B,"class",kt)},i(e){A||(Bt(K.$$.fragment,e),Bt(Y.$$.fragment,e),Bt($.$$.fragment,e),A=!0)},o(e){Wt(K.$$.fragment,e),Wt(Y.$$.fragment,e),Wt($.$$.fragment,e),A=!1},d(e){e&&(p(i),p(r),p(l),p(Tt),p(rt),p(Dt),p(Z)),Rt(K),Ae(M,e),D&&D.d(),Rt(Y),Rt($),ne=!1,He(pe)}}}function Xe(t,i,a){let r=[],l=[],d=[...t];for(let s in t)l.push(1),r.push(0),t[s]<a&&(t[s]=0,d[s]=0);for(let s=0;s<i;s++){let u=d.indexOf(Math.max(...d));l[u]=l[u]+1,r[u]=r[u]+1,d[u]=t[u]/l[u]}return r}function Ye(t,i,a){let r=[],l=new Array(t.length).fill(.5),d=[...t];for(let s in t)l.push(1),r.push(0),t[s]<a&&(t[s]=0,d[s]=0);for(let s=0;s<i;s++){let u=d.indexOf(Math.max(...d));l[u]=l[u]+1,r[u]=r[u]+1,d[u]=t[u]/l[u]}return r}function $e(t,i,a){let r=[];const s=t.filter(o=>o>=a).reduce((o,h)=>o+h,0)/i;r=t.map(o=>{if(o<a)return 0;const h=Math.floor(o/s),L=o%s;return{initialMandates:h,remainder:L}});let u=r.reduce((o,h)=>o+(h.initialMandates||0),0);const v=i-u,b=r.map((o,h)=>({index:h,remainder:o.remainder||0})).sort((o,h)=>h.remainder-o.remainder);for(let o=0;o<v;o++)r[b[o].index].initialMandates+=1;return r.map(o=>o.initialMandates||0)}const we=(t,i)=>{const{chart:a,dataIndex:r,datasetIndex:l}=i,d=a.data.datasets.length-1;return l!==d?"":a.data.datasets.reduce((u,v)=>{const b=v.data[r];return typeof b=="number"?u+b:u},0).toLocaleString("de-AT",{minimumFractionDigits:2,maximumFractionDigits:2})},ta=function(t){return t>0?t:""},Le=function(t){return t>0?t:""};function ea(t,i,a){We.register(Re,Fe,qe,Ue,Ze,Ge,Qe,Je);let r=se("data"),l=se("mandateData"),d=se("majorityData"),s=10,u=4,v="D'Hondt",b=0,o=0,h=[],L,et=0;function at(){s=pt(this.value),a(2,s)}function S(){u=pt(this.value),a(3,u)}function mt(){v=Ne(this),a(4,v)}const R=(E,I)=>r.datasets.reduce((k,T)=>k+(T.data[I]||0),0);function J(E){r.datasets[0].data[E]=pt(this.value),a(0,r),a(5,L),a(4,v),a(2,s),a(3,u)}const Ct=function(E,I){if(I.datasetIndex!==void 0){const k=I.datasetIndex,T=d.datasets[k].hidden;a(1,d.datasets[k].hidden=!T,d)}};return t.$$.update=()=>{if(t.$$.dirty&4&&a(7,b=Math.floor(s/2+1)),t.$$.dirty&4&&a(8,o=Math.ceil(s/3*2)),t.$$.dirty&61&&(a(5,L=100-r.datasets[0].data.reduce((E,I)=>E+I,0)),L>=0&&(a(0,r),a(5,L),a(4,v),a(2,s),a(3,u),v=="D'Hondt"?a(10,h=Xe([...r.datasets[0].data],s,u)):v=="Sainte-Laguë"?a(10,h=Ye([...r.datasets[0].data],s,u)):v=="Hare-Niemeyer"&&a(10,h=$e([...r.datasets[0].data],s,u)))),t.$$.dirty&1024){a(6,l.datasets[0].data=h,l);for(let E in h)a(1,d.datasets[E].data=[h[E]],d)}t.$$.dirty&514&&(a(9,et=0),d.datasets.forEach((E,I)=>{E.hidden||a(9,et+=E.data[0])}))},[r,d,s,u,v,L,l,b,o,et,h,at,S,mt,R,J,Ct]}class aa extends Ie{constructor(i){super(),je(this,i,ea,Ke,Se,{})}}function na(t){let i,a,r;return a=new aa({}),{c(){i=y(),xt(a.$$.fragment),this.h()},l(l){xe("svelte-5at16t",document.head).forEach(p),i=C(l),Ot(a.$$.fragment,l),this.h()},h(){document.title="Mandatsrechner - Spielwiese"},m(l,d){W(l,i,d),Vt(a,l,d),r=!0},p:Pe,i(l){r||(Bt(a.$$.fragment,l),r=!0)},o(l){Wt(a.$$.fragment,l),r=!1},d(l){l&&p(i),Rt(a,l)}}}function ra(t){return ie("data",Oe),ie("mandateData",Ve),ie("majorityData",ze),[]}class ua extends Ie{constructor(i){super(),je(this,i,ra,na,Se,{})}}export{ua as component};
