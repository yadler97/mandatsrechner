import{s as Ht,b as wt,r as Lt,g as st,n as Pt,d as ot}from"../chunks/hsm1TwBJ.js";import{S as It,i as St,e as i,s as b,t as j,l as xe,c as d,k as A,f as v,a as g,d as _,b as N,m as Oe,n as m,v as U,g as Z,h as n,y as Ct,o as Be,w as Ve,x as _e,j as he,p as ze,q as Fe,r as Ge,u as jt,z as At}from"../chunks/C_t1LkpG.js";import{B as yt,e as Et,P as Nt,C as xt,p as Ot,a as Bt,b as Vt,c as zt,d as Ft,L as Gt,f as Wt,g as qt}from"../chunks/eUnNzeV8.js";const Jt={labels:["A","B","C","D","E","F","G","H","I","J"],datasets:[{label:"Stimmenanteil in %",data:[40,30,10,10,5,5,0,0,0,0],backgroundColor:["#ff0000","#ff8700","#ffd300","#deff0a","#a1ff0a","#0aff99","#0aefff","#147df5","#580aff","#be0aff"]}]},Rt={labels:["A","B","C","D","E","F","G","H","I","J"],datasets:[{label:"Mandate",data:[40,30,10,10,5,5,0,0,0,0],backgroundColor:["#ff0000","#ff8700","#ffd300","#deff0a","#a1ff0a","#0aff99","#0aefff","#147df5","#580aff","#be0aff"]}]},Ut={labels:["Mandate"],datasets:[{label:"A",data:[0],backgroundColor:"#ff0000"},{label:"B",data:[0],backgroundColor:"#ff8700"},{label:"C",data:[0],backgroundColor:"#ffd300"},{label:"D",data:[0],backgroundColor:"#deff0a"},{label:"E",data:[0],backgroundColor:"#a1ff0a"},{label:"F",data:[0],backgroundColor:"#0aff99"},{label:"G",data:[0],backgroundColor:"#0aefff"},{label:"H",data:[0],backgroundColor:"#147df5"},{label:"I",data:[0],backgroundColor:"#580aff"},{label:"J",data:[0],backgroundColor:"#be0aff"}]};function Mt(e,r,l){const a=e.slice();return a[16]=r[l],a[17]=r,a[18]=l,a}function Tt(e){let r,l,a=e[0].labels[e[18]]+"",f,p,s,c,C;function E(){e[14].call(s,e[18])}return{c(){r=i("div"),l=i("label"),f=j(a),p=b(),s=i("input"),this.h()},l(o){r=d(o,"DIV",{class:!0});var u=g(r);l=d(u,"LABEL",{for:!0});var k=g(l);f=N(k,a),k.forEach(_),p=v(u),s=d(u,"INPUT",{id:!0,type:!0,min:!0,max:!0}),u.forEach(_),this.h()},h(){m(l,"for","input_party_"+e[18]),m(s,"id","input_party_"+e[18]),m(s,"type","number"),m(s,"min","0"),m(s,"max","100"),m(r,"class","input_field_vote_party")},m(o,u){Z(o,r,u),n(r,l),n(l,f),n(r,p),n(r,s),U(s,e[0].datasets[0].data[e[18]]),c||(C=Ve(s,"input",E),c=!0)},p(o,u){e=o,u&1&&a!==(a=e[0].labels[e[18]]+"")&&he(f,a),u&1&&_e(s.value)!==e[0].datasets[0].data[e[18]]&&U(s,e[0].datasets[0].data[e[18]])},d(o){o&&_(r),c=!1,C()}}}function kt(e){let r,l="Achtung: Gesamtstimmen dürfen 100% nicht überschreiten!";return{c(){r=i("p"),r.textContent=l},l(a){r=d(a,"P",{"data-svelte-h":!0}),A(r)!=="svelte-154vc08"&&(r.textContent=l)},m(a,f){Z(a,r,f)},d(a){a&&_(r)}}}function Zt(e){let r,l="Stimmenanteile",a,f,p,s,c="Allgemeine Informationen",C,E,o,u,k='<label for="input_mandate_count">Abgeordnete</label>',ae,ne,D,me,V,Q,H='<label for="input_threshold">Sperrklausel</label>',z,K,F,L,We,qe,le,oe,it='<label for="input_apportionment_method">Sitzzuteilungsverfahren</label>',Je,ge,I,G,dt="D'Hondt",W,ft="Sainte-Laguë",q,ut="Hare-Niemeyer",Re,ie,X,Ue,S,Ee,Y,de,ct="Sonstige:",Ze,be,ve=(e[5]>=0?e[5].toFixed(2):0)+"",Me,Qe,Te,re,pt="Mandatsverteilung",ke,J,fe,$,Ke,x,ee,Xe,O,Ye,De,$e,He,Ie,et,B,tt,Se,at,we,Le,P,nt,ht;X=new yt({props:{data:e[0],options:{responsive:!0,plugins:{datalabels:{display:!1}}}}});let ue=Et(e[0].datasets[0].data),y=[];for(let t=0;t<ue.length;t+=1)y[t]=Tt(Mt(e,ue,t));let M=e[5]<0&&kt();return $=new Nt({props:{id:"mandatesChart",data:e[6],options:{responsive:!0,circumference:180,rotation:-90,plugins:{datalabels:{anchor:"end",align:"start",color:"white",formatter:Yt,font:{weight:"bold",size:20}}}}}}),ee=new yt({props:{data:e[1],options:{responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:e[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:e[7],xMax:e[7],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:e[8],xMax:e[8],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:Dt,font:{weight:"bold",size:20}},legend:{onClick:e[15]}}}}}),{c(){r=i("h1"),r.textContent=l,a=b(),f=i("section"),p=i("div"),s=i("p"),s.textContent=c,C=b(),E=i("table"),o=i("tr"),u=i("th"),u.innerHTML=k,ae=b(),ne=i("td"),D=i("input"),me=b(),V=i("tr"),Q=i("th"),Q.innerHTML=H,z=b(),K=i("td"),F=i("span"),L=i("input"),We=j(" %"),qe=b(),le=i("tr"),oe=i("th"),oe.innerHTML=it,Je=b(),ge=i("td"),I=i("select"),G=i("option"),G.textContent=dt,W=i("option"),W.textContent=ft,q=i("option"),q.textContent=ut,Re=b(),ie=i("div"),xe(X.$$.fragment),Ue=b(),S=i("div");for(let t=0;t<y.length;t+=1)y[t].c();Ee=b(),Y=i("div"),de=i("p"),de.textContent=ct,Ze=b(),be=i("p"),Me=j(ve),Qe=b(),M&&M.c(),Te=b(),re=i("h1"),re.textContent=pt,ke=b(),J=i("section"),fe=i("div"),xe($.$$.fragment),Ke=b(),x=i("div"),xe(ee.$$.fragment),Xe=b(),O=i("p"),Ye=j("Mehrheit: "),De=j(e[9]),$e=j("/"),He=j(e[7]),et=b(),B=i("p"),tt=j("Zweidrittelmehrheit: "),Se=j(e[9]),at=j("/"),we=j(e[8]),this.h()},l(t){r=d(t,"H1",{"data-svelte-h":!0}),A(r)!=="svelte-too001"&&(r.textContent=l),a=v(t),f=d(t,"SECTION",{class:!0});var h=g(f);p=d(h,"DIV",{class:!0});var w=g(p);s=d(w,"P",{"data-svelte-h":!0}),A(s)!=="svelte-7wsg44"&&(s.textContent=c),C=v(w),E=d(w,"TABLE",{});var R=g(E);o=d(R,"TR",{});var te=g(o);u=d(te,"TH",{"data-svelte-h":!0}),A(u)!=="svelte-1wy1b54"&&(u.innerHTML=k),ae=v(te),ne=d(te,"TD",{});var T=g(ne);D=d(T,"INPUT",{id:!0,type:!0,min:!0,max:!0}),T.forEach(_),te.forEach(_),me=v(R),V=d(R,"TR",{});var se=g(V);Q=d(se,"TH",{"data-svelte-h":!0}),A(Q)!=="svelte-e3yl1g"&&(Q.innerHTML=H),z=v(se),K=d(se,"TD",{});var _t=g(K);F=d(_t,"SPAN",{class:!0});var lt=g(F);L=d(lt,"INPUT",{id:!0,type:!0,min:!0,max:!0}),We=N(lt," %"),lt.forEach(_),_t.forEach(_),se.forEach(_),qe=v(R),le=d(R,"TR",{});var Pe=g(le);oe=d(Pe,"TH",{"data-svelte-h":!0}),A(oe)!=="svelte-r745e5"&&(oe.innerHTML=it),Je=v(Pe),ge=d(Pe,"TD",{});var mt=g(ge);I=d(mt,"SELECT",{class:!0});var je=g(I);G=d(je,"OPTION",{"data-svelte-h":!0}),A(G)!=="svelte-wlpdpc"&&(G.textContent=dt),W=d(je,"OPTION",{"data-svelte-h":!0}),A(W)!=="svelte-j8z6l1"&&(W.textContent=ft),q=d(je,"OPTION",{"data-svelte-h":!0}),A(q)!=="svelte-8h9q9v"&&(q.textContent=ut),je.forEach(_),mt.forEach(_),Pe.forEach(_),R.forEach(_),w.forEach(_),Re=v(h),ie=d(h,"DIV",{class:!0});var gt=g(ie);Oe(X.$$.fragment,gt),gt.forEach(_),Ue=v(h),S=d(h,"DIV",{class:!0});var ce=g(S);for(let rt=0;rt<y.length;rt+=1)y[rt].l(ce);Ee=v(ce),Y=d(ce,"DIV",{class:!0});var Ae=g(Y);de=d(Ae,"P",{"data-svelte-h":!0}),A(de)!=="svelte-1p0cp1c"&&(de.textContent=ct),Ze=v(Ae),be=d(Ae,"P",{});var bt=g(be);Me=N(bt,ve),bt.forEach(_),Ae.forEach(_),Qe=v(ce),M&&M.l(ce),ce.forEach(_),h.forEach(_),Te=v(t),re=d(t,"H1",{"data-svelte-h":!0}),A(re)!=="svelte-jg7skr"&&(re.textContent=pt),ke=v(t),J=d(t,"SECTION",{class:!0});var Ne=g(J);fe=d(Ne,"DIV",{class:!0});var vt=g(fe);Oe($.$$.fragment,vt),vt.forEach(_),Ke=v(Ne),x=d(Ne,"DIV",{class:!0});var pe=g(x);Oe(ee.$$.fragment,pe),Xe=v(pe),O=d(pe,"P",{class:!0});var Ce=g(O);Ye=N(Ce,"Mehrheit: "),De=N(Ce,e[9]),$e=N(Ce,"/"),He=N(Ce,e[7]),Ce.forEach(_),et=v(pe),B=d(pe,"P",{class:!0});var ye=g(B);tt=N(ye,"Zweidrittelmehrheit: "),Se=N(ye,e[9]),at=N(ye,"/"),we=N(ye,e[8]),ye.forEach(_),pe.forEach(_),Ne.forEach(_),this.h()},h(){m(D,"id","input_mandate_count"),m(D,"type","number"),m(D,"min","0"),m(D,"max","1000"),m(L,"id","input_threshold"),m(L,"type","number"),m(L,"min","0"),m(L,"max","100"),m(F,"class","valuePadding"),G.__value="D'Hondt",U(G,G.__value),W.__value="Sainte-Laguë",U(W,W.__value),q.__value="Hare-Niemeyer",U(q,q.__value),m(I,"class","selectApportionmentMethod"),e[4]===void 0&&wt(()=>e[13].call(I)),m(p,"class","info_container"),m(ie,"class","bar_container"),m(Y,"class","input_field_vote_party"),m(S,"class","input_fields_vote"),m(f,"class","vote_share_section"),m(fe,"class","pie_container"),m(O,"class",Ie="majorityText "+(e[9]<e[7]?"red":"green")),m(B,"class",Le="majorityText "+(e[9]<e[8]?"red":"green")),m(x,"class","stack_container"),m(J,"class","mandate_section")},m(t,h){Z(t,r,h),Z(t,a,h),Z(t,f,h),n(f,p),n(p,s),n(p,C),n(p,E),n(E,o),n(o,u),n(o,ae),n(o,ne),n(ne,D),U(D,e[2]),n(E,me),n(E,V),n(V,Q),n(V,z),n(V,K),n(K,F),n(F,L),U(L,e[3]),n(F,We),n(E,qe),n(E,le),n(le,oe),n(le,Je),n(le,ge),n(ge,I),n(I,G),n(I,W),n(I,q),Ct(I,e[4],!0),n(f,Re),n(f,ie),Be(X,ie,null),n(f,Ue),n(f,S);for(let w=0;w<y.length;w+=1)y[w]&&y[w].m(S,null);n(S,Ee),n(S,Y),n(Y,de),n(Y,Ze),n(Y,be),n(be,Me),n(S,Qe),M&&M.m(S,null),Z(t,Te,h),Z(t,re,h),Z(t,ke,h),Z(t,J,h),n(J,fe),Be($,fe,null),n(J,Ke),n(J,x),Be(ee,x,null),n(x,Xe),n(x,O),n(O,Ye),n(O,De),n(O,$e),n(O,He),n(x,et),n(x,B),n(B,tt),n(B,Se),n(B,at),n(B,we),P=!0,nt||(ht=[Ve(D,"input",e[11]),Ve(L,"input",e[12]),Ve(I,"change",e[13])],nt=!0)},p(t,[h]){h&4&&_e(D.value)!==t[2]&&U(D,t[2]),h&8&&_e(L.value)!==t[3]&&U(L,t[3]),h&16&&Ct(I,t[4]);const w={};if(h&1&&(w.data=t[0]),X.$set(w),h&1){ue=Et(t[0].datasets[0].data);let T;for(T=0;T<ue.length;T+=1){const se=Mt(t,ue,T);y[T]?y[T].p(se,h):(y[T]=Tt(se),y[T].c(),y[T].m(S,Ee))}for(;T<y.length;T+=1)y[T].d(1);y.length=ue.length}(!P||h&32)&&ve!==(ve=(t[5]>=0?t[5].toFixed(2):0)+"")&&he(Me,ve),t[5]<0?M||(M=kt(),M.c(),M.m(S,null)):M&&(M.d(1),M=null);const R={};h&64&&(R.data=t[6]),$.$set(R);const te={};h&2&&(te.data=t[1]),h&390&&(te.options={responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:t[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:t[7],xMax:t[7],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:t[8],xMax:t[8],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:Dt,font:{weight:"bold",size:20}},legend:{onClick:t[15]}}}),ee.$set(te),(!P||h&512)&&he(De,t[9]),(!P||h&128)&&he(He,t[7]),(!P||h&640&&Ie!==(Ie="majorityText "+(t[9]<t[7]?"red":"green")))&&m(O,"class",Ie),(!P||h&512)&&he(Se,t[9]),(!P||h&256)&&he(we,t[8]),(!P||h&768&&Le!==(Le="majorityText "+(t[9]<t[8]?"red":"green")))&&m(B,"class",Le)},i(t){P||(ze(X.$$.fragment,t),ze($.$$.fragment,t),ze(ee.$$.fragment,t),P=!0)},o(t){Fe(X.$$.fragment,t),Fe($.$$.fragment,t),Fe(ee.$$.fragment,t),P=!1},d(t){t&&(_(r),_(a),_(f),_(Te),_(re),_(ke),_(J)),Ge(X),jt(y,t),M&&M.d(),Ge($),Ge(ee),nt=!1,Lt(ht)}}}function Qt(e,r,l){let a=[],f=[],p=[...e];for(let s in e)f.push(1),a.push(0),e[s]<l&&(e[s]=0,p[s]=0);for(let s=0;s<r;s++){let c=p.indexOf(Math.max(...p));f[c]=f[c]+1,a[c]=a[c]+1,p[c]=e[c]/f[c]}return a}function Kt(e,r,l){let a=[],f=new Array(e.length).fill(.5),p=[...e];for(let s in e)f.push(1),a.push(0),e[s]<l&&(e[s]=0,p[s]=0);for(let s=0;s<r;s++){let c=p.indexOf(Math.max(...p));f[c]=f[c]+1,a[c]=a[c]+1,p[c]=e[c]/f[c]}return a}function Xt(e,r,l){let a=[];const s=e.filter(o=>o>=l).reduce((o,u)=>o+u,0)/r;a=e.map(o=>{if(o<l)return 0;const u=Math.floor(o/s),k=o%s;return{initialMandates:u,remainder:k}});let c=a.reduce((o,u)=>o+(u.initialMandates||0),0);const C=r-c,E=a.map((o,u)=>({index:u,remainder:o.remainder||0})).sort((o,u)=>u.remainder-o.remainder);for(let o=0;o<C;o++)a[E[o].index].initialMandates+=1;return a.map(o=>o.initialMandates||0)}const Yt=function(e){return e>0?e:""},Dt=function(e){return e>0?e:""};function $t(e,r,l){xt.register(Ot,Bt,Vt,zt,Ft,Gt,Wt,qt);let a=st("data"),f=st("mandateData"),p=st("majorityData"),s=10,c=4,C="D'Hondt",E=0,o=0,u=[],k,ae=0;function ne(){s=_e(this.value),l(2,s)}function D(){c=_e(this.value),l(3,c)}function me(){C=At(this),l(4,C)}function V(H){a.datasets[0].data[H]=_e(this.value),l(0,a),l(5,k),l(4,C),l(2,s),l(3,c)}const Q=function(H,z){if(z.datasetIndex!==void 0){const K=z.datasetIndex,F=p.datasets[K].hidden;l(1,p.datasets[K].hidden=!F,p)}};return e.$$.update=()=>{if(e.$$.dirty&4&&l(7,E=Math.floor(s/2+1)),e.$$.dirty&4&&l(8,o=Math.ceil(s/3*2)),e.$$.dirty&61&&(l(5,k=100-a.datasets[0].data.reduce((H,z)=>H+z,0)),k>=0&&(l(0,a),l(5,k),l(4,C),l(2,s),l(3,c),C=="D'Hondt"?l(10,u=Qt([...a.datasets[0].data],s,c)):C=="Sainte-Laguë"?l(10,u=Kt([...a.datasets[0].data],s,c)):C=="Hare-Niemeyer"&&l(10,u=Xt([...a.datasets[0].data],s,c)))),e.$$.dirty&1024){l(6,f.datasets[0].data=u,f);for(let H in u)l(1,p.datasets[H].data=[u[H]],p)}e.$$.dirty&514&&(l(9,ae=0),p.datasets.forEach((H,z)=>{H.hidden||l(9,ae+=H.data[0])}))},[a,p,s,c,C,k,f,E,o,ae,u,ne,D,me,V,Q]}class ea extends It{constructor(r){super(),St(this,r,$t,Zt,Ht,{})}}function ta(e){let r,l;return r=new ea({}),{c(){xe(r.$$.fragment)},l(a){Oe(r.$$.fragment,a)},m(a,f){Be(r,a,f),l=!0},p:Pt,i(a){l||(ze(r.$$.fragment,a),l=!0)},o(a){Fe(r.$$.fragment,a),l=!1},d(a){Ge(r,a)}}}function aa(e){return ot("data",Jt),ot("mandateData",Rt),ot("majorityData",Ut),[]}class sa extends It{constructor(r){super(),St(this,r,aa,ta,Ht,{})}}export{sa as component};
