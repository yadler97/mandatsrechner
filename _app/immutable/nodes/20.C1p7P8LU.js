import{s as jt,d as Ot,r as Pt,g as ft,c as ht,e as Fe,n as $t,b as ct}from"../chunks/91R61O7h.js";import{S as Ht,i as Nt,e as s,s as E,t as V,p as Ue,c as l,l as W,f as M,a as b,d,b as z,q as qe,m as u,x as Q,g as q,h as a,y as Tt,r as Ge,z as ue,B as Ce,j as ye,u as Ze,v as Ye,w as Je,o as Vt,A as zt,k as Bt}from"../chunks/TVwBqQQG.js";import{data as Rt,mandateData as Wt,majorityData as xt}from"../chunks/CIlPuf7u.js";import{e as Dt}from"../chunks/D6YF6ztN.js";import{B as wt,D as Ft,C as Ut,p as qt,a as Gt,b as Zt,c as Yt,d as Jt,L as Kt,e as Qt,f as Xt,g as ea,A as pt,s as ta,h as aa}from"../chunks/BvzeAwy7.js";import{w as _t}from"../chunks/ChrQU5ea.js";function kt(e,r,n){const o=e.slice();return o[25]=r[n],o[26]=r,o[27]=n,o}function It(e){let r,n,o=e[25].label+"",i,m,f,c,L,v,w;function P(){e[21].call(c,e[27],e[25])}function le(){return e[22](e[27],e[25])}return{c(){r=s("div"),n=s("label"),i=V(o),m=E(),f=s("span"),c=s("input"),L=V(" %"),this.h()},l(S){r=l(S,"DIV",{class:!0});var _=b(r);n=l(_,"LABEL",{for:!0});var y=b(n);i=z(y,o),y.forEach(d),m=M(_),f=l(_,"SPAN",{class:!0});var B=b(f);c=l(B,"INPUT",{id:!0,type:!0,step:!0,min:!0,max:!0}),L=z(B," %"),B.forEach(d),_.forEach(d),this.h()},h(){u(n,"for","input_party_"+e[27]),u(c,"id","input_party_"+e[27]),u(c,"type","number"),u(c,"step","any"),u(c,"min","0"),u(c,"max","100"),u(f,"class","valuePadding"),u(r,"class","input_field_vote_party")},m(S,_){q(S,r,_),a(r,n),a(n,i),a(r,m),a(r,f),a(f,c),Q(c,e[3].datasets[e[27]].data[e[25].index]),a(f,L),v||(w=[ue(c,"input",P),ue(c,"input",le)],v=!0)},p(S,_){e=S,_&8&&o!==(o=e[25].label+"")&&ye(i,o),_&8&&Ce(c.value)!==e[3].datasets[e[27]].data[e[25].index]&&Q(c,e[3].datasets[e[27]].data[e[25].index])},d(S){S&&d(r),v=!1,Pt(w)}}}function Lt(e){let r,n="Achtung: Gesamtstimmen dürfen 100% nicht überschreiten!";return{c(){r=s("p"),r.textContent=n},l(o){r=l(o,"P",{"data-svelte-h":!0}),W(r)!=="svelte-154vc08"&&(r.textContent=n)},m(o,i){q(o,r,i)},d(o){o&&d(r)}}}function na(e){let r,n="Stimmenanteile",o,i,m,f,c="Allgemeine Informationen",L,v,w,P,le='<label for="input_mandate_count">Abgeordnete</label>',S,_,y,B,G,X,Ie='<label for="input_threshold">Sperrklausel</label>',fe,oe,Z,A,Ee,Me,Y,ee,p='<label for="input_apportionment_method">Sitzzuteilungsverfahren</label>',g,j,C,N,he="D'Hondt",T,ce="Sainte-Laguë",O,Le="Hare-Niemeyer",Ke,pe,te,Qe,$,Se,ae,_e,mt="Sonstige:",Xe,Te,De=(e[7]>=0?e[7].toFixed(2):0)+"",Ae,et,je,ie,vt="Mandatsverteilung",Pe,J,me,ne,tt,x,re,at,F,nt,He,rt,Ne,Oe,st,U,lt,$e,ot,Ve,ze,R,it,gt;te=new wt({props:{data:e[3],options:{responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:St},annotation:{annotations:e[1]>0?{majorityLine:{type:"line",yMin:e[1],yMax:e[1],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{x:{stacked:!0},y:{stacked:!0,suggestedMax:Math.max(...e[3].labels.map(e[20]))+5}}}}});let ve=Dt(e[3].datasets),D=[];for(let t=0;t<ve.length;t+=1)D[t]=It(kt(e,ve,t));let k=e[7]<0&&Lt();return ne=new Ft({props:{id:"mandatesChart",data:e[9],options:{responsive:!0,cutout:"40%",circumference:180,rotation:-90,plugins:{datalabels:{anchor:"end",align:"start",color:"white",formatter:ra,font:{weight:"bold",size:20}}}}}}),re=new wt({props:{data:e[4],options:{responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:e[0]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:e[5],xMax:e[5],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:e[6],xMax:e[6],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:At,font:{weight:"bold",size:20}},legend:{onClick:e[23]}}}}}),{c(){r=s("h1"),r.textContent=n,o=E(),i=s("section"),m=s("div"),f=s("p"),f.textContent=c,L=E(),v=s("table"),w=s("tr"),P=s("th"),P.innerHTML=le,S=E(),_=s("td"),y=s("input"),B=E(),G=s("tr"),X=s("th"),X.innerHTML=Ie,fe=E(),oe=s("td"),Z=s("span"),A=s("input"),Ee=V(" %"),Me=E(),Y=s("tr"),ee=s("th"),ee.innerHTML=p,g=E(),j=s("td"),C=s("select"),N=s("option"),N.textContent=he,T=s("option"),T.textContent=ce,O=s("option"),O.textContent=Le,Ke=E(),pe=s("div"),Ue(te.$$.fragment),Qe=E(),$=s("div");for(let t=0;t<D.length;t+=1)D[t].c();Se=E(),ae=s("div"),_e=s("p"),_e.textContent=mt,Xe=E(),Te=s("p"),Ae=V(De),et=E(),k&&k.c(),je=E(),ie=s("h1"),ie.textContent=vt,Pe=E(),J=s("section"),me=s("div"),Ue(ne.$$.fragment),tt=E(),x=s("div"),Ue(re.$$.fragment),at=E(),F=s("p"),nt=V("Mehrheit: "),He=V(e[8]),rt=V("/"),Ne=V(e[5]),st=E(),U=s("p"),lt=V("Zweidrittelmehrheit: "),$e=V(e[8]),ot=V("/"),Ve=V(e[6]),this.h()},l(t){r=l(t,"H1",{"data-svelte-h":!0}),W(r)!=="svelte-too001"&&(r.textContent=n),o=M(t),i=l(t,"SECTION",{class:!0});var h=b(i);m=l(h,"DIV",{class:!0});var H=b(m);f=l(H,"P",{"data-svelte-h":!0}),W(f)!=="svelte-7wsg44"&&(f.textContent=c),L=M(H),v=l(H,"TABLE",{});var K=b(v);w=l(K,"TR",{});var se=b(w);P=l(se,"TH",{"data-svelte-h":!0}),W(P)!=="svelte-1wy1b54"&&(P.innerHTML=le),S=M(se),_=l(se,"TD",{});var I=b(_);y=l(I,"INPUT",{id:!0,type:!0,min:!0,max:!0}),I.forEach(d),se.forEach(d),B=M(K),G=l(K,"TR",{});var de=b(G);X=l(de,"TH",{"data-svelte-h":!0}),W(X)!=="svelte-e3yl1g"&&(X.innerHTML=Ie),fe=M(de),oe=l(de,"TD",{});var bt=b(oe);Z=l(bt,"SPAN",{class:!0});var dt=b(Z);A=l(dt,"INPUT",{id:!0,type:!0,min:!0,max:!0}),Ee=z(dt," %"),dt.forEach(d),bt.forEach(d),de.forEach(d),Me=M(K),Y=l(K,"TR",{});var Be=b(Y);ee=l(Be,"TH",{"data-svelte-h":!0}),W(ee)!=="svelte-r745e5"&&(ee.innerHTML=p),g=M(Be),j=l(Be,"TD",{});var yt=b(j);C=l(yt,"SELECT",{class:!0,id:!0});var Re=b(C);N=l(Re,"OPTION",{"data-svelte-h":!0}),W(N)!=="svelte-wlpdpc"&&(N.textContent=he),T=l(Re,"OPTION",{"data-svelte-h":!0}),W(T)!=="svelte-j8z6l1"&&(T.textContent=ce),O=l(Re,"OPTION",{"data-svelte-h":!0}),W(O)!=="svelte-8h9q9v"&&(O.textContent=Le),Re.forEach(d),yt.forEach(d),Be.forEach(d),K.forEach(d),H.forEach(d),Ke=M(h),pe=l(h,"DIV",{class:!0});var Ct=b(pe);qe(te.$$.fragment,Ct),Ct.forEach(d),Qe=M(h),$=l(h,"DIV",{class:!0});var ge=b($);for(let ut=0;ut<D.length;ut+=1)D[ut].l(ge);Se=M(ge),ae=l(ge,"DIV",{class:!0});var We=b(ae);_e=l(We,"P",{"data-svelte-h":!0}),W(_e)!=="svelte-1p0cp1c"&&(_e.textContent=mt),Xe=M(We),Te=l(We,"P",{});var Et=b(Te);Ae=z(Et,De),Et.forEach(d),We.forEach(d),et=M(ge),k&&k.l(ge),ge.forEach(d),h.forEach(d),je=M(t),ie=l(t,"H1",{"data-svelte-h":!0}),W(ie)!=="svelte-jg7skr"&&(ie.textContent=vt),Pe=M(t),J=l(t,"SECTION",{class:!0});var xe=b(J);me=l(xe,"DIV",{class:!0});var Mt=b(me);qe(ne.$$.fragment,Mt),Mt.forEach(d),tt=M(xe),x=l(xe,"DIV",{class:!0});var be=b(x);qe(re.$$.fragment,be),at=M(be),F=l(be,"P",{class:!0});var we=b(F);nt=z(we,"Mehrheit: "),He=z(we,e[8]),rt=z(we,"/"),Ne=z(we,e[5]),we.forEach(d),st=M(be),U=l(be,"P",{class:!0});var ke=b(U);lt=z(ke,"Zweidrittelmehrheit: "),$e=z(ke,e[8]),ot=z(ke,"/"),Ve=z(ke,e[6]),ke.forEach(d),be.forEach(d),xe.forEach(d),this.h()},h(){u(y,"id","input_mandate_count"),u(y,"type","number"),u(y,"min","0"),u(y,"max","1000"),u(A,"id","input_threshold"),u(A,"type","number"),u(A,"min","0"),u(A,"max","100"),u(Z,"class","valuePadding"),N.__value="D'Hondt",Q(N,N.__value),T.__value="Sainte-Laguë",Q(T,T.__value),O.__value="Hare-Niemeyer",Q(O,O.__value),u(C,"class","selectApportionmentMethod"),u(C,"id","input_apportionment_method"),e[2]===void 0&&Ot(()=>e[19].call(C)),u(m,"class","info_container"),u(pe,"class","bar_container"),u(ae,"class","input_field_vote_party"),u($,"class","input_fields_vote"),u(i,"class","vote_share_section"),u(me,"class","pie_container"),u(F,"class",Oe="majorityText "+(e[8]<e[5]?"red":"green")),u(U,"class",ze="majorityText "+(e[8]<e[6]?"red":"green")),u(x,"class","stack_container"),u(J,"class","mandate_section")},m(t,h){q(t,r,h),q(t,o,h),q(t,i,h),a(i,m),a(m,f),a(m,L),a(m,v),a(v,w),a(w,P),a(w,S),a(w,_),a(_,y),Q(y,e[0]),a(v,B),a(v,G),a(G,X),a(G,fe),a(G,oe),a(oe,Z),a(Z,A),Q(A,e[1]),a(Z,Ee),a(v,Me),a(v,Y),a(Y,ee),a(Y,g),a(Y,j),a(j,C),a(C,N),a(C,T),a(C,O),Tt(C,e[2],!0),a(i,Ke),a(i,pe),Ge(te,pe,null),a(i,Qe),a(i,$);for(let H=0;H<D.length;H+=1)D[H]&&D[H].m($,null);a($,Se),a($,ae),a(ae,_e),a(ae,Xe),a(ae,Te),a(Te,Ae),a($,et),k&&k.m($,null),q(t,je,h),q(t,ie,h),q(t,Pe,h),q(t,J,h),a(J,me),Ge(ne,me,null),a(J,tt),a(J,x),Ge(re,x,null),a(x,at),a(x,F),a(F,nt),a(F,He),a(F,rt),a(F,Ne),a(x,st),a(x,U),a(U,lt),a(U,$e),a(U,ot),a(U,Ve),R=!0,it||(gt=[ue(y,"input",e[17]),ue(y,"input",e[13]),ue(A,"input",e[18]),ue(A,"input",e[14]),ue(C,"change",e[19])],it=!0)},p(t,[h]){h&1&&Ce(y.value)!==t[0]&&Q(y,t[0]),h&2&&Ce(A.value)!==t[1]&&Q(A,t[1]),h&4&&Tt(C,t[2]);const H={};if(h&8&&(H.data=t[3]),h&10&&(H.options={responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:St},annotation:{annotations:t[1]>0?{majorityLine:{type:"line",yMin:t[1],yMax:t[1],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{x:{stacked:!0},y:{stacked:!0,suggestedMax:Math.max(...t[3].labels.map(t[20]))+5}}}),te.$set(H),h&32776){ve=Dt(t[3].datasets);let I;for(I=0;I<ve.length;I+=1){const de=kt(t,ve,I);D[I]?D[I].p(de,h):(D[I]=It(de),D[I].c(),D[I].m($,Se))}for(;I<D.length;I+=1)D[I].d(1);D.length=ve.length}(!R||h&128)&&De!==(De=(t[7]>=0?t[7].toFixed(2):0)+"")&&ye(Ae,De),t[7]<0?k||(k=Lt(),k.c(),k.m($,null)):k&&(k.d(1),k=null);const K={};h&512&&(K.data=t[9]),ne.$set(K);const se={};h&16&&(se.data=t[4]),h&113&&(se.options={responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:t[0]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:t[5],xMax:t[5],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:t[6],xMax:t[6],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:At,font:{weight:"bold",size:20}},legend:{onClick:t[23]}}}),re.$set(se),(!R||h&256)&&ye(He,t[8]),(!R||h&32)&&ye(Ne,t[5]),(!R||h&288&&Oe!==(Oe="majorityText "+(t[8]<t[5]?"red":"green")))&&u(F,"class",Oe),(!R||h&256)&&ye($e,t[8]),(!R||h&64)&&ye(Ve,t[6]),(!R||h&320&&ze!==(ze="majorityText "+(t[8]<t[6]?"red":"green")))&&u(U,"class",ze)},i(t){R||(Ze(te.$$.fragment,t),Ze(ne.$$.fragment,t),Ze(re.$$.fragment,t),R=!0)},o(t){Ye(te.$$.fragment,t),Ye(ne.$$.fragment,t),Ye(re.$$.fragment,t),R=!1},d(t){t&&(d(r),d(o),d(i),d(je),d(ie),d(Pe),d(J)),Je(te),Vt(D,t),k&&k.d(),Je(ne),Je(re),it=!1,Pt(gt)}}}const St=(e,r)=>{const{chart:n,dataIndex:o,datasetIndex:i}=r,m=n.data.datasets.length-1;return i!==m?"":n.data.datasets.reduce((c,L)=>{const v=L.data[o];return typeof v=="number"?c+v:c},0).toLocaleString("de-AT",{minimumFractionDigits:2,maximumFractionDigits:2})},ra=function(e){return e>0?e:""},At=function(e){return e>0?e:""};function sa(e,r,n){let o,i,m;Ut.register(qt,Gt,Zt,Yt,Jt,Kt,Qt,Xt);let f=ft("data");ht(e,f,p=>n(3,o=p));let c=ft("mandateData");ht(e,c,p=>n(9,m=p));let L=ft("majorityData");ht(e,L,p=>n(4,i=p));let v=10,w=4,P="D'Hondt",le=0,S=0,_=[],y,B=0;function G(p,g,j,C){let N=p.map(T=>T.data[T.index]);n(7,y=100-N.reduce((T,ce)=>T+ce,0));let he=N.map((T,ce)=>{const O=document.getElementById(`checkbox_party_${ce}`),Le=O instanceof HTMLInputElement?O.checked:!1;return T<C&&!Le?0:T});return y>=-1e-5&&(j==pt.DHONDT?n(16,_=ea([...he],g)):j==pt.SAINTE_LAGUE?n(16,_=ta([...he],g)):j==pt.HARE_NIEMEYER&&n(16,_=aa([...he],g))),_}function X(p){let g=p.target.value;Number(g)>1e3&&n(0,v=1e3)}function Ie(p){let g=p.target.value;Number(g)>100&&n(1,w=100)}function fe(p,g){o.datasets[p].data[g]>100&&Fe(f,o.datasets[p].data[g]=100,o)}function oe(){v=Ce(this.value),n(0,v)}function Z(){w=Ce(this.value),n(1,w)}function A(){P=zt(this),n(2,P)}const Ee=(p,g)=>o.datasets.reduce((j,C)=>j+(C.data[g]||0),0);function Me(p,g){o.datasets[p].data[g.index]=Ce(this.value),f.set(o)}const Y=(p,g)=>fe(p,g.index),ee=function(p,g){if(g.datasetIndex!==void 0){const j=g.datasetIndex,C=i.datasets[j].hidden;Fe(L,i.datasets[j].hidden=!C,i)}};return e.$$.update=()=>{if(e.$$.dirty&1&&n(5,le=Math.floor(v/2+1)),e.$$.dirty&1&&n(6,S=Math.ceil(v/3*2)),e.$$.dirty&15&&n(16,_=G(o.datasets,v,P,w)),e.$$.dirty&65536){Fe(c,m.datasets[0].data=_,m);for(let p in _)Fe(L,i.datasets[p].data=[_[p]],i)}e.$$.dirty&272&&(n(8,B=0),i.datasets.forEach((p,g)=>{p.hidden||n(8,B+=p.data[0])}))},[v,w,P,o,i,le,S,y,B,m,f,c,L,X,Ie,fe,_,oe,Z,A,Ee,Me,Y,ee]}class la extends Ht{constructor(r){super(),Nt(this,r,sa,na,jt,{})}}function oa(e){let r,n,o,i,m;return i=new la({}),{c(){r=s("meta"),n=s("meta"),o=E(),Ue(i.$$.fragment),this.h()},l(f){const c=Bt("svelte-lfh6c0",document.head);r=l(c,"META",{property:!0,content:!0}),n=l(c,"META",{name:!0,content:!0}),c.forEach(d),o=M(f),qe(i.$$.fragment,f),this.h()},h(){document.title="Mandatsrechner - Spielwiese",u(r,"property","og:title"),u(r,"content","Mandatsrechner - Spielwiese"),u(n,"name","twitter:title"),u(n,"content","Mandatsrechner - Spielwiese")},m(f,c){a(document.head,r),a(document.head,n),q(f,o,c),Ge(i,f,c),m=!0},p:$t,i(f){m||(Ze(i.$$.fragment,f),m=!0)},o(f){Ye(i.$$.fragment,f),m=!1},d(f){f&&d(o),d(r),d(n),Je(i,f)}}}function ia(e){return ct("data",_t(Rt)),ct("mandateData",_t(Wt)),ct("majorityData",_t(xt)),[]}class _a extends Ht{constructor(r){super(),Nt(this,r,ia,oa,jt,{})}}export{_a as component};
