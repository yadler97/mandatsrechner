import{s as jt,b as Nt,r as Pt,g as ft,c as ht,e as Fe,n as $t,d as ct}from"../chunks/eX-Ury47.js";import{S as Ht,i as At,e as s,s as M,t as V,o as qe,c as l,l as R,f as E,a as b,d,b as z,p as Ue,m as u,q as X,g as U,h as a,r as Et,u as Ze,v as ue,B as Ce,j as ye,w as Ge,x as Je,y as Ke,n as Ot,z as Vt,k as zt}from"../chunks/CvUCCQBL.js";import{data as Bt,mandateData as Wt,majorityData as Rt}from"../chunks/CIlPuf7u.js";import{e as Tt}from"../chunks/D6YF6ztN.js";import{B as Dt,D as xt,C as Ft,p as qt,a as Ut,b as Zt,c as Gt,d as Jt,L as Kt,e as Qt,f as Xt,g as Yt,s as ea,h as ta}from"../chunks/BpMWPB_2.js";import{w as pt}from"../chunks/Boe7Ld1g.js";function wt(e,r,n){const o=e.slice();return o[25]=r[n],o[26]=r,o[27]=n,o}function kt(e){let r,n,o=e[25].label+"",i,m,f,c,S,v,w;function H(){e[21].call(c,e[27],e[25])}function le(){return e[22](e[27],e[25])}return{c(){r=s("div"),n=s("label"),i=V(o),m=M(),f=s("span"),c=s("input"),S=V(" %"),this.h()},l(I){r=l(I,"DIV",{class:!0});var _=b(r);n=l(_,"LABEL",{for:!0});var y=b(n);i=z(y,o),y.forEach(d),m=E(_),f=l(_,"SPAN",{class:!0});var B=b(f);c=l(B,"INPUT",{id:!0,type:!0,min:!0,max:!0}),S=z(B," %"),B.forEach(d),_.forEach(d),this.h()},h(){u(n,"for","input_party_"+e[27]),u(c,"id","input_party_"+e[27]),u(c,"type","number"),u(c,"min","0"),u(c,"max","100"),u(f,"class","valuePadding"),u(r,"class","input_field_vote_party")},m(I,_){U(I,r,_),a(r,n),a(n,i),a(r,m),a(r,f),a(f,c),X(c,e[3].datasets[e[27]].data[e[25].index]),a(f,S),v||(w=[ue(c,"input",H),ue(c,"input",le)],v=!0)},p(I,_){e=I,_&8&&o!==(o=e[25].label+"")&&ye(i,o),_&8&&Ce(c.value)!==e[3].datasets[e[27]].data[e[25].index]&&X(c,e[3].datasets[e[27]].data[e[25].index])},d(I){I&&d(r),v=!1,Pt(w)}}}function Lt(e){let r,n="Achtung: Gesamtstimmen dürfen 100% nicht überschreiten!";return{c(){r=s("p"),r.textContent=n},l(o){r=l(o,"P",{"data-svelte-h":!0}),R(r)!=="svelte-154vc08"&&(r.textContent=n)},m(o,i){U(o,r,i)},d(o){o&&d(r)}}}function aa(e){let r,n="Stimmenanteile",o,i,m,f,c="Allgemeine Informationen",S,v,w,H,le='<label for="input_mandate_count">Abgeordnete</label>',I,_,y,B,Z,Y,Le='<label for="input_threshold">Sperrklausel</label>',fe,oe,G,j,Me,Ee,J,ee,p='<label for="input_apportionment_method">Sitzzuteilungsverfahren</label>',g,P,C,N,he="D'Hondt",T,ce="Sainte-Laguë",$,Se="Hare-Niemeyer",Qe,pe,te,Xe,O,Ie,ae,_e,_t="Sonstige:",Ye,Te,De=(e[7]>=0?e[7].toFixed(2):0)+"",je,et,Pe,ie,mt="Mandatsverteilung",He,K,me,ne,tt,x,re,at,F,nt,Ae,rt,Ne,$e,st,q,lt,Oe,ot,Ve,ze,W,it,vt;te=new Dt({props:{data:e[3],options:{responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:St},annotation:{annotations:e[1]>0?{majorityLine:{type:"line",yMin:e[1],yMax:e[1],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{x:{stacked:!0},y:{stacked:!0,suggestedMax:Math.max(...e[3].labels.map(e[20]))+5}}}}});let ve=Tt(e[3].datasets),D=[];for(let t=0;t<ve.length;t+=1)D[t]=kt(wt(e,ve,t));let k=e[7]<0&&Lt();return ne=new xt({props:{id:"mandatesChart",data:e[9],options:{responsive:!0,circumference:180,rotation:-90,plugins:{datalabels:{anchor:"end",align:"start",color:"white",formatter:na,font:{weight:"bold",size:20}}}}}}),re=new Dt({props:{data:e[4],options:{responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:e[0]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:e[5],xMax:e[5],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:e[6],xMax:e[6],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:It,font:{weight:"bold",size:20}},legend:{onClick:e[23]}}}}}),{c(){r=s("h1"),r.textContent=n,o=M(),i=s("section"),m=s("div"),f=s("p"),f.textContent=c,S=M(),v=s("table"),w=s("tr"),H=s("th"),H.innerHTML=le,I=M(),_=s("td"),y=s("input"),B=M(),Z=s("tr"),Y=s("th"),Y.innerHTML=Le,fe=M(),oe=s("td"),G=s("span"),j=s("input"),Me=V(" %"),Ee=M(),J=s("tr"),ee=s("th"),ee.innerHTML=p,g=M(),P=s("td"),C=s("select"),N=s("option"),N.textContent=he,T=s("option"),T.textContent=ce,$=s("option"),$.textContent=Se,Qe=M(),pe=s("div"),qe(te.$$.fragment),Xe=M(),O=s("div");for(let t=0;t<D.length;t+=1)D[t].c();Ie=M(),ae=s("div"),_e=s("p"),_e.textContent=_t,Ye=M(),Te=s("p"),je=V(De),et=M(),k&&k.c(),Pe=M(),ie=s("h1"),ie.textContent=mt,He=M(),K=s("section"),me=s("div"),qe(ne.$$.fragment),tt=M(),x=s("div"),qe(re.$$.fragment),at=M(),F=s("p"),nt=V("Mehrheit: "),Ae=V(e[8]),rt=V("/"),Ne=V(e[5]),st=M(),q=s("p"),lt=V("Zweidrittelmehrheit: "),Oe=V(e[8]),ot=V("/"),Ve=V(e[6]),this.h()},l(t){r=l(t,"H1",{"data-svelte-h":!0}),R(r)!=="svelte-too001"&&(r.textContent=n),o=E(t),i=l(t,"SECTION",{class:!0});var h=b(i);m=l(h,"DIV",{class:!0});var A=b(m);f=l(A,"P",{"data-svelte-h":!0}),R(f)!=="svelte-7wsg44"&&(f.textContent=c),S=E(A),v=l(A,"TABLE",{});var Q=b(v);w=l(Q,"TR",{});var se=b(w);H=l(se,"TH",{"data-svelte-h":!0}),R(H)!=="svelte-1wy1b54"&&(H.innerHTML=le),I=E(se),_=l(se,"TD",{});var L=b(_);y=l(L,"INPUT",{id:!0,type:!0,min:!0,max:!0}),L.forEach(d),se.forEach(d),B=E(Q),Z=l(Q,"TR",{});var de=b(Z);Y=l(de,"TH",{"data-svelte-h":!0}),R(Y)!=="svelte-e3yl1g"&&(Y.innerHTML=Le),fe=E(de),oe=l(de,"TD",{});var gt=b(oe);G=l(gt,"SPAN",{class:!0});var dt=b(G);j=l(dt,"INPUT",{id:!0,type:!0,min:!0,max:!0}),Me=z(dt," %"),dt.forEach(d),gt.forEach(d),de.forEach(d),Ee=E(Q),J=l(Q,"TR",{});var Be=b(J);ee=l(Be,"TH",{"data-svelte-h":!0}),R(ee)!=="svelte-r745e5"&&(ee.innerHTML=p),g=E(Be),P=l(Be,"TD",{});var bt=b(P);C=l(bt,"SELECT",{class:!0,id:!0});var We=b(C);N=l(We,"OPTION",{"data-svelte-h":!0}),R(N)!=="svelte-wlpdpc"&&(N.textContent=he),T=l(We,"OPTION",{"data-svelte-h":!0}),R(T)!=="svelte-j8z6l1"&&(T.textContent=ce),$=l(We,"OPTION",{"data-svelte-h":!0}),R($)!=="svelte-8h9q9v"&&($.textContent=Se),We.forEach(d),bt.forEach(d),Be.forEach(d),Q.forEach(d),A.forEach(d),Qe=E(h),pe=l(h,"DIV",{class:!0});var yt=b(pe);Ue(te.$$.fragment,yt),yt.forEach(d),Xe=E(h),O=l(h,"DIV",{class:!0});var ge=b(O);for(let ut=0;ut<D.length;ut+=1)D[ut].l(ge);Ie=E(ge),ae=l(ge,"DIV",{class:!0});var Re=b(ae);_e=l(Re,"P",{"data-svelte-h":!0}),R(_e)!=="svelte-1p0cp1c"&&(_e.textContent=_t),Ye=E(Re),Te=l(Re,"P",{});var Ct=b(Te);je=z(Ct,De),Ct.forEach(d),Re.forEach(d),et=E(ge),k&&k.l(ge),ge.forEach(d),h.forEach(d),Pe=E(t),ie=l(t,"H1",{"data-svelte-h":!0}),R(ie)!=="svelte-jg7skr"&&(ie.textContent=mt),He=E(t),K=l(t,"SECTION",{class:!0});var xe=b(K);me=l(xe,"DIV",{class:!0});var Mt=b(me);Ue(ne.$$.fragment,Mt),Mt.forEach(d),tt=E(xe),x=l(xe,"DIV",{class:!0});var be=b(x);Ue(re.$$.fragment,be),at=E(be),F=l(be,"P",{class:!0});var we=b(F);nt=z(we,"Mehrheit: "),Ae=z(we,e[8]),rt=z(we,"/"),Ne=z(we,e[5]),we.forEach(d),st=E(be),q=l(be,"P",{class:!0});var ke=b(q);lt=z(ke,"Zweidrittelmehrheit: "),Oe=z(ke,e[8]),ot=z(ke,"/"),Ve=z(ke,e[6]),ke.forEach(d),be.forEach(d),xe.forEach(d),this.h()},h(){u(y,"id","input_mandate_count"),u(y,"type","number"),u(y,"min","0"),u(y,"max","1000"),u(j,"id","input_threshold"),u(j,"type","number"),u(j,"min","0"),u(j,"max","100"),u(G,"class","valuePadding"),N.__value="D'Hondt",X(N,N.__value),T.__value="Sainte-Laguë",X(T,T.__value),$.__value="Hare-Niemeyer",X($,$.__value),u(C,"class","selectApportionmentMethod"),u(C,"id","input_apportionment_method"),e[2]===void 0&&Nt(()=>e[19].call(C)),u(m,"class","info_container"),u(pe,"class","bar_container"),u(ae,"class","input_field_vote_party"),u(O,"class","input_fields_vote"),u(i,"class","vote_share_section"),u(me,"class","pie_container"),u(F,"class",$e="majorityText "+(e[8]<e[5]?"red":"green")),u(q,"class",ze="majorityText "+(e[8]<e[6]?"red":"green")),u(x,"class","stack_container"),u(K,"class","mandate_section")},m(t,h){U(t,r,h),U(t,o,h),U(t,i,h),a(i,m),a(m,f),a(m,S),a(m,v),a(v,w),a(w,H),a(w,I),a(w,_),a(_,y),X(y,e[0]),a(v,B),a(v,Z),a(Z,Y),a(Z,fe),a(Z,oe),a(oe,G),a(G,j),X(j,e[1]),a(G,Me),a(v,Ee),a(v,J),a(J,ee),a(J,g),a(J,P),a(P,C),a(C,N),a(C,T),a(C,$),Et(C,e[2],!0),a(i,Qe),a(i,pe),Ze(te,pe,null),a(i,Xe),a(i,O);for(let A=0;A<D.length;A+=1)D[A]&&D[A].m(O,null);a(O,Ie),a(O,ae),a(ae,_e),a(ae,Ye),a(ae,Te),a(Te,je),a(O,et),k&&k.m(O,null),U(t,Pe,h),U(t,ie,h),U(t,He,h),U(t,K,h),a(K,me),Ze(ne,me,null),a(K,tt),a(K,x),Ze(re,x,null),a(x,at),a(x,F),a(F,nt),a(F,Ae),a(F,rt),a(F,Ne),a(x,st),a(x,q),a(q,lt),a(q,Oe),a(q,ot),a(q,Ve),W=!0,it||(vt=[ue(y,"input",e[17]),ue(y,"input",e[13]),ue(j,"input",e[18]),ue(j,"input",e[14]),ue(C,"change",e[19])],it=!0)},p(t,[h]){h&1&&Ce(y.value)!==t[0]&&X(y,t[0]),h&2&&Ce(j.value)!==t[1]&&X(j,t[1]),h&4&&Et(C,t[2]);const A={};if(h&8&&(A.data=t[3]),h&10&&(A.options={responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:St},annotation:{annotations:t[1]>0?{majorityLine:{type:"line",yMin:t[1],yMax:t[1],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{x:{stacked:!0},y:{stacked:!0,suggestedMax:Math.max(...t[3].labels.map(t[20]))+5}}}),te.$set(A),h&32776){ve=Tt(t[3].datasets);let L;for(L=0;L<ve.length;L+=1){const de=wt(t,ve,L);D[L]?D[L].p(de,h):(D[L]=kt(de),D[L].c(),D[L].m(O,Ie))}for(;L<D.length;L+=1)D[L].d(1);D.length=ve.length}(!W||h&128)&&De!==(De=(t[7]>=0?t[7].toFixed(2):0)+"")&&ye(je,De),t[7]<0?k||(k=Lt(),k.c(),k.m(O,null)):k&&(k.d(1),k=null);const Q={};h&512&&(Q.data=t[9]),ne.$set(Q);const se={};h&16&&(se.data=t[4]),h&113&&(se.options={responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:t[0]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:t[5],xMax:t[5],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:t[6],xMax:t[6],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:It,font:{weight:"bold",size:20}},legend:{onClick:t[23]}}}),re.$set(se),(!W||h&256)&&ye(Ae,t[8]),(!W||h&32)&&ye(Ne,t[5]),(!W||h&288&&$e!==($e="majorityText "+(t[8]<t[5]?"red":"green")))&&u(F,"class",$e),(!W||h&256)&&ye(Oe,t[8]),(!W||h&64)&&ye(Ve,t[6]),(!W||h&320&&ze!==(ze="majorityText "+(t[8]<t[6]?"red":"green")))&&u(q,"class",ze)},i(t){W||(Ge(te.$$.fragment,t),Ge(ne.$$.fragment,t),Ge(re.$$.fragment,t),W=!0)},o(t){Je(te.$$.fragment,t),Je(ne.$$.fragment,t),Je(re.$$.fragment,t),W=!1},d(t){t&&(d(r),d(o),d(i),d(Pe),d(ie),d(He),d(K)),Ke(te),Ot(D,t),k&&k.d(),Ke(ne),Ke(re),it=!1,Pt(vt)}}}const St=(e,r)=>{const{chart:n,dataIndex:o,datasetIndex:i}=r,m=n.data.datasets.length-1;return i!==m?"":n.data.datasets.reduce((c,S)=>{const v=S.data[o];return typeof v=="number"?c+v:c},0).toLocaleString("de-AT",{minimumFractionDigits:2,maximumFractionDigits:2})},na=function(e){return e>0?e:""},It=function(e){return e>0?e:""};function ra(e,r,n){let o,i,m;Ft.register(qt,Ut,Zt,Gt,Jt,Kt,Qt,Xt);let f=ft("data");ht(e,f,p=>n(3,o=p));let c=ft("mandateData");ht(e,c,p=>n(9,m=p));let S=ft("majorityData");ht(e,S,p=>n(4,i=p));let v=10,w=4,H="D'Hondt",le=0,I=0,_=[],y,B=0;function Z(p,g,P,C){let N=p.map(T=>T.data[T.index]);n(7,y=100-N.reduce((T,ce)=>T+ce,0));let he=N.map((T,ce)=>{const $=document.getElementById(`checkbox_party_${ce}`),Se=$ instanceof HTMLInputElement?$.checked:!1;return T<C&&!Se?0:T});return y>=-1e-5&&(P=="D'Hondt"?n(16,_=Yt([...he],g)):P=="Sainte-Laguë"?n(16,_=ea([...he],g)):P=="Hare-Niemeyer"&&n(16,_=ta([...he],g))),_}function Y(p){let g=p.target.value;Number(g)>1e3&&n(0,v=1e3)}function Le(p){let g=p.target.value;Number(g)>100&&n(1,w=100)}function fe(p,g){o.datasets[p].data[g]>100&&Fe(f,o.datasets[p].data[g]=100,o)}function oe(){v=Ce(this.value),n(0,v)}function G(){w=Ce(this.value),n(1,w)}function j(){H=Vt(this),n(2,H)}const Me=(p,g)=>o.datasets.reduce((P,C)=>P+(C.data[g]||0),0);function Ee(p,g){o.datasets[p].data[g.index]=Ce(this.value),f.set(o)}const J=(p,g)=>fe(p,g.index),ee=function(p,g){if(g.datasetIndex!==void 0){const P=g.datasetIndex,C=i.datasets[P].hidden;Fe(S,i.datasets[P].hidden=!C,i)}};return e.$$.update=()=>{if(e.$$.dirty&1&&n(5,le=Math.floor(v/2+1)),e.$$.dirty&1&&n(6,I=Math.ceil(v/3*2)),e.$$.dirty&15&&n(16,_=Z(o.datasets,v,H,w)),e.$$.dirty&65536){Fe(c,m.datasets[0].data=_,m);for(let p in _)Fe(S,i.datasets[p].data=[_[p]],i)}e.$$.dirty&272&&(n(8,B=0),i.datasets.forEach((p,g)=>{p.hidden||n(8,B+=p.data[0])}))},[v,w,H,o,i,le,I,y,B,m,f,c,S,Y,Le,fe,_,oe,G,j,Me,Ee,J,ee]}class sa extends Ht{constructor(r){super(),At(this,r,ra,aa,jt,{})}}function la(e){let r,n,o,i,m;return i=new sa({}),{c(){r=s("meta"),n=s("meta"),o=M(),qe(i.$$.fragment),this.h()},l(f){const c=zt("svelte-lfh6c0",document.head);r=l(c,"META",{property:!0,content:!0}),n=l(c,"META",{name:!0,content:!0}),c.forEach(d),o=E(f),Ue(i.$$.fragment,f),this.h()},h(){document.title="Mandatsrechner - Spielwiese",u(r,"property","og:title"),u(r,"content","Mandatsrechner - Spielwiese"),u(n,"name","twitter:title"),u(n,"content","Mandatsrechner - Spielwiese")},m(f,c){a(document.head,r),a(document.head,n),U(f,o,c),Ze(i,f,c),m=!0},p:$t,i(f){m||(Ge(i.$$.fragment,f),m=!0)},o(f){Je(i.$$.fragment,f),m=!1},d(f){f&&d(o),d(r),d(n),Ke(i,f)}}}function oa(e){return ct("data",pt(Bt)),ct("mandateData",pt(Wt)),ct("majorityData",pt(Rt)),[]}class pa extends Ht{constructor(r){super(),At(this,r,oa,la,jt,{})}}export{pa as component};
