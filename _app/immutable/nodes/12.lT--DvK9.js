import{s as Ht,b as St,r as wt,g as ot,n as jt,d as st}from"../chunks/hsm1TwBJ.js";import{S as It,i as Lt,e as i,s as g,t as P,l as Oe,c as d,k as A,f as v,a as b,d as _,b as N,m as Be,n as m,v as U,g as Z,h as n,y as Ct,o as Ve,w as ze,x as _e,j as he,p as xe,q as We,r as Fe,u as Pt,z as At}from"../chunks/C_t1LkpG.js";import{B as yt,e as Mt,P as Nt,C as Ot,p as Bt,a as Vt,b as zt,c as xt,d as Wt,L as Ft,f as Gt,g as qt}from"../chunks/eUnNzeV8.js";const Jt={labels:["A","B","C","D","E","F","G","H","I","J"],datasets:[{label:"Stimmenanteil in %",data:[40,30,10,10,5,5,0,0,0,0],backgroundColor:["#ff0000","#ff8700","#ffd300","#deff0a","#a1ff0a","#0aff99","#0aefff","#147df5","#580aff","#be0aff"]}]},Rt={labels:["A","B","C","D","E","F","G","H","I","J"],datasets:[{label:"Mandate",data:[40,30,10,10,5,5,0,0,0,0],backgroundColor:["#ff0000","#ff8700","#ffd300","#deff0a","#a1ff0a","#0aff99","#0aefff","#147df5","#580aff","#be0aff"]}]},Ut={labels:["Mandate"],datasets:[{label:"A",data:[0],backgroundColor:"#ff0000"},{label:"B",data:[0],backgroundColor:"#ff8700"},{label:"C",data:[0],backgroundColor:"#ffd300"},{label:"D",data:[0],backgroundColor:"#deff0a"},{label:"E",data:[0],backgroundColor:"#a1ff0a"},{label:"F",data:[0],backgroundColor:"#0aff99"},{label:"G",data:[0],backgroundColor:"#0aefff"},{label:"H",data:[0],backgroundColor:"#147df5"},{label:"I",data:[0],backgroundColor:"#580aff"},{label:"J",data:[0],backgroundColor:"#be0aff"}]};function Et(e,r,l){const a=e.slice();return a[16]=r[l],a[17]=r,a[18]=l,a}function Tt(e){let r,l,a=e[0].labels[e[18]]+"",f,h,o,p,C;function M(){e[14].call(o,e[18])}return{c(){r=i("div"),l=i("label"),f=P(a),h=g(),o=i("input"),this.h()},l(s){r=d(s,"DIV",{class:!0});var u=b(r);l=d(u,"LABEL",{for:!0});var k=b(l);f=N(k,a),k.forEach(_),h=v(u),o=d(u,"INPUT",{id:!0,type:!0,min:!0,max:!0}),u.forEach(_),this.h()},h(){m(l,"for","input_party_"+e[18]),m(o,"id","input_party_"+e[18]),m(o,"type","number"),m(o,"min","0"),m(o,"max","100"),m(r,"class","input_field_vote_party")},m(s,u){Z(s,r,u),n(r,l),n(l,f),n(r,h),n(r,o),U(o,e[0].datasets[0].data[e[18]]),p||(C=ze(o,"input",M),p=!0)},p(s,u){e=s,u&1&&a!==(a=e[0].labels[e[18]]+"")&&he(f,a),u&1&&_e(o.value)!==e[0].datasets[0].data[e[18]]&&U(o,e[0].datasets[0].data[e[18]])},d(s){s&&_(r),p=!1,C()}}}function kt(e){let r,l="Achtung: Gesamtstimmen dürfen 100% nicht überschreiten!";return{c(){r=i("p"),r.textContent=l},l(a){r=d(a,"P",{"data-svelte-h":!0}),A(r)!=="svelte-154vc08"&&(r.textContent=l)},m(a,f){Z(a,r,f)},d(a){a&&_(r)}}}function Zt(e){let r,l="Stimmenanteile",a,f,h,o,p="Allgemeine Informationen",C,M,s,u,k='<label for="input_mandate_count">Abgeordnete</label>',ae,ne,D,me,z,Q,H='<label for="input_threshold">Sperrklausel</label>',x,K,W,w,Ge,qe,le,se,it='<label for="input_apportionment_method">Sitzzuteilungsverfahren</label>',Je,be,L,F,dt="D'Hondt",G,ft="Sainte-Laguë",q,ut="Hare-Niemeyer",Re,ie,X,Ue,S,Me,Y,de,pt="Sonstige:",Ze,ge,ve=(e[5]>=0?e[5].toFixed(2):0)+"",Ee,Qe,Te,re,ct="Mandatsverteilung",ke,J,fe,$,Ke,O,ee,Xe,B,Ye,De,$e,He,Ie,et,V,tt,Le,at,Se,we,j,nt,ht;X=new yt({props:{data:e[0],options:{responsive:!0,plugins:{datalabels:{display:!1},annotation:{annotations:e[3]>0?{majorityLine:{type:"line",yMin:e[3],yMax:e[3],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}}}}});let ue=Mt(e[0].datasets[0].data),y=[];for(let t=0;t<ue.length;t+=1)y[t]=Tt(Et(e,ue,t));let E=e[5]<0&&kt();return $=new Nt({props:{id:"mandatesChart",data:e[6],options:{responsive:!0,circumference:180,rotation:-90,plugins:{datalabels:{anchor:"end",align:"start",color:"white",formatter:Yt,font:{weight:"bold",size:20}}}}}}),ee=new yt({props:{data:e[1],options:{responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:e[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:e[7],xMax:e[7],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:e[8],xMax:e[8],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:Dt,font:{weight:"bold",size:20}},legend:{onClick:e[15]}}}}}),{c(){r=i("h1"),r.textContent=l,a=g(),f=i("section"),h=i("div"),o=i("p"),o.textContent=p,C=g(),M=i("table"),s=i("tr"),u=i("th"),u.innerHTML=k,ae=g(),ne=i("td"),D=i("input"),me=g(),z=i("tr"),Q=i("th"),Q.innerHTML=H,x=g(),K=i("td"),W=i("span"),w=i("input"),Ge=P(" %"),qe=g(),le=i("tr"),se=i("th"),se.innerHTML=it,Je=g(),be=i("td"),L=i("select"),F=i("option"),F.textContent=dt,G=i("option"),G.textContent=ft,q=i("option"),q.textContent=ut,Re=g(),ie=i("div"),Oe(X.$$.fragment),Ue=g(),S=i("div");for(let t=0;t<y.length;t+=1)y[t].c();Me=g(),Y=i("div"),de=i("p"),de.textContent=pt,Ze=g(),ge=i("p"),Ee=P(ve),Qe=g(),E&&E.c(),Te=g(),re=i("h1"),re.textContent=ct,ke=g(),J=i("section"),fe=i("div"),Oe($.$$.fragment),Ke=g(),O=i("div"),Oe(ee.$$.fragment),Xe=g(),B=i("p"),Ye=P("Mehrheit: "),De=P(e[9]),$e=P("/"),He=P(e[7]),et=g(),V=i("p"),tt=P("Zweidrittelmehrheit: "),Le=P(e[9]),at=P("/"),Se=P(e[8]),this.h()},l(t){r=d(t,"H1",{"data-svelte-h":!0}),A(r)!=="svelte-too001"&&(r.textContent=l),a=v(t),f=d(t,"SECTION",{class:!0});var c=b(f);h=d(c,"DIV",{class:!0});var I=b(h);o=d(I,"P",{"data-svelte-h":!0}),A(o)!=="svelte-7wsg44"&&(o.textContent=p),C=v(I),M=d(I,"TABLE",{});var R=b(M);s=d(R,"TR",{});var te=b(s);u=d(te,"TH",{"data-svelte-h":!0}),A(u)!=="svelte-1wy1b54"&&(u.innerHTML=k),ae=v(te),ne=d(te,"TD",{});var T=b(ne);D=d(T,"INPUT",{id:!0,type:!0,min:!0,max:!0}),T.forEach(_),te.forEach(_),me=v(R),z=d(R,"TR",{});var oe=b(z);Q=d(oe,"TH",{"data-svelte-h":!0}),A(Q)!=="svelte-e3yl1g"&&(Q.innerHTML=H),x=v(oe),K=d(oe,"TD",{});var _t=b(K);W=d(_t,"SPAN",{class:!0});var lt=b(W);w=d(lt,"INPUT",{id:!0,type:!0,min:!0,max:!0}),Ge=N(lt," %"),lt.forEach(_),_t.forEach(_),oe.forEach(_),qe=v(R),le=d(R,"TR",{});var je=b(le);se=d(je,"TH",{"data-svelte-h":!0}),A(se)!=="svelte-r745e5"&&(se.innerHTML=it),Je=v(je),be=d(je,"TD",{});var mt=b(be);L=d(mt,"SELECT",{class:!0});var Pe=b(L);F=d(Pe,"OPTION",{"data-svelte-h":!0}),A(F)!=="svelte-wlpdpc"&&(F.textContent=dt),G=d(Pe,"OPTION",{"data-svelte-h":!0}),A(G)!=="svelte-j8z6l1"&&(G.textContent=ft),q=d(Pe,"OPTION",{"data-svelte-h":!0}),A(q)!=="svelte-8h9q9v"&&(q.textContent=ut),Pe.forEach(_),mt.forEach(_),je.forEach(_),R.forEach(_),I.forEach(_),Re=v(c),ie=d(c,"DIV",{class:!0});var bt=b(ie);Be(X.$$.fragment,bt),bt.forEach(_),Ue=v(c),S=d(c,"DIV",{class:!0});var pe=b(S);for(let rt=0;rt<y.length;rt+=1)y[rt].l(pe);Me=v(pe),Y=d(pe,"DIV",{class:!0});var Ae=b(Y);de=d(Ae,"P",{"data-svelte-h":!0}),A(de)!=="svelte-1p0cp1c"&&(de.textContent=pt),Ze=v(Ae),ge=d(Ae,"P",{});var gt=b(ge);Ee=N(gt,ve),gt.forEach(_),Ae.forEach(_),Qe=v(pe),E&&E.l(pe),pe.forEach(_),c.forEach(_),Te=v(t),re=d(t,"H1",{"data-svelte-h":!0}),A(re)!=="svelte-jg7skr"&&(re.textContent=ct),ke=v(t),J=d(t,"SECTION",{class:!0});var Ne=b(J);fe=d(Ne,"DIV",{class:!0});var vt=b(fe);Be($.$$.fragment,vt),vt.forEach(_),Ke=v(Ne),O=d(Ne,"DIV",{class:!0});var ce=b(O);Be(ee.$$.fragment,ce),Xe=v(ce),B=d(ce,"P",{class:!0});var Ce=b(B);Ye=N(Ce,"Mehrheit: "),De=N(Ce,e[9]),$e=N(Ce,"/"),He=N(Ce,e[7]),Ce.forEach(_),et=v(ce),V=d(ce,"P",{class:!0});var ye=b(V);tt=N(ye,"Zweidrittelmehrheit: "),Le=N(ye,e[9]),at=N(ye,"/"),Se=N(ye,e[8]),ye.forEach(_),ce.forEach(_),Ne.forEach(_),this.h()},h(){m(D,"id","input_mandate_count"),m(D,"type","number"),m(D,"min","0"),m(D,"max","1000"),m(w,"id","input_threshold"),m(w,"type","number"),m(w,"min","0"),m(w,"max","100"),m(W,"class","valuePadding"),F.__value="D'Hondt",U(F,F.__value),G.__value="Sainte-Laguë",U(G,G.__value),q.__value="Hare-Niemeyer",U(q,q.__value),m(L,"class","selectApportionmentMethod"),e[4]===void 0&&St(()=>e[13].call(L)),m(h,"class","info_container"),m(ie,"class","bar_container"),m(Y,"class","input_field_vote_party"),m(S,"class","input_fields_vote"),m(f,"class","vote_share_section"),m(fe,"class","pie_container"),m(B,"class",Ie="majorityText "+(e[9]<e[7]?"red":"green")),m(V,"class",we="majorityText "+(e[9]<e[8]?"red":"green")),m(O,"class","stack_container"),m(J,"class","mandate_section")},m(t,c){Z(t,r,c),Z(t,a,c),Z(t,f,c),n(f,h),n(h,o),n(h,C),n(h,M),n(M,s),n(s,u),n(s,ae),n(s,ne),n(ne,D),U(D,e[2]),n(M,me),n(M,z),n(z,Q),n(z,x),n(z,K),n(K,W),n(W,w),U(w,e[3]),n(W,Ge),n(M,qe),n(M,le),n(le,se),n(le,Je),n(le,be),n(be,L),n(L,F),n(L,G),n(L,q),Ct(L,e[4],!0),n(f,Re),n(f,ie),Ve(X,ie,null),n(f,Ue),n(f,S);for(let I=0;I<y.length;I+=1)y[I]&&y[I].m(S,null);n(S,Me),n(S,Y),n(Y,de),n(Y,Ze),n(Y,ge),n(ge,Ee),n(S,Qe),E&&E.m(S,null),Z(t,Te,c),Z(t,re,c),Z(t,ke,c),Z(t,J,c),n(J,fe),Ve($,fe,null),n(J,Ke),n(J,O),Ve(ee,O,null),n(O,Xe),n(O,B),n(B,Ye),n(B,De),n(B,$e),n(B,He),n(O,et),n(O,V),n(V,tt),n(V,Le),n(V,at),n(V,Se),j=!0,nt||(ht=[ze(D,"input",e[11]),ze(w,"input",e[12]),ze(L,"change",e[13])],nt=!0)},p(t,[c]){c&4&&_e(D.value)!==t[2]&&U(D,t[2]),c&8&&_e(w.value)!==t[3]&&U(w,t[3]),c&16&&Ct(L,t[4]);const I={};if(c&1&&(I.data=t[0]),c&8&&(I.options={responsive:!0,plugins:{datalabels:{display:!1},annotation:{annotations:t[3]>0?{majorityLine:{type:"line",yMin:t[3],yMax:t[3],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}}}),X.$set(I),c&1){ue=Mt(t[0].datasets[0].data);let T;for(T=0;T<ue.length;T+=1){const oe=Et(t,ue,T);y[T]?y[T].p(oe,c):(y[T]=Tt(oe),y[T].c(),y[T].m(S,Me))}for(;T<y.length;T+=1)y[T].d(1);y.length=ue.length}(!j||c&32)&&ve!==(ve=(t[5]>=0?t[5].toFixed(2):0)+"")&&he(Ee,ve),t[5]<0?E||(E=kt(),E.c(),E.m(S,null)):E&&(E.d(1),E=null);const R={};c&64&&(R.data=t[6]),$.$set(R);const te={};c&2&&(te.data=t[1]),c&390&&(te.options={responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:t[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:t[7],xMax:t[7],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:t[8],xMax:t[8],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:Dt,font:{weight:"bold",size:20}},legend:{onClick:t[15]}}}),ee.$set(te),(!j||c&512)&&he(De,t[9]),(!j||c&128)&&he(He,t[7]),(!j||c&640&&Ie!==(Ie="majorityText "+(t[9]<t[7]?"red":"green")))&&m(B,"class",Ie),(!j||c&512)&&he(Le,t[9]),(!j||c&256)&&he(Se,t[8]),(!j||c&768&&we!==(we="majorityText "+(t[9]<t[8]?"red":"green")))&&m(V,"class",we)},i(t){j||(xe(X.$$.fragment,t),xe($.$$.fragment,t),xe(ee.$$.fragment,t),j=!0)},o(t){We(X.$$.fragment,t),We($.$$.fragment,t),We(ee.$$.fragment,t),j=!1},d(t){t&&(_(r),_(a),_(f),_(Te),_(re),_(ke),_(J)),Fe(X),Pt(y,t),E&&E.d(),Fe($),Fe(ee),nt=!1,wt(ht)}}}function Qt(e,r,l){let a=[],f=[],h=[...e];for(let o in e)f.push(1),a.push(0),e[o]<l&&(e[o]=0,h[o]=0);for(let o=0;o<r;o++){let p=h.indexOf(Math.max(...h));f[p]=f[p]+1,a[p]=a[p]+1,h[p]=e[p]/f[p]}return a}function Kt(e,r,l){let a=[],f=new Array(e.length).fill(.5),h=[...e];for(let o in e)f.push(1),a.push(0),e[o]<l&&(e[o]=0,h[o]=0);for(let o=0;o<r;o++){let p=h.indexOf(Math.max(...h));f[p]=f[p]+1,a[p]=a[p]+1,h[p]=e[p]/f[p]}return a}function Xt(e,r,l){let a=[];const o=e.filter(s=>s>=l).reduce((s,u)=>s+u,0)/r;a=e.map(s=>{if(s<l)return 0;const u=Math.floor(s/o),k=s%o;return{initialMandates:u,remainder:k}});let p=a.reduce((s,u)=>s+(u.initialMandates||0),0);const C=r-p,M=a.map((s,u)=>({index:u,remainder:s.remainder||0})).sort((s,u)=>u.remainder-s.remainder);for(let s=0;s<C;s++)a[M[s].index].initialMandates+=1;return a.map(s=>s.initialMandates||0)}const Yt=function(e){return e>0?e:""},Dt=function(e){return e>0?e:""};function $t(e,r,l){Ot.register(Bt,Vt,zt,xt,Wt,Ft,Gt,qt);let a=ot("data"),f=ot("mandateData"),h=ot("majorityData"),o=10,p=4,C="D'Hondt",M=0,s=0,u=[],k,ae=0;function ne(){o=_e(this.value),l(2,o)}function D(){p=_e(this.value),l(3,p)}function me(){C=At(this),l(4,C)}function z(H){a.datasets[0].data[H]=_e(this.value),l(0,a),l(5,k),l(4,C),l(2,o),l(3,p)}const Q=function(H,x){if(x.datasetIndex!==void 0){const K=x.datasetIndex,W=h.datasets[K].hidden;l(1,h.datasets[K].hidden=!W,h)}};return e.$$.update=()=>{if(e.$$.dirty&4&&l(7,M=Math.floor(o/2+1)),e.$$.dirty&4&&l(8,s=Math.ceil(o/3*2)),e.$$.dirty&61&&(l(5,k=100-a.datasets[0].data.reduce((H,x)=>H+x,0)),k>=0&&(l(0,a),l(5,k),l(4,C),l(2,o),l(3,p),C=="D'Hondt"?l(10,u=Qt([...a.datasets[0].data],o,p)):C=="Sainte-Laguë"?l(10,u=Kt([...a.datasets[0].data],o,p)):C=="Hare-Niemeyer"&&l(10,u=Xt([...a.datasets[0].data],o,p)))),e.$$.dirty&1024){l(6,f.datasets[0].data=u,f);for(let H in u)l(1,h.datasets[H].data=[u[H]],h)}e.$$.dirty&514&&(l(9,ae=0),h.datasets.forEach((H,x)=>{H.hidden||l(9,ae+=H.data[0])}))},[a,h,o,p,C,k,f,M,s,ae,u,ne,D,me,z,Q]}class ea extends It{constructor(r){super(),Lt(this,r,$t,Zt,Ht,{})}}function ta(e){let r,l;return r=new ea({}),{c(){Oe(r.$$.fragment)},l(a){Be(r.$$.fragment,a)},m(a,f){Ve(r,a,f),l=!0},p:jt,i(a){l||(xe(r.$$.fragment,a),l=!0)},o(a){We(r.$$.fragment,a),l=!1},d(a){Fe(r,a)}}}function aa(e){return st("data",Jt),st("mandateData",Rt),st("majorityData",Ut),[]}class oa extends It{constructor(r){super(),Lt(this,r,aa,ta,Ht,{})}}export{oa as component};
