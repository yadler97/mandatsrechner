import{s as Ie,b as Pe,r as ke,g as se,n as He,d as ie}from"../chunks/eX-Ury47.js";import{S as Se,i as je,e as u,s as y,t as N,n as xt,c as f,k as x,f as C,a as g,d as m,b as O,o as Ot,l as _,p as G,g as Q,h as n,q as ye,r as Vt,u as zt,z as ht,j as ct,v as Wt,w as Bt,x as Rt,m as Ae,y as Ne}from"../chunks/C1hBpTSN.js";import{data as xe,mandateData as Oe,majorityData as Ve}from"../chunks/DWf01OZ1.js";import{e as Ce}from"../chunks/D6YF6ztN.js";import{B as Me,P as ze,C as We,p as Be,a as Re,b as Fe,c as qe,d as Ue,L as Ze,e as Ge,f as Qe}from"../chunks/BUV7Wf35.js";function Ee(t,l,r){const a=t.slice();return a[17]=l[r],a[18]=l,a[19]=r,a}function Te(t){let l,r,a=t[0].labels[t[19]]+"",o,c,s,d,v;function b(){t[15].call(s,t[19])}return{c(){l=u("div"),r=u("label"),o=N(a),c=y(),s=u("input"),this.h()},l(i){l=f(i,"DIV",{class:!0});var p=g(l);r=f(p,"LABEL",{for:!0});var L=g(r);o=O(L,a),L.forEach(m),c=C(p),s=f(p,"INPUT",{id:!0,type:!0,min:!0,max:!0}),p.forEach(m),this.h()},h(){_(r,"for","input_party_"+t[19]),_(s,"id","input_party_"+t[19]),_(s,"type","number"),_(s,"min","0"),_(s,"max","100"),_(l,"class","input_field_vote_party")},m(i,p){Q(i,l,p),n(l,r),n(r,o),n(l,c),n(l,s),G(s,t[0].datasets[0].data[t[19]]),d||(v=zt(s,"input",b),d=!0)},p(i,p){t=i,p&1&&a!==(a=t[0].labels[t[19]]+"")&&ct(o,a),p&1&&ht(s.value)!==t[0].datasets[0].data[t[19]]&&G(s,t[0].datasets[0].data[t[19]])},d(i){i&&m(l),d=!1,v()}}}function De(t){let l,r="Achtung: Gesamtstimmen dürfen 100% nicht überschreiten!";return{c(){l=u("p"),l.textContent=r},l(a){l=f(a,"P",{"data-svelte-h":!0}),x(l)!=="svelte-154vc08"&&(l.textContent=r)},m(a,o){Q(a,l,o)},d(a){a&&m(l)}}}function Je(t){let l,r="Stimmenanteile",a,o,c,s,d="Allgemeine Informationen",v,b,i,p,L='<label for="input_mandate_count">Abgeordnete</label>',et,at,I,mt,B,J,Ct='<label for="input_threshold">Sperrklausel</label>',E,S,P,T,Ft,qt,nt,st,oe='<label for="input_apportionment_method">Sitzzuteilungsverfahren</label>',Ut,_t,k,R,de="D'Hondt",F,ue="Sainte-Laguë",q,fe="Hare-Niemeyer",Zt,it,K,Gt,H,Mt,X,ot,pe="Sonstige:",Qt,gt,vt=(t[5]>=0?t[5].toFixed(2):0)+"",Et,Jt,Tt,rt,ce="Mandatsverteilung",Dt,U,dt,Y,Kt,V,$,Xt,z,Yt,wt,$t,Lt,It,te,W,ee,St,ae,jt,Pt,A,ne,he;K=new Me({props:{data:t[0],options:{responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:we},annotation:{annotations:t[3]>0?{majorityLine:{type:"line",yMin:t[3],yMax:t[3],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{y:{suggestedMax:Math.max(...t[0].labels.map(t[14]))+5}}}}});let ut=Ce(t[0].datasets[0].data),M=[];for(let e=0;e<ut.length;e+=1)M[e]=Te(Ee(t,ut,e));let D=t[5]<0&&De();return Y=new ze({props:{id:"mandatesChart",data:t[6],options:{responsive:!0,circumference:180,rotation:-90,plugins:{datalabels:{anchor:"end",align:"start",color:"white",formatter:$e,font:{weight:"bold",size:20}}}}}}),$=new Me({props:{data:t[1],options:{responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:t[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:t[7],xMax:t[7],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:t[8],xMax:t[8],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:Le,font:{weight:"bold",size:20}},legend:{onClick:t[16]}}}}}),{c(){l=u("h1"),l.textContent=r,a=y(),o=u("section"),c=u("div"),s=u("p"),s.textContent=d,v=y(),b=u("table"),i=u("tr"),p=u("th"),p.innerHTML=L,et=y(),at=u("td"),I=u("input"),mt=y(),B=u("tr"),J=u("th"),J.innerHTML=Ct,E=y(),S=u("td"),P=u("span"),T=u("input"),Ft=N(" %"),qt=y(),nt=u("tr"),st=u("th"),st.innerHTML=oe,Ut=y(),_t=u("td"),k=u("select"),R=u("option"),R.textContent=de,F=u("option"),F.textContent=ue,q=u("option"),q.textContent=fe,Zt=y(),it=u("div"),xt(K.$$.fragment),Gt=y(),H=u("div");for(let e=0;e<M.length;e+=1)M[e].c();Mt=y(),X=u("div"),ot=u("p"),ot.textContent=pe,Qt=y(),gt=u("p"),Et=N(vt),Jt=y(),D&&D.c(),Tt=y(),rt=u("h1"),rt.textContent=ce,Dt=y(),U=u("section"),dt=u("div"),xt(Y.$$.fragment),Kt=y(),V=u("div"),xt($.$$.fragment),Xt=y(),z=u("p"),Yt=N("Mehrheit: "),wt=N(t[9]),$t=N("/"),Lt=N(t[7]),te=y(),W=u("p"),ee=N("Zweidrittelmehrheit: "),St=N(t[9]),ae=N("/"),jt=N(t[8]),this.h()},l(e){l=f(e,"H1",{"data-svelte-h":!0}),x(l)!=="svelte-too001"&&(l.textContent=r),a=C(e),o=f(e,"SECTION",{class:!0});var h=g(o);c=f(h,"DIV",{class:!0});var j=g(c);s=f(j,"P",{"data-svelte-h":!0}),x(s)!=="svelte-7wsg44"&&(s.textContent=d),v=C(j),b=f(j,"TABLE",{});var Z=g(b);i=f(Z,"TR",{});var tt=g(i);p=f(tt,"TH",{"data-svelte-h":!0}),x(p)!=="svelte-1wy1b54"&&(p.innerHTML=L),et=C(tt),at=f(tt,"TD",{});var w=g(at);I=f(w,"INPUT",{id:!0,type:!0,min:!0,max:!0}),w.forEach(m),tt.forEach(m),mt=C(Z),B=f(Z,"TR",{});var lt=g(B);J=f(lt,"TH",{"data-svelte-h":!0}),x(J)!=="svelte-e3yl1g"&&(J.innerHTML=Ct),E=C(lt),S=f(lt,"TD",{});var me=g(S);P=f(me,"SPAN",{class:!0});var re=g(P);T=f(re,"INPUT",{id:!0,type:!0,min:!0,max:!0}),Ft=O(re," %"),re.forEach(m),me.forEach(m),lt.forEach(m),qt=C(Z),nt=f(Z,"TR",{});var kt=g(nt);st=f(kt,"TH",{"data-svelte-h":!0}),x(st)!=="svelte-r745e5"&&(st.innerHTML=oe),Ut=C(kt),_t=f(kt,"TD",{});var _e=g(_t);k=f(_e,"SELECT",{class:!0});var Ht=g(k);R=f(Ht,"OPTION",{"data-svelte-h":!0}),x(R)!=="svelte-wlpdpc"&&(R.textContent=de),F=f(Ht,"OPTION",{"data-svelte-h":!0}),x(F)!=="svelte-j8z6l1"&&(F.textContent=ue),q=f(Ht,"OPTION",{"data-svelte-h":!0}),x(q)!=="svelte-8h9q9v"&&(q.textContent=fe),Ht.forEach(m),_e.forEach(m),kt.forEach(m),Z.forEach(m),j.forEach(m),Zt=C(h),it=f(h,"DIV",{class:!0});var ge=g(it);Ot(K.$$.fragment,ge),ge.forEach(m),Gt=C(h),H=f(h,"DIV",{class:!0});var ft=g(H);for(let le=0;le<M.length;le+=1)M[le].l(ft);Mt=C(ft),X=f(ft,"DIV",{class:!0});var At=g(X);ot=f(At,"P",{"data-svelte-h":!0}),x(ot)!=="svelte-1p0cp1c"&&(ot.textContent=pe),Qt=C(At),gt=f(At,"P",{});var ve=g(gt);Et=O(ve,vt),ve.forEach(m),At.forEach(m),Jt=C(ft),D&&D.l(ft),ft.forEach(m),h.forEach(m),Tt=C(e),rt=f(e,"H1",{"data-svelte-h":!0}),x(rt)!=="svelte-jg7skr"&&(rt.textContent=ce),Dt=C(e),U=f(e,"SECTION",{class:!0});var Nt=g(U);dt=f(Nt,"DIV",{class:!0});var be=g(dt);Ot(Y.$$.fragment,be),be.forEach(m),Kt=C(Nt),V=f(Nt,"DIV",{class:!0});var pt=g(V);Ot($.$$.fragment,pt),Xt=C(pt),z=f(pt,"P",{class:!0});var bt=g(z);Yt=O(bt,"Mehrheit: "),wt=O(bt,t[9]),$t=O(bt,"/"),Lt=O(bt,t[7]),bt.forEach(m),te=C(pt),W=f(pt,"P",{class:!0});var yt=g(W);ee=O(yt,"Zweidrittelmehrheit: "),St=O(yt,t[9]),ae=O(yt,"/"),jt=O(yt,t[8]),yt.forEach(m),pt.forEach(m),Nt.forEach(m),this.h()},h(){_(I,"id","input_mandate_count"),_(I,"type","number"),_(I,"min","0"),_(I,"max","1000"),_(T,"id","input_threshold"),_(T,"type","number"),_(T,"min","0"),_(T,"max","100"),_(P,"class","valuePadding"),R.__value="D'Hondt",G(R,R.__value),F.__value="Sainte-Laguë",G(F,F.__value),q.__value="Hare-Niemeyer",G(q,q.__value),_(k,"class","selectApportionmentMethod"),t[4]===void 0&&Pe(()=>t[13].call(k)),_(c,"class","info_container"),_(it,"class","bar_container"),_(X,"class","input_field_vote_party"),_(H,"class","input_fields_vote"),_(o,"class","vote_share_section"),_(dt,"class","pie_container"),_(z,"class",It="majorityText "+(t[9]<t[7]?"red":"green")),_(W,"class",Pt="majorityText "+(t[9]<t[8]?"red":"green")),_(V,"class","stack_container"),_(U,"class","mandate_section")},m(e,h){Q(e,l,h),Q(e,a,h),Q(e,o,h),n(o,c),n(c,s),n(c,v),n(c,b),n(b,i),n(i,p),n(i,et),n(i,at),n(at,I),G(I,t[2]),n(b,mt),n(b,B),n(B,J),n(B,E),n(B,S),n(S,P),n(P,T),G(T,t[3]),n(P,Ft),n(b,qt),n(b,nt),n(nt,st),n(nt,Ut),n(nt,_t),n(_t,k),n(k,R),n(k,F),n(k,q),ye(k,t[4],!0),n(o,Zt),n(o,it),Vt(K,it,null),n(o,Gt),n(o,H);for(let j=0;j<M.length;j+=1)M[j]&&M[j].m(H,null);n(H,Mt),n(H,X),n(X,ot),n(X,Qt),n(X,gt),n(gt,Et),n(H,Jt),D&&D.m(H,null),Q(e,Tt,h),Q(e,rt,h),Q(e,Dt,h),Q(e,U,h),n(U,dt),Vt(Y,dt,null),n(U,Kt),n(U,V),Vt($,V,null),n(V,Xt),n(V,z),n(z,Yt),n(z,wt),n(z,$t),n(z,Lt),n(V,te),n(V,W),n(W,ee),n(W,St),n(W,ae),n(W,jt),A=!0,ne||(he=[zt(I,"input",t[11]),zt(T,"input",t[12]),zt(k,"change",t[13])],ne=!0)},p(e,[h]){h&4&&ht(I.value)!==e[2]&&G(I,e[2]),h&8&&ht(T.value)!==e[3]&&G(T,e[3]),h&16&&ye(k,e[4]);const j={};if(h&1&&(j.data=e[0]),h&9&&(j.options={responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:we},annotation:{annotations:e[3]>0?{majorityLine:{type:"line",yMin:e[3],yMax:e[3],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{y:{suggestedMax:Math.max(...e[0].labels.map(e[14]))+5}}}),K.$set(j),h&1){ut=Ce(e[0].datasets[0].data);let w;for(w=0;w<ut.length;w+=1){const lt=Ee(e,ut,w);M[w]?M[w].p(lt,h):(M[w]=Te(lt),M[w].c(),M[w].m(H,Mt))}for(;w<M.length;w+=1)M[w].d(1);M.length=ut.length}(!A||h&32)&&vt!==(vt=(e[5]>=0?e[5].toFixed(2):0)+"")&&ct(Et,vt),e[5]<0?D||(D=De(),D.c(),D.m(H,null)):D&&(D.d(1),D=null);const Z={};h&64&&(Z.data=e[6]),Y.$set(Z);const tt={};h&2&&(tt.data=e[1]),h&390&&(tt.options={responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:e[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:e[7],xMax:e[7],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:e[8],xMax:e[8],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:Le,font:{weight:"bold",size:20}},legend:{onClick:e[16]}}}),$.$set(tt),(!A||h&512)&&ct(wt,e[9]),(!A||h&128)&&ct(Lt,e[7]),(!A||h&640&&It!==(It="majorityText "+(e[9]<e[7]?"red":"green")))&&_(z,"class",It),(!A||h&512)&&ct(St,e[9]),(!A||h&256)&&ct(jt,e[8]),(!A||h&768&&Pt!==(Pt="majorityText "+(e[9]<e[8]?"red":"green")))&&_(W,"class",Pt)},i(e){A||(Wt(K.$$.fragment,e),Wt(Y.$$.fragment,e),Wt($.$$.fragment,e),A=!0)},o(e){Bt(K.$$.fragment,e),Bt(Y.$$.fragment,e),Bt($.$$.fragment,e),A=!1},d(e){e&&(m(l),m(a),m(o),m(Tt),m(rt),m(Dt),m(U)),Rt(K),Ae(M,e),D&&D.d(),Rt(Y),Rt($),ne=!1,ke(he)}}}function Ke(t,l,r){let a=[],o=[],c=[...t];for(let s in t)o.push(1),a.push(0),t[s]<r&&(t[s]=0,c[s]=0);for(let s=0;s<l;s++){let d=c.indexOf(Math.max(...c));o[d]=o[d]+1,a[d]=a[d]+1,c[d]=t[d]/o[d]}return a}function Xe(t,l,r){let a=[],o=new Array(t.length).fill(.5),c=[...t];for(let s in t)o.push(1),a.push(0),t[s]<r&&(t[s]=0,c[s]=0);for(let s=0;s<l;s++){let d=c.indexOf(Math.max(...c));o[d]=o[d]+1,a[d]=a[d]+1,c[d]=t[d]/o[d]}return a}function Ye(t,l,r){let a=[];const s=t.filter(i=>i>=r).reduce((i,p)=>i+p,0)/l;a=t.map(i=>{if(i<r)return 0;const p=Math.floor(i/s),L=i%s;return{initialMandates:p,remainder:L}});let d=a.reduce((i,p)=>i+(p.initialMandates||0),0);const v=l-d,b=a.map((i,p)=>({index:p,remainder:i.remainder||0})).sort((i,p)=>p.remainder-i.remainder);for(let i=0;i<v;i++)a[b[i].index].initialMandates+=1;return a.map(i=>i.initialMandates||0)}const we=(t,l)=>{const{chart:r,dataIndex:a,datasetIndex:o}=l,c=r.data.datasets.length-1;return o!==c?"":r.data.datasets.reduce((d,v)=>{const b=v.data[a];return typeof b=="number"?d+b:d},0).toLocaleString("de-AT",{minimumFractionDigits:2,maximumFractionDigits:2})},$e=function(t){return t>0?t:""},Le=function(t){return t>0?t:""};function ta(t,l,r){We.register(Be,Re,Fe,qe,Ue,Ze,Ge,Qe);let a=se("data"),o=se("mandateData"),c=se("majorityData"),s=10,d=4,v="D'Hondt",b=0,i=0,p=[],L,et=0;function at(){s=ht(this.value),r(2,s)}function I(){d=ht(this.value),r(3,d)}function mt(){v=Ne(this),r(4,v)}const B=(E,S)=>a.datasets.reduce((P,T)=>P+(T.data[S]||0),0);function J(E){a.datasets[0].data[E]=ht(this.value),r(0,a),r(5,L),r(4,v),r(2,s),r(3,d)}const Ct=function(E,S){if(S.datasetIndex!==void 0){const P=S.datasetIndex,T=c.datasets[P].hidden;r(1,c.datasets[P].hidden=!T,c)}};return t.$$.update=()=>{if(t.$$.dirty&4&&r(7,b=Math.floor(s/2+1)),t.$$.dirty&4&&r(8,i=Math.ceil(s/3*2)),t.$$.dirty&61&&(r(5,L=100-a.datasets[0].data.reduce((E,S)=>E+S,0)),L>=0&&(r(0,a),r(5,L),r(4,v),r(2,s),r(3,d),v=="D'Hondt"?r(10,p=Ke([...a.datasets[0].data],s,d)):v=="Sainte-Laguë"?r(10,p=Xe([...a.datasets[0].data],s,d)):v=="Hare-Niemeyer"&&r(10,p=Ye([...a.datasets[0].data],s,d)))),t.$$.dirty&1024){r(6,o.datasets[0].data=p,o);for(let E in p)r(1,c.datasets[E].data=[p[E]],c)}t.$$.dirty&514&&(r(9,et=0),c.datasets.forEach((E,S)=>{E.hidden||r(9,et+=E.data[0])}))},[a,c,s,d,v,L,o,b,i,et,p,at,I,mt,B,J,Ct]}class ea extends Se{constructor(l){super(),je(this,l,ta,Je,Ie,{})}}function aa(t){let l,r;return l=new ea({}),{c(){xt(l.$$.fragment)},l(a){Ot(l.$$.fragment,a)},m(a,o){Vt(l,a,o),r=!0},p:He,i(a){r||(Wt(l.$$.fragment,a),r=!0)},o(a){Bt(l.$$.fragment,a),r=!1},d(a){Rt(l,a)}}}function na(t){return ie("data",xe),ie("mandateData",Oe),ie("majorityData",Ve),[]}class da extends Se{constructor(l){super(),je(this,l,na,aa,Ie,{})}}export{da as component};
