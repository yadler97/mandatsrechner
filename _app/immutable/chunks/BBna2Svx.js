import{s as Te,g as Y,c as Ht,a as te}from"./hsm1TwBJ.js";import{S as De,i as je,e as d,s as b,t as D,l as ee,c as f,k as O,f as C,a as g,b as j,d as c,m as ae,n as y,g as R,h as a,o as ne,j as tt,p as re,q as le,r as ie,u as we,v as _e,w as ke,x as Me}from"./C_t1LkpG.js";import{B as ge,e as ve,P as Se,C as Ie,p as Le,a as Pe,b as Ae,c as He,d as Ve,L as We,f as xe,g as ze}from"./eUnNzeV8.js";function be(t,l,s){const n=t.slice();return n[18]=l[s],n[19]=l,n[20]=s,n}function Ce(t){let l,s,n=t[3].labels[t[20]]+"",o,u,r,p,w;function v(){t[16].call(r,t[20])}return{c(){l=d("div"),s=d("label"),o=D(n),u=b(),r=d("input"),this.h()},l(i){l=f(i,"DIV",{class:!0});var h=g(l);s=f(h,"LABEL",{for:!0});var k=g(s);o=j(k,n),k.forEach(c),u=C(h),r=f(h,"INPUT",{id:!0,type:!0,min:!0,max:!0}),h.forEach(c),this.h()},h(){y(s,"for","input_party_"+t[20]),y(r,"id","input_party_"+t[20]),y(r,"type","number"),y(r,"min","0"),y(r,"max","100"),y(l,"class","input_field_vote_party")},m(i,h){R(i,l,h),a(l,s),a(s,o),a(l,u),a(l,r),_e(r,t[3].datasets[0].data[t[20]]),p||(w=ke(r,"input",v),p=!0)},p(i,h){t=i,h&8&&n!==(n=t[3].labels[t[20]]+"")&&tt(o,n),h&8&&Me(r.value)!==t[3].datasets[0].data[t[20]]&&_e(r,t[3].datasets[0].data[t[20]])},d(i){i&&c(l),p=!1,w()}}}function ye(t){let l,s="Achtung: Gesamtstimmen dürfen 100% nicht überschreiten!";return{c(){l=d("p"),l.textContent=s},l(n){l=f(n,"P",{"data-svelte-h":!0}),O(l)!=="svelte-154vc08"&&(l.textContent=s)},m(n,o){R(n,l,o)},d(n){n&&c(l)}}}function Be(t){let l,s="Stimmenanteile",n,o,u,r,p="Allgemeine Informationen",w,v,i,h,k="Wahltermin",ht,q,et,P,A,V,bt="Abgeordnete",ct,_,W,at,$,nt,se="Sperrklausel",Vt,rt,Wt,xt,zt,J,lt,oe="Sitzzuteilungsverfahren",Bt,pt,$t,Nt,it,F,Ot,S,Ct,Z,st,de="Sonstige:",Rt,mt,_t=(t[0]>=0?t[0].toFixed(2):0)+"",yt,qt,Et,K,fe="Mandatsverteilung",Mt,N,ot,G,Ft,x,Q,Zt,z,Gt,Tt,Qt,Dt,jt,Ut,B,Jt,wt,Kt,kt,St,I;F=new ge({props:{data:t[3],options:{responsive:!0,plugins:{datalabels:{display:!1},annotation:{annotations:t[12]>0?{majorityLine:{type:"line",yMin:t[12],yMax:t[12],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}}}}});let dt=ve(t[3].datasets[0].data),E=[];for(let e=0;e<dt.length;e+=1)E[e]=Ce(be(t,dt,e));let M=t[0]<-1e-5&&ye();return G=new Se({props:{id:"mandatesChart",data:t[7],options:{responsive:!0,circumference:180,rotation:-90,plugins:{datalabels:{anchor:"end",align:"start",color:"white",formatter:Re,font:{weight:"bold",size:20}}}}}}),Q=new ge({props:{data:t[1],options:{responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:t[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:t[4],xMax:t[4],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:t[5],xMax:t[5],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:Ee,font:{weight:"bold",size:20}},legend:{onClick:t[17]}}}}}),{c(){l=d("h1"),l.textContent=s,n=b(),o=d("section"),u=d("div"),r=d("p"),r.textContent=p,w=b(),v=d("table"),i=d("tr"),h=d("th"),h.textContent=k,ht=b(),q=d("td"),et=D(t[14]),P=b(),A=d("tr"),V=d("th"),V.textContent=bt,ct=b(),_=d("td"),W=D(t[2]),at=b(),$=d("tr"),nt=d("th"),nt.textContent=se,Vt=b(),rt=d("td"),Wt=D(t[12]),xt=D(" %"),zt=b(),J=d("tr"),lt=d("th"),lt.textContent=oe,Bt=b(),pt=d("td"),$t=D(t[13]),Nt=b(),it=d("div"),ee(F.$$.fragment),Ot=b(),S=d("div");for(let e=0;e<E.length;e+=1)E[e].c();Ct=b(),Z=d("div"),st=d("p"),st.textContent=de,Rt=b(),mt=d("p"),yt=D(_t),qt=b(),M&&M.c(),Et=b(),K=d("h1"),K.textContent=fe,Mt=b(),N=d("section"),ot=d("div"),ee(G.$$.fragment),Ft=b(),x=d("div"),ee(Q.$$.fragment),Zt=b(),z=d("p"),Gt=D("Mehrheit: "),Tt=D(t[6]),Qt=D("/"),Dt=D(t[4]),Ut=b(),B=d("p"),Jt=D("Zweidrittelmehrheit: "),wt=D(t[6]),Kt=D("/"),kt=D(t[5]),this.h()},l(e){l=f(e,"H1",{"data-svelte-h":!0}),O(l)!=="svelte-too001"&&(l.textContent=s),n=C(e),o=f(e,"SECTION",{class:!0});var m=g(o);u=f(m,"DIV",{class:!0});var L=g(u);r=f(L,"P",{"data-svelte-h":!0}),O(r)!=="svelte-7wsg44"&&(r.textContent=p),w=C(L),v=f(L,"TABLE",{});var H=g(v);i=f(H,"TR",{});var U=g(i);h=f(U,"TH",{"data-svelte-h":!0}),O(h)!=="svelte-1cjbgjn"&&(h.textContent=k),ht=C(U),q=f(U,"TD",{});var T=g(q);et=j(T,t[14]),T.forEach(c),U.forEach(c),P=C(H),A=f(H,"TR",{});var X=g(A);V=f(X,"TH",{"data-svelte-h":!0}),O(V)!=="svelte-m7jygq"&&(V.textContent=bt),ct=C(X),_=f(X,"TD",{});var ue=g(_);W=j(ue,t[2]),ue.forEach(c),X.forEach(c),at=C(H),$=f(H,"TR",{});var It=g($);nt=f(It,"TH",{"data-svelte-h":!0}),O(nt)!=="svelte-1k72mb"&&(nt.textContent=se),Vt=C(It),rt=f(It,"TD",{});var Xt=g(rt);Wt=j(Xt,t[12]),xt=j(Xt," %"),Xt.forEach(c),It.forEach(c),zt=C(H),J=f(H,"TR",{});var Lt=g(J);lt=f(Lt,"TH",{"data-svelte-h":!0}),O(lt)!=="svelte-1lrysmd"&&(lt.textContent=oe),Bt=C(Lt),pt=f(Lt,"TD",{});var he=g(pt);$t=j(he,t[13]),he.forEach(c),Lt.forEach(c),H.forEach(c),L.forEach(c),Nt=C(m),it=f(m,"DIV",{class:!0});var ce=g(it);ae(F.$$.fragment,ce),ce.forEach(c),Ot=C(m),S=f(m,"DIV",{class:!0});var ft=g(S);for(let Yt=0;Yt<E.length;Yt+=1)E[Yt].l(ft);Ct=C(ft),Z=f(ft,"DIV",{class:!0});var Pt=g(Z);st=f(Pt,"P",{"data-svelte-h":!0}),O(st)!=="svelte-1p0cp1c"&&(st.textContent=de),Rt=C(Pt),mt=f(Pt,"P",{});var pe=g(mt);yt=j(pe,_t),pe.forEach(c),Pt.forEach(c),qt=C(ft),M&&M.l(ft),ft.forEach(c),m.forEach(c),Et=C(e),K=f(e,"H1",{"data-svelte-h":!0}),O(K)!=="svelte-jg7skr"&&(K.textContent=fe),Mt=C(e),N=f(e,"SECTION",{class:!0});var At=g(N);ot=f(At,"DIV",{class:!0});var me=g(ot);ae(G.$$.fragment,me),me.forEach(c),Ft=C(At),x=f(At,"DIV",{class:!0});var ut=g(x);ae(Q.$$.fragment,ut),Zt=C(ut),z=f(ut,"P",{class:!0});var gt=g(z);Gt=j(gt,"Mehrheit: "),Tt=j(gt,t[6]),Qt=j(gt,"/"),Dt=j(gt,t[4]),gt.forEach(c),Ut=C(ut),B=f(ut,"P",{class:!0});var vt=g(B);Jt=j(vt,"Zweidrittelmehrheit: "),wt=j(vt,t[6]),Kt=j(vt,"/"),kt=j(vt,t[5]),vt.forEach(c),ut.forEach(c),At.forEach(c),this.h()},h(){y(u,"class","info_container"),y(it,"class","bar_container"),y(Z,"class","input_field_vote_party"),y(S,"class","input_fields_vote"),y(o,"class","vote_share_section"),y(ot,"class","pie_container"),y(z,"class",jt="majorityText "+(t[6]<t[4]?"red":"green")),y(B,"class",St="majorityText "+(t[6]<t[5]?"red":"green")),y(x,"class","stack_container"),y(N,"class","mandate_section")},m(e,m){R(e,l,m),R(e,n,m),R(e,o,m),a(o,u),a(u,r),a(u,w),a(u,v),a(v,i),a(i,h),a(i,ht),a(i,q),a(q,et),a(v,P),a(v,A),a(A,V),a(A,ct),a(A,_),a(_,W),a(v,at),a(v,$),a($,nt),a($,Vt),a($,rt),a(rt,Wt),a(rt,xt),a(v,zt),a(v,J),a(J,lt),a(J,Bt),a(J,pt),a(pt,$t),a(o,Nt),a(o,it),ne(F,it,null),a(o,Ot),a(o,S);for(let L=0;L<E.length;L+=1)E[L]&&E[L].m(S,null);a(S,Ct),a(S,Z),a(Z,st),a(Z,Rt),a(Z,mt),a(mt,yt),a(S,qt),M&&M.m(S,null),R(e,Et,m),R(e,K,m),R(e,Mt,m),R(e,N,m),a(N,ot),ne(G,ot,null),a(N,Ft),a(N,x),ne(Q,x,null),a(x,Zt),a(x,z),a(z,Gt),a(z,Tt),a(z,Qt),a(z,Dt),a(x,Ut),a(x,B),a(B,Jt),a(B,wt),a(B,Kt),a(B,kt),I=!0},p(e,[m]){(!I||m&4)&&tt(W,e[2]);const L={};if(m&8&&(L.data=e[3]),F.$set(L),m&8){dt=ve(e[3].datasets[0].data);let T;for(T=0;T<dt.length;T+=1){const X=be(e,dt,T);E[T]?E[T].p(X,m):(E[T]=Ce(X),E[T].c(),E[T].m(S,Ct))}for(;T<E.length;T+=1)E[T].d(1);E.length=dt.length}(!I||m&1)&&_t!==(_t=(e[0]>=0?e[0].toFixed(2):0)+"")&&tt(yt,_t),e[0]<-1e-5?M||(M=ye(),M.c(),M.m(S,null)):M&&(M.d(1),M=null);const H={};m&128&&(H.data=e[7]),G.$set(H);const U={};m&2&&(U.data=e[1]),m&54&&(U.options={responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:e[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:e[4],xMax:e[4],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:e[5],xMax:e[5],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:Ee,font:{weight:"bold",size:20}},legend:{onClick:e[17]}}}),Q.$set(U),(!I||m&64)&&tt(Tt,e[6]),(!I||m&16)&&tt(Dt,e[4]),(!I||m&80&&jt!==(jt="majorityText "+(e[6]<e[4]?"red":"green")))&&y(z,"class",jt),(!I||m&64)&&tt(wt,e[6]),(!I||m&32)&&tt(kt,e[5]),(!I||m&96&&St!==(St="majorityText "+(e[6]<e[5]?"red":"green")))&&y(B,"class",St)},i(e){I||(re(F.$$.fragment,e),re(G.$$.fragment,e),re(Q.$$.fragment,e),I=!0)},o(e){le(F.$$.fragment,e),le(G.$$.fragment,e),le(Q.$$.fragment,e),I=!1},d(e){e&&(c(l),c(n),c(o),c(Et),c(K),c(Mt),c(N)),ie(F),we(E,e),M&&M.d(),ie(G),ie(Q)}}}function $e(t,l,s){let n=[],o=[],u=[...t];for(let r in t)o.push(1),n.push(0),t[r]<s&&(t[r]=0,u[r]=0);for(let r=0;r<l;r++){let p=u.indexOf(Math.max(...u));o[p]=o[p]+1,n[p]=n[p]+1,u[p]=t[p]/o[p]}return n}function Ne(t,l,s){let n=[],o=new Array(t.length).fill(.5),u=[...t];for(let r in t)o.push(1),n.push(0),t[r]<s&&(t[r]=0,u[r]=0);for(let r=0;r<l;r++){let p=u.indexOf(Math.max(...u));o[p]=o[p]+1,n[p]=n[p]+1,u[p]=t[p]/o[p]}return n}function Oe(t,l,s){let n=[];const r=t.filter(i=>i>=s).reduce((i,h)=>i+h,0)/l;n=t.map(i=>{if(i<s)return 0;const h=Math.floor(i/r),k=i%r;return{initialMandates:h,remainder:k}});let p=n.reduce((i,h)=>i+(h.initialMandates||0),0);const w=l-p,v=n.map((i,h)=>({index:h,remainder:i.remainder||0})).sort((i,h)=>h.remainder-i.remainder);for(let i=0;i<w;i++)n[v[i].index].initialMandates+=1;return n.map(i=>i.initialMandates||0)}const Re=function(t){return t>0?t:""},Ee=function(t){return t>0?t:""};function qe(t,l,s){let n,o,u,r;Ie.register(Le,Pe,Ae,He,Ve,We,xe,ze);let p=Y("data");Ht(t,p,_=>s(3,r=_));let w=Y("mandateData");Ht(t,w,_=>s(7,o=_));let v=Y("majorityData");Ht(t,v,_=>s(1,n=_));let i=Y("mandateCount");Ht(t,i,_=>s(2,u=_));let h=Y("threshold"),k=Y("apportionmentMethod"),ht=Y("electionDate"),q=0,et=0,P=[],A,V=0;function bt(_){r.datasets[0].data[_]=Me(this.value),p.set(r)}const ct=function(_,W){if(W.datasetIndex!==void 0){const at=W.datasetIndex,$=n.datasets[at].hidden;te(v,n.datasets[at].hidden=!$,n)}};return t.$$.update=()=>{if(t.$$.dirty&4&&s(4,q=Math.floor(u/2+1)),t.$$.dirty&4&&s(5,et=Math.ceil(u/3*2)),t.$$.dirty&13&&(s(0,A=100-r.datasets[0].data.reduce((_,W)=>_+W,0)),A>=-1e-5&&(p.set(r),k=="D'Hondt"?s(15,P=$e([...r.datasets[0].data],u,h)):k=="Sainte-Laguë"?s(15,P=Ne([...r.datasets[0].data],u,h)):k=="Hare-Niemeyer"&&s(15,P=Oe([...r.datasets[0].data],u,h)))),t.$$.dirty&32768){te(w,o.datasets[0].data=P,o);for(let _ in P)te(v,n.datasets[_].data=[P[_]],n)}t.$$.dirty&66&&(s(6,V=0),n.datasets.forEach((_,W)=>{_.hidden||s(6,V+=_.data[0])}))},[A,n,u,r,q,et,V,o,p,w,v,i,h,k,ht,P,bt,ct]}class Qe extends De{constructor(l){super(),je(this,l,qe,Be,Te,{})}}export{Qe as E};
