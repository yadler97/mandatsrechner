import{s as we,g as U,c as xt,e as ee,n as se}from"./eX-Ury47.js";import{S as Se,i as Ie,e as c,s as v,t as M,o as ae,c as h,l as $,f as C,a as b,b as E,d as u,p as ne,m as k,g as I,h as r,u as re,j as J,w as le,x as ie,y as oe,n as Ae,q as be,v as Le,A as Te}from"./BHiyQTVU.js";import{e as ve}from"./D6YF6ztN.js";import{B as Ce,P as Pe,C as He,p as Ve,a as We,b as Oe,c as Re,d as xe,L as ze,e as Be,f as $e}from"./DnBxf5iF.js";function ye(t,n,l){const a=t.slice();return a[21]=n[l],a[22]=n,a[23]=l,a}function Fe(t){let n;return{c(){n=M("keine")},l(l){n=E(l,"keine")},m(l,a){I(l,n,a)},p:se,d(l){l&&u(n)}}}function Ne(t){let n,l;return{c(){n=M(t[13]),l=M(" %")},l(a){n=E(a,t[13]),l=E(a," %")},m(a,i){I(a,n,i),I(a,l,i)},p:se,d(a){a&&(u(n),u(l))}}}function Me(t){let n,l,a=t[21].label+"",i,s,o,m,w;function g(){t[18].call(o,t[23],t[21])}return{c(){n=c("div"),l=c("label"),i=M(a),s=v(),o=c("input"),this.h()},l(d){n=h(d,"DIV",{class:!0});var p=b(n);l=h(p,"LABEL",{for:!0});var P=b(l);i=E(P,a),P.forEach(u),s=C(p),o=h(p,"INPUT",{id:!0,type:!0,min:!0,max:!0}),p.forEach(u),this.h()},h(){k(l,"for","input_party_"+t[23]),k(o,"id","input_party_"+t[23]),k(o,"type","number"),k(o,"min","0"),k(o,"max","100"),k(n,"class","input_field_vote_party")},m(d,p){I(d,n,p),r(n,l),r(l,i),r(n,s),r(n,o),be(o,t[3].datasets[t[23]].data[t[21].index]),m||(w=Le(o,"input",g),m=!0)},p(d,p){t=d,p&8&&a!==(a=t[21].label+"")&&J(i,a),p&8&&Te(o.value)!==t[3].datasets[t[23]].data[t[21].index]&&be(o,t[3].datasets[t[23]].data[t[21].index])},d(d){d&&u(n),m=!1,w()}}}function Ee(t){let n,l="Achtung: Gesamtstimmen dürfen 100% nicht überschreiten!";return{c(){n=c("p"),n.textContent=l},l(a){n=h(a,"P",{"data-svelte-h":!0}),$(n)!=="svelte-154vc08"&&(n.textContent=l)},m(a,i){I(a,n,i)},d(a){a&&u(n)}}}function qe(t){let n,l,a;return{c(){n=c("p"),l=M("Achtung: "),a=M(t[15])},l(i){n=h(i,"P",{});var s=b(n);l=E(s,"Achtung: "),a=E(s,t[15]),s.forEach(u)},m(i,s){I(i,n,s),r(n,l),r(n,a)},p:se,d(i){i&&u(n)}}}function Ze(t){let n,l="Stimmenanteile",a,i,s,o,m="Allgemeine Informationen",w,g,d,p,P="Wahltermin",K,X,Y,it,F,S,ot="Abgeordnete",tt,et,st,_t,_,y,x="Sperrklausel",at,gt,zt,nt,dt,de="Sitzzuteilungsverfahren",Bt,bt,$t,Ft,ut,N,Nt,H,kt,q,ft,ue="Sonstige:",qt,vt,Ct=(t[0]>=0?t[0].toFixed(2):0)+"",Dt,Zt,Tt,rt,fe="Mandatsverteilung",jt,wt,z,ct,Z,Gt,W,G,Qt,O,Ut,St,Jt,It,At,Kt,R,Xt,Lt,Yt,Pt,Ht,A;function je(e,f){return e[13]>0?Ne:Fe}let yt=je(t)(t);N=new Ce({props:{data:t[3],options:{responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:ke},annotation:{annotations:t[13]>0?{majorityLine:{type:"line",yMin:t[13],yMax:t[13],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{x:{stacked:!0},y:{stacked:!0,suggestedMax:Math.max(...t[3].labels.map(t[17]))+5}}}}});let ht=ve(t[3].datasets),D=[];for(let e=0;e<ht.length;e+=1)D[e]=Me(ye(t,ht,e));let T=t[0]<-1e-5&&Ee(),B=t[15]&&qe(t);return Z=new Pe({props:{id:"mandatesChart",data:t[8],options:{responsive:!0,circumference:180,rotation:-90,plugins:{datalabels:{anchor:"end",align:"start",color:"white",formatter:Je,font:{weight:"bold",size:20}}}}}}),G=new Ce({props:{data:t[1],options:{responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:t[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:t[5],xMax:t[5],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:t[6],xMax:t[6],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:De,font:{weight:"bold",size:20}},legend:{onClick:t[19]}}}}}),{c(){n=c("h1"),n.textContent=l,a=v(),i=c("section"),s=c("div"),o=c("p"),o.textContent=m,w=v(),g=c("table"),d=c("tr"),p=c("th"),p.textContent=P,K=v(),X=c("td"),Y=M(t[4]),it=v(),F=c("tr"),S=c("th"),S.textContent=ot,tt=v(),et=c("td"),st=M(t[2]),_t=v(),_=c("tr"),y=c("th"),y.textContent=x,at=v(),gt=c("td"),yt.c(),zt=v(),nt=c("tr"),dt=c("th"),dt.textContent=de,Bt=v(),bt=c("td"),$t=M(t[14]),Ft=v(),ut=c("div"),ae(N.$$.fragment),Nt=v(),H=c("div");for(let e=0;e<D.length;e+=1)D[e].c();kt=v(),q=c("div"),ft=c("p"),ft.textContent=ue,qt=v(),vt=c("p"),Dt=M(Ct),Zt=v(),T&&T.c(),Tt=v(),rt=c("h1"),rt.textContent=fe,jt=v(),B&&B.c(),wt=v(),z=c("section"),ct=c("div"),ae(Z.$$.fragment),Gt=v(),W=c("div"),ae(G.$$.fragment),Qt=v(),O=c("p"),Ut=M("Mehrheit: "),St=M(t[7]),Jt=M("/"),It=M(t[5]),Kt=v(),R=c("p"),Xt=M("Zweidrittelmehrheit: "),Lt=M(t[7]),Yt=M("/"),Pt=M(t[6]),this.h()},l(e){n=h(e,"H1",{"data-svelte-h":!0}),$(n)!=="svelte-too001"&&(n.textContent=l),a=C(e),i=h(e,"SECTION",{class:!0});var f=b(i);s=h(f,"DIV",{class:!0});var L=b(s);o=h(L,"P",{"data-svelte-h":!0}),$(o)!=="svelte-7wsg44"&&(o.textContent=m),w=C(L),g=h(L,"TABLE",{});var V=b(g);d=h(V,"TR",{});var Q=b(d);p=h(Q,"TH",{"data-svelte-h":!0}),$(p)!=="svelte-1cjbgjn"&&(p.textContent=P),K=C(Q),X=h(Q,"TD",{});var j=b(X);Y=E(j,t[4]),j.forEach(u),Q.forEach(u),it=C(V),F=h(V,"TR",{});var lt=b(F);S=h(lt,"TH",{"data-svelte-h":!0}),$(S)!=="svelte-m7jygq"&&(S.textContent=ot),tt=C(lt),et=h(lt,"TD",{});var ce=b(et);st=E(ce,t[2]),ce.forEach(u),lt.forEach(u),_t=C(V),_=h(V,"TR",{});var Vt=b(_);y=h(Vt,"TH",{"data-svelte-h":!0}),$(y)!=="svelte-1k72mb"&&(y.textContent=x),at=C(Vt),gt=h(Vt,"TD",{});var he=b(gt);yt.l(he),he.forEach(u),Vt.forEach(u),zt=C(V),nt=h(V,"TR",{});var Wt=b(nt);dt=h(Wt,"TH",{"data-svelte-h":!0}),$(dt)!=="svelte-1lrysmd"&&(dt.textContent=de),Bt=C(Wt),bt=h(Wt,"TD",{});var me=b(bt);$t=E(me,t[14]),me.forEach(u),Wt.forEach(u),V.forEach(u),L.forEach(u),Ft=C(f),ut=h(f,"DIV",{class:!0});var pe=b(ut);ne(N.$$.fragment,pe),pe.forEach(u),Nt=C(f),H=h(f,"DIV",{class:!0});var mt=b(H);for(let te=0;te<D.length;te+=1)D[te].l(mt);kt=C(mt),q=h(mt,"DIV",{class:!0});var Ot=b(q);ft=h(Ot,"P",{"data-svelte-h":!0}),$(ft)!=="svelte-1p0cp1c"&&(ft.textContent=ue),qt=C(Ot),vt=h(Ot,"P",{});var _e=b(vt);Dt=E(_e,Ct),_e.forEach(u),Ot.forEach(u),Zt=C(mt),T&&T.l(mt),mt.forEach(u),f.forEach(u),Tt=C(e),rt=h(e,"H1",{"data-svelte-h":!0}),$(rt)!=="svelte-jg7skr"&&(rt.textContent=fe),jt=C(e),B&&B.l(e),wt=C(e),z=h(e,"SECTION",{class:!0});var Rt=b(z);ct=h(Rt,"DIV",{class:!0});var ge=b(ct);ne(Z.$$.fragment,ge),ge.forEach(u),Gt=C(Rt),W=h(Rt,"DIV",{class:!0});var pt=b(W);ne(G.$$.fragment,pt),Qt=C(pt),O=h(pt,"P",{class:!0});var Mt=b(O);Ut=E(Mt,"Mehrheit: "),St=E(Mt,t[7]),Jt=E(Mt,"/"),It=E(Mt,t[5]),Mt.forEach(u),Kt=C(pt),R=h(pt,"P",{class:!0});var Et=b(R);Xt=E(Et,"Zweidrittelmehrheit: "),Lt=E(Et,t[7]),Yt=E(Et,"/"),Pt=E(Et,t[6]),Et.forEach(u),pt.forEach(u),Rt.forEach(u),this.h()},h(){k(s,"class","info_container"),k(ut,"class","bar_container"),k(q,"class","input_field_vote_party"),k(H,"class","input_fields_vote"),k(i,"class","vote_share_section"),k(ct,"class","pie_container"),k(O,"class",At="majorityText "+(t[7]<t[5]?"red":"green")),k(R,"class",Ht="majorityText "+(t[7]<t[6]?"red":"green")),k(W,"class","stack_container"),k(z,"class","mandate_section")},m(e,f){I(e,n,f),I(e,a,f),I(e,i,f),r(i,s),r(s,o),r(s,w),r(s,g),r(g,d),r(d,p),r(d,K),r(d,X),r(X,Y),r(g,it),r(g,F),r(F,S),r(F,tt),r(F,et),r(et,st),r(g,_t),r(g,_),r(_,y),r(_,at),r(_,gt),yt.m(gt,null),r(g,zt),r(g,nt),r(nt,dt),r(nt,Bt),r(nt,bt),r(bt,$t),r(i,Ft),r(i,ut),re(N,ut,null),r(i,Nt),r(i,H);for(let L=0;L<D.length;L+=1)D[L]&&D[L].m(H,null);r(H,kt),r(H,q),r(q,ft),r(q,qt),r(q,vt),r(vt,Dt),r(H,Zt),T&&T.m(H,null),I(e,Tt,f),I(e,rt,f),I(e,jt,f),B&&B.m(e,f),I(e,wt,f),I(e,z,f),r(z,ct),re(Z,ct,null),r(z,Gt),r(z,W),re(G,W,null),r(W,Qt),r(W,O),r(O,Ut),r(O,St),r(O,Jt),r(O,It),r(W,Kt),r(W,R),r(R,Xt),r(R,Lt),r(R,Yt),r(R,Pt),A=!0},p(e,[f]){(!A||f&16)&&J(Y,e[4]),(!A||f&4)&&J(st,e[2]),yt.p(e,f);const L={};if(f&8&&(L.data=e[3]),f&8&&(L.options={responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:ke},annotation:{annotations:e[13]>0?{majorityLine:{type:"line",yMin:e[13],yMax:e[13],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{x:{stacked:!0},y:{stacked:!0,suggestedMax:Math.max(...e[3].labels.map(e[17]))+5}}}),N.$set(L),f&8){ht=ve(e[3].datasets);let j;for(j=0;j<ht.length;j+=1){const lt=ye(e,ht,j);D[j]?D[j].p(lt,f):(D[j]=Me(lt),D[j].c(),D[j].m(H,kt))}for(;j<D.length;j+=1)D[j].d(1);D.length=ht.length}(!A||f&1)&&Ct!==(Ct=(e[0]>=0?e[0].toFixed(2):0)+"")&&J(Dt,Ct),e[0]<-1e-5?T||(T=Ee(),T.c(),T.m(H,null)):T&&(T.d(1),T=null),e[15]&&B.p(e,f);const V={};f&256&&(V.data=e[8]),Z.$set(V);const Q={};f&2&&(Q.data=e[1]),f&102&&(Q.options={responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:e[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:e[5],xMax:e[5],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:e[6],xMax:e[6],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:De,font:{weight:"bold",size:20}},legend:{onClick:e[19]}}}),G.$set(Q),(!A||f&128)&&J(St,e[7]),(!A||f&32)&&J(It,e[5]),(!A||f&160&&At!==(At="majorityText "+(e[7]<e[5]?"red":"green")))&&k(O,"class",At),(!A||f&128)&&J(Lt,e[7]),(!A||f&64)&&J(Pt,e[6]),(!A||f&192&&Ht!==(Ht="majorityText "+(e[7]<e[6]?"red":"green")))&&k(R,"class",Ht)},i(e){A||(le(N.$$.fragment,e),le(Z.$$.fragment,e),le(G.$$.fragment,e),A=!0)},o(e){ie(N.$$.fragment,e),ie(Z.$$.fragment,e),ie(G.$$.fragment,e),A=!1},d(e){e&&(u(n),u(a),u(i),u(Tt),u(rt),u(jt),u(wt),u(z)),yt.d(),oe(N),Ae(D,e),T&&T.d(),B&&B.d(e),oe(Z),oe(G)}}}function Ge(t,n,l){let a=[],i=[],s=[...t];for(let o in t)i.push(1),a.push(0),t[o]<l&&(t[o]=0,s[o]=0);for(let o=0;o<n;o++){let m=s.indexOf(Math.max(...s));i[m]=i[m]+1,a[m]=a[m]+1,s[m]=t[m]/i[m]}return a}function Qe(t,n,l){let a=[],i=new Array(t.length).fill(.5),s=[...t];for(let o in t)i.push(1),a.push(0),t[o]<l&&(t[o]=0,s[o]=0);for(let o=0;o<n;o++){let m=s.indexOf(Math.max(...s));i[m]=i[m]+1,a[m]=a[m]+1,s[m]=t[m]/i[m]}return a}function Ue(t,n,l){let a=[];const o=t.filter(d=>d>=l).reduce((d,p)=>d+p,0)/n;a=t.map(d=>{if(d<l)return 0;const p=Math.floor(d/o),P=d%o;return{initialMandates:p,remainder:P}});let m=a.reduce((d,p)=>d+(p.initialMandates||0),0);const w=n-m,g=a.map((d,p)=>({index:p,remainder:d.remainder||0})).sort((d,p)=>p.remainder-d.remainder);for(let d=0;d<w;d++)a[g[d].index].initialMandates+=1;return a.map(d=>d.initialMandates||0)}const ke=(t,n)=>{const{chart:l,dataIndex:a,datasetIndex:i}=n,s=l.data.datasets.length-1;return i!==s?"":l.data.datasets.reduce((m,w)=>{const g=w.data[a];return typeof g=="number"?m+g:m},0).toLocaleString("de-AT",{minimumFractionDigits:2,maximumFractionDigits:2})},Je=function(t){return t>0?t:""},De=function(t){return t>0?t:""};function Ke(t,n,l){let a,i,s,o;He.register(Ve,We,Oe,Re,xe,ze,Be,$e);let m=U("data");xt(t,m,_=>l(3,o=_));let w=U("mandateData");xt(t,w,_=>l(8,i=_));let g=U("majorityData");xt(t,g,_=>l(1,a=_));let d=U("mandateCount");xt(t,d,_=>l(2,s=_));let p=U("threshold"),P=U("apportionmentMethod"),K=U("electionDate"),X=U("note"),Y=0,it=0;K=new Date(K).toLocaleDateString("de-AT",{day:"numeric",month:"long",year:"numeric"});let S=[],ot,tt=0;const et=(_,y)=>o.datasets.reduce((x,at)=>x+(at.data[y]||0),0);function st(_,y){o.datasets[_].data[y.index]=Te(this.value),m.set(o)}const _t=function(_,y){if(y.datasetIndex!==void 0){const x=y.datasetIndex,at=a.datasets[x].hidden;ee(g,a.datasets[x].hidden=!at,a)}};return t.$$.update=()=>{if(t.$$.dirty&4&&l(5,Y=Math.floor(s/2+1)),t.$$.dirty&4&&l(6,it=Math.ceil(s/3*2)),t.$$.dirty&13){let _=o.datasets.map(y=>y.data[y.index]);l(0,ot=100-_.reduce((y,x)=>y+x,0)),ot>=-1e-5&&(P=="D'Hondt"?l(16,S=Ge([..._],s,p)):P=="Sainte-Laguë"?l(16,S=Qe([..._],s,p)):P=="Hare-Niemeyer"&&l(16,S=Ue([..._],s,p)))}if(t.$$.dirty&65536){ee(w,i.datasets[0].data=S,i);for(let _ in S)ee(g,a.datasets[_].data=[S[_]],a)}t.$$.dirty&130&&(l(7,tt=0),a.datasets.forEach((_,y)=>{_.hidden||l(7,tt+=_.data[0])}))},[ot,a,s,o,K,Y,it,tt,i,m,w,g,d,p,P,X,S,et,st,_t]}class na extends Se{constructor(n){super(),Ie(this,n,Ke,Ze,we,{})}}export{na as E};
