import{s as je,g as U,c as zt,e as ne,n as we}from"./eX-Ury47.js";import{S as Se,i as Ie,e as c,s as b,t as D,n as re,c as h,k as $,f as C,a as v,b as T,d as u,o as ie,l as M,g as V,h as a,r as le,j as J,v as oe,w as se,x as de,m as Ae,p as ve,u as Le,z as ke}from"./C1hBpTSN.js";import{e as be}from"./D6YF6ztN.js";import{B as Ce,P as Pe,C as He,p as Ve,a as We,b as xe,c as ze,d as Oe,L as Re,e as Be,f as $e}from"./BUV7Wf35.js";function ye(t,r,l){const n=t.slice();return n[21]=r[l],n[22]=r,n[23]=l,n}function Me(t){let r,l,n=t[21].label+"",o,s,i,m,w;function g(){t[18].call(i,t[23],t[21])}return{c(){r=c("div"),l=c("label"),o=D(n),s=b(),i=c("input"),this.h()},l(d){r=h(d,"DIV",{class:!0});var p=v(r);l=h(p,"LABEL",{for:!0});var L=v(l);o=T(L,n),L.forEach(u),s=C(p),i=h(p,"INPUT",{id:!0,type:!0,min:!0,max:!0}),p.forEach(u),this.h()},h(){M(l,"for","input_party_"+t[23]),M(i,"id","input_party_"+t[23]),M(i,"type","number"),M(i,"min","0"),M(i,"max","100"),M(r,"class","input_field_vote_party")},m(d,p){V(d,r,p),a(r,l),a(l,o),a(r,s),a(r,i),ve(i,t[3].datasets[t[23]].data[t[21].index]),m||(w=Le(i,"input",g),m=!0)},p(d,p){t=d,p&8&&n!==(n=t[21].label+"")&&J(o,n),p&8&&ke(i.value)!==t[3].datasets[t[23]].data[t[21].index]&&ve(i,t[3].datasets[t[23]].data[t[21].index])},d(d){d&&u(r),m=!1,w()}}}function Ee(t){let r,l="Achtung: Gesamtstimmen dürfen 100% nicht überschreiten!";return{c(){r=c("p"),r.textContent=l},l(n){r=h(n,"P",{"data-svelte-h":!0}),$(r)!=="svelte-154vc08"&&(r.textContent=l)},m(n,o){V(n,r,o)},d(n){n&&u(r)}}}function Fe(t){let r,l,n;return{c(){r=c("p"),l=D("Achtung: "),n=D(t[15])},l(o){r=h(o,"P",{});var s=v(r);l=T(s,"Achtung: "),n=T(s,t[15]),s.forEach(u)},m(o,s){V(o,r,s),a(r,l),a(r,n)},p:we,d(o){o&&u(r)}}}function Ne(t){let r,l="Stimmenanteile",n,o,s,i,m="Allgemeine Informationen",w,g,d,p,L="Wahltermin",K,X,Y,lt,F,S,ot="Abgeordnete",tt,et,st,gt,_,y,O="Sperrklausel",at,dt,Ot,Rt,Bt,nt,ft,fe="Sitzzuteilungsverfahren",$t,vt,Ft,Nt,ut,N,qt,P,Et,q,ct,ue="Sonstige:",Zt,bt,Ct=(t[0]>=0?t[0].toFixed(2):0)+"",Dt,Gt,Tt,rt,ce="Mandatsverteilung",kt,jt,R,ht,Z,Qt,W,G,Ut,x,Jt,wt,Kt,St,It,Xt,z,Yt,At,te,Lt,Pt,I;N=new Ce({props:{data:t[3],options:{responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:De},annotation:{annotations:t[13]>0?{majorityLine:{type:"line",yMin:t[13],yMax:t[13],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{x:{stacked:!0},y:{stacked:!0,suggestedMax:Math.max(...t[3].labels.map(t[17]))+5}}}}});let mt=be(t[3].datasets),E=[];for(let e=0;e<mt.length;e+=1)E[e]=Me(ye(t,mt,e));let k=t[0]<-1e-5&&Ee(),B=t[15]&&Fe(t);return Z=new Pe({props:{id:"mandatesChart",data:t[8],options:{responsive:!0,circumference:180,rotation:-90,plugins:{datalabels:{anchor:"end",align:"start",color:"white",formatter:Qe,font:{weight:"bold",size:20}}}}}}),G=new Ce({props:{data:t[1],options:{responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:t[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:t[5],xMax:t[5],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:t[6],xMax:t[6],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:Te,font:{weight:"bold",size:20}},legend:{onClick:t[19]}}}}}),{c(){r=c("h1"),r.textContent=l,n=b(),o=c("section"),s=c("div"),i=c("p"),i.textContent=m,w=b(),g=c("table"),d=c("tr"),p=c("th"),p.textContent=L,K=b(),X=c("td"),Y=D(t[4]),lt=b(),F=c("tr"),S=c("th"),S.textContent=ot,tt=b(),et=c("td"),st=D(t[2]),gt=b(),_=c("tr"),y=c("th"),y.textContent=O,at=b(),dt=c("td"),Ot=D(t[13]),Rt=D(" %"),Bt=b(),nt=c("tr"),ft=c("th"),ft.textContent=fe,$t=b(),vt=c("td"),Ft=D(t[14]),Nt=b(),ut=c("div"),re(N.$$.fragment),qt=b(),P=c("div");for(let e=0;e<E.length;e+=1)E[e].c();Et=b(),q=c("div"),ct=c("p"),ct.textContent=ue,Zt=b(),bt=c("p"),Dt=D(Ct),Gt=b(),k&&k.c(),Tt=b(),rt=c("h1"),rt.textContent=ce,kt=b(),B&&B.c(),jt=b(),R=c("section"),ht=c("div"),re(Z.$$.fragment),Qt=b(),W=c("div"),re(G.$$.fragment),Ut=b(),x=c("p"),Jt=D("Mehrheit: "),wt=D(t[7]),Kt=D("/"),St=D(t[5]),Xt=b(),z=c("p"),Yt=D("Zweidrittelmehrheit: "),At=D(t[7]),te=D("/"),Lt=D(t[6]),this.h()},l(e){r=h(e,"H1",{"data-svelte-h":!0}),$(r)!=="svelte-too001"&&(r.textContent=l),n=C(e),o=h(e,"SECTION",{class:!0});var f=v(o);s=h(f,"DIV",{class:!0});var A=v(s);i=h(A,"P",{"data-svelte-h":!0}),$(i)!=="svelte-7wsg44"&&(i.textContent=m),w=C(A),g=h(A,"TABLE",{});var H=v(g);d=h(H,"TR",{});var Q=v(d);p=h(Q,"TH",{"data-svelte-h":!0}),$(p)!=="svelte-1cjbgjn"&&(p.textContent=L),K=C(Q),X=h(Q,"TD",{});var j=v(X);Y=T(j,t[4]),j.forEach(u),Q.forEach(u),lt=C(H),F=h(H,"TR",{});var it=v(F);S=h(it,"TH",{"data-svelte-h":!0}),$(S)!=="svelte-m7jygq"&&(S.textContent=ot),tt=C(it),et=h(it,"TD",{});var he=v(et);st=T(he,t[2]),he.forEach(u),it.forEach(u),gt=C(H),_=h(H,"TR",{});var Ht=v(_);y=h(Ht,"TH",{"data-svelte-h":!0}),$(y)!=="svelte-1k72mb"&&(y.textContent=O),at=C(Ht),dt=h(Ht,"TD",{});var ee=v(dt);Ot=T(ee,t[13]),Rt=T(ee," %"),ee.forEach(u),Ht.forEach(u),Bt=C(H),nt=h(H,"TR",{});var Vt=v(nt);ft=h(Vt,"TH",{"data-svelte-h":!0}),$(ft)!=="svelte-1lrysmd"&&(ft.textContent=fe),$t=C(Vt),vt=h(Vt,"TD",{});var me=v(vt);Ft=T(me,t[14]),me.forEach(u),Vt.forEach(u),H.forEach(u),A.forEach(u),Nt=C(f),ut=h(f,"DIV",{class:!0});var pe=v(ut);ie(N.$$.fragment,pe),pe.forEach(u),qt=C(f),P=h(f,"DIV",{class:!0});var pt=v(P);for(let ae=0;ae<E.length;ae+=1)E[ae].l(pt);Et=C(pt),q=h(pt,"DIV",{class:!0});var Wt=v(q);ct=h(Wt,"P",{"data-svelte-h":!0}),$(ct)!=="svelte-1p0cp1c"&&(ct.textContent=ue),Zt=C(Wt),bt=h(Wt,"P",{});var _e=v(bt);Dt=T(_e,Ct),_e.forEach(u),Wt.forEach(u),Gt=C(pt),k&&k.l(pt),pt.forEach(u),f.forEach(u),Tt=C(e),rt=h(e,"H1",{"data-svelte-h":!0}),$(rt)!=="svelte-jg7skr"&&(rt.textContent=ce),kt=C(e),B&&B.l(e),jt=C(e),R=h(e,"SECTION",{class:!0});var xt=v(R);ht=h(xt,"DIV",{class:!0});var ge=v(ht);ie(Z.$$.fragment,ge),ge.forEach(u),Qt=C(xt),W=h(xt,"DIV",{class:!0});var _t=v(W);ie(G.$$.fragment,_t),Ut=C(_t),x=h(_t,"P",{class:!0});var yt=v(x);Jt=T(yt,"Mehrheit: "),wt=T(yt,t[7]),Kt=T(yt,"/"),St=T(yt,t[5]),yt.forEach(u),Xt=C(_t),z=h(_t,"P",{class:!0});var Mt=v(z);Yt=T(Mt,"Zweidrittelmehrheit: "),At=T(Mt,t[7]),te=T(Mt,"/"),Lt=T(Mt,t[6]),Mt.forEach(u),_t.forEach(u),xt.forEach(u),this.h()},h(){M(s,"class","info_container"),M(ut,"class","bar_container"),M(q,"class","input_field_vote_party"),M(P,"class","input_fields_vote"),M(o,"class","vote_share_section"),M(ht,"class","pie_container"),M(x,"class",It="majorityText "+(t[7]<t[5]?"red":"green")),M(z,"class",Pt="majorityText "+(t[7]<t[6]?"red":"green")),M(W,"class","stack_container"),M(R,"class","mandate_section")},m(e,f){V(e,r,f),V(e,n,f),V(e,o,f),a(o,s),a(s,i),a(s,w),a(s,g),a(g,d),a(d,p),a(d,K),a(d,X),a(X,Y),a(g,lt),a(g,F),a(F,S),a(F,tt),a(F,et),a(et,st),a(g,gt),a(g,_),a(_,y),a(_,at),a(_,dt),a(dt,Ot),a(dt,Rt),a(g,Bt),a(g,nt),a(nt,ft),a(nt,$t),a(nt,vt),a(vt,Ft),a(o,Nt),a(o,ut),le(N,ut,null),a(o,qt),a(o,P);for(let A=0;A<E.length;A+=1)E[A]&&E[A].m(P,null);a(P,Et),a(P,q),a(q,ct),a(q,Zt),a(q,bt),a(bt,Dt),a(P,Gt),k&&k.m(P,null),V(e,Tt,f),V(e,rt,f),V(e,kt,f),B&&B.m(e,f),V(e,jt,f),V(e,R,f),a(R,ht),le(Z,ht,null),a(R,Qt),a(R,W),le(G,W,null),a(W,Ut),a(W,x),a(x,Jt),a(x,wt),a(x,Kt),a(x,St),a(W,Xt),a(W,z),a(z,Yt),a(z,At),a(z,te),a(z,Lt),I=!0},p(e,[f]){(!I||f&16)&&J(Y,e[4]),(!I||f&4)&&J(st,e[2]);const A={};if(f&8&&(A.data=e[3]),f&8&&(A.options={responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:De},annotation:{annotations:e[13]>0?{majorityLine:{type:"line",yMin:e[13],yMax:e[13],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},scales:{x:{stacked:!0},y:{stacked:!0,suggestedMax:Math.max(...e[3].labels.map(e[17]))+5}}}),N.$set(A),f&8){mt=be(e[3].datasets);let j;for(j=0;j<mt.length;j+=1){const it=ye(e,mt,j);E[j]?E[j].p(it,f):(E[j]=Me(it),E[j].c(),E[j].m(P,Et))}for(;j<E.length;j+=1)E[j].d(1);E.length=mt.length}(!I||f&1)&&Ct!==(Ct=(e[0]>=0?e[0].toFixed(2):0)+"")&&J(Dt,Ct),e[0]<-1e-5?k||(k=Ee(),k.c(),k.m(P,null)):k&&(k.d(1),k=null),e[15]&&B.p(e,f);const H={};f&256&&(H.data=e[8]),Z.$set(H);const Q={};f&2&&(Q.data=e[1]),f&102&&(Q.options={responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:e[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:e[5],xMax:e[5],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:e[6],xMax:e[6],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:Te,font:{weight:"bold",size:20}},legend:{onClick:e[19]}}}),G.$set(Q),(!I||f&128)&&J(wt,e[7]),(!I||f&32)&&J(St,e[5]),(!I||f&160&&It!==(It="majorityText "+(e[7]<e[5]?"red":"green")))&&M(x,"class",It),(!I||f&128)&&J(At,e[7]),(!I||f&64)&&J(Lt,e[6]),(!I||f&192&&Pt!==(Pt="majorityText "+(e[7]<e[6]?"red":"green")))&&M(z,"class",Pt)},i(e){I||(oe(N.$$.fragment,e),oe(Z.$$.fragment,e),oe(G.$$.fragment,e),I=!0)},o(e){se(N.$$.fragment,e),se(Z.$$.fragment,e),se(G.$$.fragment,e),I=!1},d(e){e&&(u(r),u(n),u(o),u(Tt),u(rt),u(kt),u(jt),u(R)),de(N),Ae(E,e),k&&k.d(),B&&B.d(e),de(Z),de(G)}}}function qe(t,r,l){let n=[],o=[],s=[...t];for(let i in t)o.push(1),n.push(0),t[i]<l&&(t[i]=0,s[i]=0);for(let i=0;i<r;i++){let m=s.indexOf(Math.max(...s));o[m]=o[m]+1,n[m]=n[m]+1,s[m]=t[m]/o[m]}return n}function Ze(t,r,l){let n=[],o=new Array(t.length).fill(.5),s=[...t];for(let i in t)o.push(1),n.push(0),t[i]<l&&(t[i]=0,s[i]=0);for(let i=0;i<r;i++){let m=s.indexOf(Math.max(...s));o[m]=o[m]+1,n[m]=n[m]+1,s[m]=t[m]/o[m]}return n}function Ge(t,r,l){let n=[];const i=t.filter(d=>d>=l).reduce((d,p)=>d+p,0)/r;n=t.map(d=>{if(d<l)return 0;const p=Math.floor(d/i),L=d%i;return{initialMandates:p,remainder:L}});let m=n.reduce((d,p)=>d+(p.initialMandates||0),0);const w=r-m,g=n.map((d,p)=>({index:p,remainder:d.remainder||0})).sort((d,p)=>p.remainder-d.remainder);for(let d=0;d<w;d++)n[g[d].index].initialMandates+=1;return n.map(d=>d.initialMandates||0)}const De=(t,r)=>{const{chart:l,dataIndex:n,datasetIndex:o}=r,s=l.data.datasets.length-1;return o!==s?"":l.data.datasets.reduce((m,w)=>{const g=w.data[n];return typeof g=="number"?m+g:m},0).toLocaleString("de-AT",{minimumFractionDigits:2,maximumFractionDigits:2})},Qe=function(t){return t>0?t:""},Te=function(t){return t>0?t:""};function Ue(t,r,l){let n,o,s,i;He.register(Ve,We,xe,ze,Oe,Re,Be,$e);let m=U("data");zt(t,m,_=>l(3,i=_));let w=U("mandateData");zt(t,w,_=>l(8,o=_));let g=U("majorityData");zt(t,g,_=>l(1,n=_));let d=U("mandateCount");zt(t,d,_=>l(2,s=_));let p=U("threshold"),L=U("apportionmentMethod"),K=U("electionDate"),X=U("note"),Y=0,lt=0;K=new Date(K).toLocaleDateString("de-AT",{day:"numeric",month:"long",year:"numeric"});let S=[],ot,tt=0;const et=(_,y)=>i.datasets.reduce((O,at)=>O+(at.data[y]||0),0);function st(_,y){i.datasets[_].data[y.index]=ke(this.value),m.set(i)}const gt=function(_,y){if(y.datasetIndex!==void 0){const O=y.datasetIndex,at=n.datasets[O].hidden;ne(g,n.datasets[O].hidden=!at,n)}};return t.$$.update=()=>{if(t.$$.dirty&4&&l(5,Y=Math.floor(s/2+1)),t.$$.dirty&4&&l(6,lt=Math.ceil(s/3*2)),t.$$.dirty&13){let _=i.datasets.map(y=>y.data[y.index]);l(0,ot=100-_.reduce((y,O)=>y+O,0)),ot>=-1e-5&&(L=="D'Hondt"?l(16,S=qe([..._],s,p)):L=="Sainte-Laguë"?l(16,S=Ze([..._],s,p)):L=="Hare-Niemeyer"&&l(16,S=Ge([..._],s,p)))}if(t.$$.dirty&65536){ne(w,o.datasets[0].data=S,o);for(let _ in S)ne(g,n.datasets[_].data=[S[_]],n)}t.$$.dirty&130&&(l(7,tt=0),n.datasets.forEach((_,y)=>{_.hidden||l(7,tt+=_.data[0])}))},[ot,n,s,i,K,Y,lt,tt,o,m,w,g,d,p,L,X,S,et,st,gt]}class ta extends Se{constructor(r){super(),Ie(this,r,Ue,Ne,je,{})}}export{ta as E};
