import{s as je,g as U,c as Wt,a as ne,n as we}from"./hsm1TwBJ.js";import{S as Se,i as Ie,e as h,s as b,t as k,l as re,c,k as O,f as C,a as v,b as T,d as u,m as le,n as M,g as x,h as a,o as ie,j as et,p as oe,q as se,r as de,u as Le,v as ve,w as Ae,x as De}from"./C_t1LkpG.js";import{B as be,e as Ce,P as Pe,C as He,p as Ve,a as xe,b as We,c as ze,d as Be,L as $e,f as Fe,g as Ne}from"./eUnNzeV8.js";function ye(t,r,i){const n=t.slice();return n[20]=r[i],n[21]=r,n[22]=i,n}function Me(t){let r,i,n=t[20].label+"",o,s,l,m,S;function g(){t[18].call(l,t[22],t[20])}return{c(){r=h("div"),i=h("label"),o=k(n),s=b(),l=h("input"),this.h()},l(d){r=c(d,"DIV",{class:!0});var p=v(r);i=c(p,"LABEL",{for:!0});var A=v(i);o=T(A,n),A.forEach(u),s=C(p),l=c(p,"INPUT",{id:!0,type:!0,min:!0,max:!0}),p.forEach(u),this.h()},h(){M(i,"for","input_party_"+t[22]),M(l,"id","input_party_"+t[22]),M(l,"type","number"),M(l,"min","0"),M(l,"max","100"),M(r,"class","input_field_vote_party")},m(d,p){x(d,r,p),a(r,i),a(i,o),a(r,s),a(r,l),ve(l,t[3].datasets[t[22]].data[t[20].index]),m||(S=Ae(l,"input",g),m=!0)},p(d,p){t=d,p&8&&n!==(n=t[20].label+"")&&et(o,n),p&8&&De(l.value)!==t[3].datasets[t[22]].data[t[20].index]&&ve(l,t[3].datasets[t[22]].data[t[20].index])},d(d){d&&u(r),m=!1,S()}}}function Ee(t){let r,i="Achtung: Gesamtstimmen dürfen 100% nicht überschreiten!";return{c(){r=h("p"),r.textContent=i},l(n){r=c(n,"P",{"data-svelte-h":!0}),O(r)!=="svelte-154vc08"&&(r.textContent=i)},m(n,o){x(n,r,o)},d(n){n&&u(r)}}}function Oe(t){let r,i,n;return{c(){r=h("p"),i=k("Achtung: "),n=k(t[15])},l(o){r=c(o,"P",{});var s=v(r);i=T(s,"Achtung: "),n=T(s,t[15]),s.forEach(u)},m(o,s){x(o,r,s),a(r,i),a(r,n)},p:we,d(o){o&&u(r)}}}function Re(t){let r,i="Stimmenanteile",n,o,s,l,m="Allgemeine Informationen",S,g,d,p,A="Wahltermin",pt,J,at,nt,D,W,rt="Abgeordnete",_t,K,lt,_,y,I,it="Sperrklausel",zt,ot,Bt,$t,Ft,X,st,ue="Sitzzuteilungsverfahren",Nt,gt,Ot,Rt,dt,R,qt,P,Mt,q,ut,fe="Sonstige:",Zt,vt,bt=(t[0]>=0?t[0].toFixed(2):0)+"",Et,Gt,kt,Y,he="Mandatsverteilung",Tt,Dt,F,ft,Z,Qt,z,G,Ut,B,Jt,jt,Kt,wt,St,Xt,$,Yt,It,te,Lt,At,H;R=new be({props:{data:t[3],options:{responsive:!0,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:ke},annotation:{annotations:t[12]>0?{majorityLine:{type:"line",yMin:t[12],yMax:t[12],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},layout:{padding:{bottom:-70}},scales:{x:{stacked:!0},y:{stacked:!0,suggestedMax:Math.max(...t[3].labels.map(t[17]))+5}}}}});let ht=Ce(t[3].datasets),E=[];for(let e=0;e<ht.length;e+=1)E[e]=Me(ye(t,ht,e));let j=t[0]<-1e-5&&Ee(),N=t[15]&&Oe(t);return Z=new Pe({props:{id:"mandatesChart",data:t[7],options:{responsive:!0,circumference:180,rotation:-90,plugins:{datalabels:{anchor:"end",align:"start",color:"white",formatter:Qe,font:{weight:"bold",size:20}}}}}}),G=new be({props:{data:t[1],options:{responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:t[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:t[4],xMax:t[4],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:t[5],xMax:t[5],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:Te,font:{weight:"bold",size:20}},legend:{onClick:t[19]}}}}}),{c(){r=h("h1"),r.textContent=i,n=b(),o=h("section"),s=h("div"),l=h("p"),l.textContent=m,S=b(),g=h("table"),d=h("tr"),p=h("th"),p.textContent=A,pt=b(),J=h("td"),at=k(t[14]),nt=b(),D=h("tr"),W=h("th"),W.textContent=rt,_t=b(),K=h("td"),lt=k(t[2]),_=b(),y=h("tr"),I=h("th"),I.textContent=it,zt=b(),ot=h("td"),Bt=k(t[12]),$t=k(" %"),Ft=b(),X=h("tr"),st=h("th"),st.textContent=ue,Nt=b(),gt=h("td"),Ot=k(t[13]),Rt=b(),dt=h("div"),re(R.$$.fragment),qt=b(),P=h("div");for(let e=0;e<E.length;e+=1)E[e].c();Mt=b(),q=h("div"),ut=h("p"),ut.textContent=fe,Zt=b(),vt=h("p"),Et=k(bt),Gt=b(),j&&j.c(),kt=b(),Y=h("h1"),Y.textContent=he,Tt=b(),N&&N.c(),Dt=b(),F=h("section"),ft=h("div"),re(Z.$$.fragment),Qt=b(),z=h("div"),re(G.$$.fragment),Ut=b(),B=h("p"),Jt=k("Mehrheit: "),jt=k(t[6]),Kt=k("/"),wt=k(t[4]),Xt=b(),$=h("p"),Yt=k("Zweidrittelmehrheit: "),It=k(t[6]),te=k("/"),Lt=k(t[5]),this.h()},l(e){r=c(e,"H1",{"data-svelte-h":!0}),O(r)!=="svelte-too001"&&(r.textContent=i),n=C(e),o=c(e,"SECTION",{class:!0});var f=v(o);s=c(f,"DIV",{class:!0});var L=v(s);l=c(L,"P",{"data-svelte-h":!0}),O(l)!=="svelte-7wsg44"&&(l.textContent=m),S=C(L),g=c(L,"TABLE",{});var V=v(g);d=c(V,"TR",{});var Q=v(d);p=c(Q,"TH",{"data-svelte-h":!0}),O(p)!=="svelte-1cjbgjn"&&(p.textContent=A),pt=C(Q),J=c(Q,"TD",{});var w=v(J);at=T(w,t[14]),w.forEach(u),Q.forEach(u),nt=C(V),D=c(V,"TR",{});var tt=v(D);W=c(tt,"TH",{"data-svelte-h":!0}),O(W)!=="svelte-m7jygq"&&(W.textContent=rt),_t=C(tt),K=c(tt,"TD",{});var ce=v(K);lt=T(ce,t[2]),ce.forEach(u),tt.forEach(u),_=C(V),y=c(V,"TR",{});var Pt=v(y);I=c(Pt,"TH",{"data-svelte-h":!0}),O(I)!=="svelte-1k72mb"&&(I.textContent=it),zt=C(Pt),ot=c(Pt,"TD",{});var ee=v(ot);Bt=T(ee,t[12]),$t=T(ee," %"),ee.forEach(u),Pt.forEach(u),Ft=C(V),X=c(V,"TR",{});var Ht=v(X);st=c(Ht,"TH",{"data-svelte-h":!0}),O(st)!=="svelte-1lrysmd"&&(st.textContent=ue),Nt=C(Ht),gt=c(Ht,"TD",{});var me=v(gt);Ot=T(me,t[13]),me.forEach(u),Ht.forEach(u),V.forEach(u),L.forEach(u),Rt=C(f),dt=c(f,"DIV",{class:!0});var pe=v(dt);le(R.$$.fragment,pe),pe.forEach(u),qt=C(f),P=c(f,"DIV",{class:!0});var ct=v(P);for(let ae=0;ae<E.length;ae+=1)E[ae].l(ct);Mt=C(ct),q=c(ct,"DIV",{class:!0});var Vt=v(q);ut=c(Vt,"P",{"data-svelte-h":!0}),O(ut)!=="svelte-1p0cp1c"&&(ut.textContent=fe),Zt=C(Vt),vt=c(Vt,"P",{});var _e=v(vt);Et=T(_e,bt),_e.forEach(u),Vt.forEach(u),Gt=C(ct),j&&j.l(ct),ct.forEach(u),f.forEach(u),kt=C(e),Y=c(e,"H1",{"data-svelte-h":!0}),O(Y)!=="svelte-jg7skr"&&(Y.textContent=he),Tt=C(e),N&&N.l(e),Dt=C(e),F=c(e,"SECTION",{class:!0});var xt=v(F);ft=c(xt,"DIV",{class:!0});var ge=v(ft);le(Z.$$.fragment,ge),ge.forEach(u),Qt=C(xt),z=c(xt,"DIV",{class:!0});var mt=v(z);le(G.$$.fragment,mt),Ut=C(mt),B=c(mt,"P",{class:!0});var Ct=v(B);Jt=T(Ct,"Mehrheit: "),jt=T(Ct,t[6]),Kt=T(Ct,"/"),wt=T(Ct,t[4]),Ct.forEach(u),Xt=C(mt),$=c(mt,"P",{class:!0});var yt=v($);Yt=T(yt,"Zweidrittelmehrheit: "),It=T(yt,t[6]),te=T(yt,"/"),Lt=T(yt,t[5]),yt.forEach(u),mt.forEach(u),xt.forEach(u),this.h()},h(){M(s,"class","info_container"),M(dt,"class","bar_container"),M(q,"class","input_field_vote_party"),M(P,"class","input_fields_vote"),M(o,"class","vote_share_section"),M(ft,"class","pie_container"),M(B,"class",St="majorityText "+(t[6]<t[4]?"red":"green")),M($,"class",At="majorityText "+(t[6]<t[5]?"red":"green")),M(z,"class","stack_container"),M(F,"class","mandate_section")},m(e,f){x(e,r,f),x(e,n,f),x(e,o,f),a(o,s),a(s,l),a(s,S),a(s,g),a(g,d),a(d,p),a(d,pt),a(d,J),a(J,at),a(g,nt),a(g,D),a(D,W),a(D,_t),a(D,K),a(K,lt),a(g,_),a(g,y),a(y,I),a(y,zt),a(y,ot),a(ot,Bt),a(ot,$t),a(g,Ft),a(g,X),a(X,st),a(X,Nt),a(X,gt),a(gt,Ot),a(o,Rt),a(o,dt),ie(R,dt,null),a(o,qt),a(o,P);for(let L=0;L<E.length;L+=1)E[L]&&E[L].m(P,null);a(P,Mt),a(P,q),a(q,ut),a(q,Zt),a(q,vt),a(vt,Et),a(P,Gt),j&&j.m(P,null),x(e,kt,f),x(e,Y,f),x(e,Tt,f),N&&N.m(e,f),x(e,Dt,f),x(e,F,f),a(F,ft),ie(Z,ft,null),a(F,Qt),a(F,z),ie(G,z,null),a(z,Ut),a(z,B),a(B,Jt),a(B,jt),a(B,Kt),a(B,wt),a(z,Xt),a(z,$),a($,Yt),a($,It),a($,te),a($,Lt),H=!0},p(e,[f]){(!H||f&4)&&et(lt,e[2]);const L={};if(f&8&&(L.data=e[3]),f&8&&(L.options={responsive:!0,plugins:{datalabels:{anchor:"end",align:"top",color:"black",font:{weight:"bold"},formatter:ke},annotation:{annotations:e[12]>0?{majorityLine:{type:"line",yMin:e[12],yMax:e[12],borderColor:"rgb(255, 99, 132)",borderWidth:2}}:{}}},layout:{padding:{bottom:-70}},scales:{x:{stacked:!0},y:{stacked:!0,suggestedMax:Math.max(...e[3].labels.map(e[17]))+5}}}),R.$set(L),f&8){ht=Ce(e[3].datasets);let w;for(w=0;w<ht.length;w+=1){const tt=ye(e,ht,w);E[w]?E[w].p(tt,f):(E[w]=Me(tt),E[w].c(),E[w].m(P,Mt))}for(;w<E.length;w+=1)E[w].d(1);E.length=ht.length}(!H||f&1)&&bt!==(bt=(e[0]>=0?e[0].toFixed(2):0)+"")&&et(Et,bt),e[0]<-1e-5?j||(j=Ee(),j.c(),j.m(P,null)):j&&(j.d(1),j=null),e[15]&&N.p(e,f);const V={};f&128&&(V.data=e[7]),Z.$set(V);const Q={};f&2&&(Q.data=e[1]),f&54&&(Q.options={responsive:!0,indexAxis:"y",scales:{y:{stacked:!0},x:{stacked:!0,max:e[2]}},plugins:{annotation:{annotations:{majorityLine:{type:"line",xMin:e[4],xMax:e[4],borderColor:"rgb(255, 99, 132)",borderWidth:3},twoThirdsMajorityLine:{type:"line",xMin:e[5],xMax:e[5],borderColor:"rgb(255, 99, 132)",borderWidth:1}}},datalabels:{anchor:"center",align:"center",color:"white",formatter:Te,font:{weight:"bold",size:20}},legend:{onClick:e[19]}}}),G.$set(Q),(!H||f&64)&&et(jt,e[6]),(!H||f&16)&&et(wt,e[4]),(!H||f&80&&St!==(St="majorityText "+(e[6]<e[4]?"red":"green")))&&M(B,"class",St),(!H||f&64)&&et(It,e[6]),(!H||f&32)&&et(Lt,e[5]),(!H||f&96&&At!==(At="majorityText "+(e[6]<e[5]?"red":"green")))&&M($,"class",At)},i(e){H||(oe(R.$$.fragment,e),oe(Z.$$.fragment,e),oe(G.$$.fragment,e),H=!0)},o(e){se(R.$$.fragment,e),se(Z.$$.fragment,e),se(G.$$.fragment,e),H=!1},d(e){e&&(u(r),u(n),u(o),u(kt),u(Y),u(Tt),u(Dt),u(F)),de(R),Le(E,e),j&&j.d(),N&&N.d(e),de(Z),de(G)}}}function qe(t,r,i){let n=[],o=[],s=[...t];for(let l in t)o.push(1),n.push(0),t[l]<i&&(t[l]=0,s[l]=0);for(let l=0;l<r;l++){let m=s.indexOf(Math.max(...s));o[m]=o[m]+1,n[m]=n[m]+1,s[m]=t[m]/o[m]}return n}function Ze(t,r,i){let n=[],o=new Array(t.length).fill(.5),s=[...t];for(let l in t)o.push(1),n.push(0),t[l]<i&&(t[l]=0,s[l]=0);for(let l=0;l<r;l++){let m=s.indexOf(Math.max(...s));o[m]=o[m]+1,n[m]=n[m]+1,s[m]=t[m]/o[m]}return n}function Ge(t,r,i){let n=[];const l=t.filter(d=>d>=i).reduce((d,p)=>d+p,0)/r;n=t.map(d=>{if(d<i)return 0;const p=Math.floor(d/l),A=d%l;return{initialMandates:p,remainder:A}});let m=n.reduce((d,p)=>d+(p.initialMandates||0),0);const S=r-m,g=n.map((d,p)=>({index:p,remainder:d.remainder||0})).sort((d,p)=>p.remainder-d.remainder);for(let d=0;d<S;d++)n[g[d].index].initialMandates+=1;return n.map(d=>d.initialMandates||0)}const ke=(t,r)=>{const{chart:i,dataIndex:n,datasetIndex:o}=r,s=i.data.datasets.length-1;return o!==s?"":i.data.datasets.reduce((m,S)=>{const g=S.data[n];return typeof g=="number"?m+g:m},0).toLocaleString("de-AT",{minimumFractionDigits:2,maximumFractionDigits:2})},Qe=function(t){return t>0?t:""},Te=function(t){return t>0?t:""};function Ue(t,r,i){let n,o,s,l;He.register(Ve,xe,We,ze,Be,$e,Fe,Ne);let m=U("data");Wt(t,m,_=>i(3,l=_));let S=U("mandateData");Wt(t,S,_=>i(7,o=_));let g=U("majorityData");Wt(t,g,_=>i(1,n=_));let d=U("mandateCount");Wt(t,d,_=>i(2,s=_));let p=U("threshold"),A=U("apportionmentMethod"),pt=U("electionDate"),J=U("note"),at=0,nt=0,D=[],W,rt=0;const _t=(_,y)=>l.datasets.reduce((I,it)=>I+(it.data[y]||0),0);function K(_,y){l.datasets[_].data[y.index]=De(this.value),m.set(l)}const lt=function(_,y){if(y.datasetIndex!==void 0){const I=y.datasetIndex,it=n.datasets[I].hidden;ne(g,n.datasets[I].hidden=!it,n)}};return t.$$.update=()=>{if(t.$$.dirty&4&&i(4,at=Math.floor(s/2+1)),t.$$.dirty&4&&i(5,nt=Math.ceil(s/3*2)),t.$$.dirty&13){let _=l.datasets.map(y=>y.data[y.index]);i(0,W=100-_.reduce((y,I)=>y+I,0)),W>=-1e-5&&(A=="D'Hondt"?i(16,D=qe([..._],s,p)):A=="Sainte-Laguë"?i(16,D=Ze([..._],s,p)):A=="Hare-Niemeyer"&&i(16,D=Ge([..._],s,p)))}if(t.$$.dirty&65536){ne(S,o.datasets[0].data=D,o);for(let _ in D)ne(g,n.datasets[_].data=[D[_]],n)}t.$$.dirty&66&&(i(6,rt=0),n.datasets.forEach((_,y)=>{_.hidden||i(6,rt+=_.data[0])}))},[W,n,s,l,at,nt,rt,o,m,S,g,d,p,A,pt,J,D,_t,K,lt]}class Ye extends Se{constructor(r){super(),Ie(this,r,Ue,Re,je,{})}}export{Ye as E};
